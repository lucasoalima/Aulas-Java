(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+2T6":function(e,t,s){"use strict";s.r(t)},"+49V":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=i.__importDefault(s("2yjE"));s("Udwz"),t.QuestionPoolQuestionHeaderEditMode=e=>{const{localize:t,questionSourceName:s}=e;return a.default.createElement("div",{className:"question-pool-question-header question-pool-question-header--edit"},a.default.createElement(o.default,Object.assign({},e,{showPointsInfo:!1})),a.default.createElement("div",{className:"question-pool-question-header__question-source"},t.translate("questionPools.questionHeader.questionSource",{questionSourceName:s})))},t.QuestionPoolQuestionHeaderEditMode.propTypes={localize:n.default.object.isRequired,questionSourceName:n.default.string.isRequired},t.default=t.QuestionPoolQuestionHeaderEditMode},"+4s7":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importStar(s("ERkP")),a=s("np6O"),n=s("/n7R");t.default=e=>{const{tooltip:t,activeTooltip:s,onClick:o,analyticsId:r}=e,[l,u]=(()=>{const[e,t]=i.useState(!1);return[e,i.useCallback(()=>{t(!0),setTimeout(()=>t(!1),3e3)},[])]})(),d=i.useCallback(e=>{u(),o(e)},[u,o]);return i.createElement(n.AnalyticsTooltip,{analyticsId:`${r}.tooltip`,title:l?s:t},i.createElement(a.AnalyticsIconButton,{onClick:d,analyticsId:r,"aria-label":t},e.children))}},"/Lwm":function(e,t,s){"use strict";s.r(t)},"/R3Y":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i="...";t.truncateString=function(e,t){return null==e||0===e.length?e:`${e.substr(0,t)}${i}`},t.removeExtraWhitespace=function(e){return e.trim().replace(/\s+/g," ")}},"/gJS":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("Agfx");t.useStyles=i.makeStyles(e=>({accessCodeClass:{fontSize:e.typography.fontSizeXXLarge,fontWeight:e.typography.fontWeightLight,letterSpacing:"6px"},highlightClass:{color:e.palette.focus.main},noHighlightClass:{color:e.palette.text.primary,transition:"color 1s"}}))},"/oLw":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("Begd"),l=s("0x+l"),u=s("WDMa"),d=s("E1pj"),c=s("myse"),p=i.__importDefault(s("Ucbz")),m=i.__importDefault(s("vUO3")),f=i.__importDefault(s("fCe2")),h=s("1OFS"),g=i.__importDefault(s("nwoY")),b=s("5rx+");s("jJem");class _ extends a.Component{constructor(e){super(e),this.filterButtonFTUEElement=null,this.toggleFilterPanel=()=>{this.setState(e=>({isShowingFilterPanel:!e.isShowingFilterPanel}))},this.state={isShowingFilterPanel:!e.UltraWindowSize.isSmallBreakpoint()}}render(){const{children:e,criteriaConfig:t,zeroResultsEmptyStateProps:s,id:i,isLoading:n,localize:o,onClearCriteria:d,resultsCount:h,analyticsEventAugmentor:b}=this.props,{isShowingFilterPanel:_}=this.state,y=0===h,E=_?"--on":"--off",C=f.default(t).length,w=o.translate("questionPicker.componentHeader.filterButton",{criteriaCount:C}),S=`${i}-filter-list-criteria`,P=b(c.AnalyticsEventTypes.CLICK_EVENT,this.toggleFilterPanel,"questionPicker.componentHeader.filterButton.toggleFilterPanel.button"),A=o.translate("questionPicker.componentHeader.results",{count:h});return a.default.createElement("div",{className:`filter-list filter-list${E}`},a.default.createElement("div",{className:"filter-list__header"},a.default.createElement("button",{className:`filter-list__filter-button js-filter-button filter-list__filter-button${E}`,onClick:P,"data-analytics-id":"questionPicker.componentHeader.filterButton.toggleFilterPanel.button",ref:e=>{this.filterButtonFTUEElement=e},"aria-expanded":_,"aria-controls":S},a.default.createElement(l.FilterOptions,{className:`filter-list__filter-icon filter-list__filter-icon${E}`}),a.default.createElement("span",{dangerouslySetInnerHTML:{__html:w}})),a.default.createElement("span",{className:"filter-list__filter-results"},A),!_&&a.default.createElement(m.default,{ftueKey:`ftue.${i}.filterPanel.visited`,ftueElement:this.filterButtonFTUEElement,ftueMessageKey:"questionPicker.filterPanel.FTUE"})),a.default.createElement("div",{className:"filter-list__content"},a.default.createElement("div",{id:S,className:"filter-list__criteria"},a.default.createElement(p.default,{criteriaConfig:t,onClearCriteria:d,onPanelClose:this.toggleFilterPanel,isOpen:_})),a.default.createElement("div",{className:"filter-list__items-container"},n&&a.default.createElement(u.Overlay,{className:"filter-list__overlay"},a.default.createElement(r.Spinner,{className:"filter-list__spinner",size:r.SpinnerSize.large})),a.default.createElement("div",{className:"filter-list__items"},!y&&a.default.cloneElement(a.default.Children.only(e),{isShowingFilterPanel:_}),y&&!n&&a.default.createElement(g.default,Object.assign({},s,{showFilterPanelButton:!_,onFilterPanelToggle:this.toggleFilterPanel}))))),!y&&a.default.createElement("span",{role:"status",className:"sr-only"},A))}}t.UnwrappedFilterList=_,_.propTypes={children:n.default.node,criteriaConfig:h.CriteriaConfigPropTypes,zeroResultsEmptyStateProps:n.default.shape({title:n.default.string.isRequired,message:n.default.string.isRequired,image:n.default.string.isRequired}).isRequired,id:n.default.string.isRequired,isLoading:n.default.bool.isRequired,onClearCriteria:n.default.func.isRequired,resultsCount:n.default.number.isRequired,localize:n.default.object.isRequired,UltraWindowSize:n.default.object.isRequired,...b.withAnalyticsProps},t.default=c.withAnalytics(d.windowResizingResponsiveComponentWrapper(o.localizedComponentWrapper(_)))},"/rnO":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("juaI");t.default=i.default},"/zhm":function(e,t,s){"use strict";s.r(t)},"0JkB":function(e,t,s){"use strict";s.r(t)},"10dR":function(e,t,s){"use strict";s.r(t)},"1OFS":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importDefault(s("aWzz")),a=i.default.shape({id:i.default.string.isRequired,name:i.default.string.isRequired,selected:i.default.bool.isRequired}),n=i.default.shape({items:i.default.arrayOf(a).isRequired,name:i.default.string,onSelect:i.default.func.isRequired});t.CriteriaBlockPropTypes=i.default.shape({expanded:i.default.bool.isRequired,id:i.default.string.isRequired,groups:i.default.arrayOf(n).isRequired,name:i.default.string.isRequired}),t.CriteriaConfigPropTypes=i.default.shape({blocks:i.default.arrayOf(t.CriteriaBlockPropTypes).isRequired,onSetKeywords:i.default.func,selectedKeywords:i.default.arrayOf(String)}).isRequired},"1Qsi":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Tibe");t.QuestionBlockQuestion=i.default;var a=s("Ag5V");t.QuestionBlockQuestionEdit=a.default;var n=s("VlbA");t.QuestionBlockQuestionRead=n.default},"1S7Y":function(e,t,s){"use strict";s.r(t)},"1XAg":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=i.__importDefault(s("uh+7"));s("Nr1y");const r=({question:e,answersInfo:t})=>a.default.createElement("div",{className:"readonly-calculated-formula-question"},a.default.createElement("div",{className:"readonly-answer__main"},a.default.createElement(o.default,{question:e})),t&&a.default.createElement("div",{className:"readonly-answer__info readonly-calculated-formula-question__info"},a.default.createElement("div",{className:"readonly-calculated-formula-question__info-section"},t[0]),a.default.createElement("div",{className:"readonly-calculated-formula-question__info-section"},t[1]),a.default.createElement("div",{className:"readonly-calculated-formula-question__info-section"},t[2])));r.propTypes={question:n.default.object.isRequired,answersInfo:n.default.array},t.default=r},"1Xy2":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noPartialCredit="noPartialCredit",t.partialCreditNoPenalty="partialCreditNoPenalty",t.partialCreditWithPenalty="partialCreditWithPenalty",t.partialCreditOverallNegative="partialCreditOverallNegative",t.scoringOptions=[{key:t.partialCreditNoPenalty},{key:t.noPartialCredit},{key:t.partialCreditWithPenalty},{key:t.partialCreditOverallNegative}],t.getSelectedScoringOption=function({allowPartialCredit:e,allowNegativeScoreForIncorrectAnswers:s,allowNegativeOverallScore:i}){return e?i?t.scoringOptions.find(e=>e.key===t.partialCreditOverallNegative):s?t.scoringOptions.find(e=>e.key===t.partialCreditWithPenalty):t.scoringOptions.find(e=>e.key===t.partialCreditNoPenalty):t.scoringOptions.find(e=>e.key===t.noPartialCredit)}},"2L3Q":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("3/0u"),r=s("G0uU"),l=s("8unJ"),u=s("caKH");t.QuestionPoolPanelCloseDialog=e=>{const{closePanel:t,localize:s,setCloseDialogVisibility:i}=e;return a.default.createElement(u.UltraModalDialog,{onDismiss:()=>i(!1),hidden:!1,dialogContentProps:{title:s.translate("questionPools.panelCloseDialog.title"),subText:s.translate("questionPools.panelCloseDialog.instructions")},modalProps:{className:"question-pool-panel-close-dialog"},analyticsId:"questionPools.panelCloseDialog.dialog"},a.default.createElement(o.DialogFooter,null,a.default.createElement(r.DefaultButton,{onClick:()=>i(!1),text:s.translate("questionPools.panelCloseDialog.cancel"),analyticsId:"questionPools.panelCloseDialog.cancel.button"}),a.default.createElement(r.PrimaryButton,{onClick:()=>t(),text:s.translate("questionPools.panelCloseDialog.close"),analyticsId:"questionPools.panelCloseDialog.close.button"})))},t.QuestionPoolPanelCloseDialog.propTypes={closePanel:n.default.func.isRequired,localize:n.default.object.isRequired,setCloseDialogVisibility:n.default.func.isRequired},t.default=l.localizedComponentWrapper(t.QuestionPoolPanelCloseDialog)},"2UXq":function(e,t,s){"use strict";s.r(t)},"2cC3":function(e,t){},"2kfE":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("p0wN");t.default=i.default},"2xrW":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("MC1S"),r=s("8unJ");t.default=e=>{const{type:t,messageSubkey:s}=(e=>0===e.copiesFailed?{type:o.NotificationType.Success,messageSubkey:"success"}:{type:o.NotificationType.Failure,messageSubkey:0===e.copiesSucceeded?"failure":"error"})(e.copyStatus),i=i=>{const{localize:n}=i,r=(e=>`questionReuse.copyResult.${e}`)(s),l=null!=e.autoDismiss&&!e.autoDismiss;return a.default.createElement("div",{className:"question-reuse-notification-wrapper"},a.default.createElement(o.Notification,{type:t,message:n.translate(r,e.copyStatus),disableAutoDismiss:l,onClose:e.dismissNotification}))};return i.propTypes={localize:n.default.object.isRequired},{positionAfter:e.positionAfter,type:t,Component:r.localizedComponentWrapper(i)}}},"2yjE":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("MC1S"),l=s("E1pj"),u=s("myse"),d=s("8jBL"),c=s("JfV0"),p=s("ZQFV"),m=i.__importDefault(s("gTAB")),f=s("5rx+");s("2UXq"),t.QUESTION_TITLE_ID_PREFIX="question-header__title";const h="question-header__";class g extends a.Component{constructor(e){super(e),this.titleRef=a.default.createRef(),this.focusPointsInput=()=>{this.pointsInput.current&&this.pointsInput.current.focus()},this.handlePointsClick=()=>{this.canEnterEditMode&&this.props.onPointsClick()},this.handleOpenGoalsIconClick=()=>{this.props.openGoals&&this.props.hasQuestionEditPermissions&&!this.props.hasSubmissions&&this.props.openGoals()},this.onFullCreditChange=(e,t)=>{this.props.onQuestionChange({...this.props.question,fullCredit:t})},this.onPointsChange=e=>{const t={...this.props.question};c.Questions.isQuestionBlock(this.props.question)?t.pointsPerQuestion=e:t.points=e,this.props.onQuestionChange(t)},this.renderRegradeCheckbox=()=>{const{editMode:e,hasQuestionEditPermissions:t,hasSubmissions:s,hideFullCreditCheckbox:i,localize:n,question:o}=this.props,{showFullCreditCheckboxWhenNoSubmissions:l}=this.state,u=n.translate("assessments.canvas.question.header.fullCredit"),d=m.default.isActive(e);return!i&&t&&d&&(s||l)?a.default.createElement("div",{className:`${h}full-credit`},a.default.createElement(r.Checkbox,{checked:o.fullCredit,onChange:this.onFullCreditChange,ariaLabel:u,label:u,analyticsId:"questionPools.fullCredit.checkBox"})):null},this.pointsInput=a.default.createRef(),this.state={showFullCreditCheckboxWhenNoSubmissions:e.giveFullCredit}}static getDerivedStateFromProps(e){return!m.default.isInactive(e.editMode)||e.giveFullCredit||e.hasSubmissions?null:{showFullCreditCheckboxWhenNoSubmissions:!1}}componentDidMount(){this.props.focusTitle&&this.titleRef.current&&this.titleRef.current.focus()}componentDidUpdate(e){const{editMode:t,focusTitle:s}=this.props,{editMode:i,focusTitle:a}=e;m.default.isInactive(i)&&m.default.isActive(t)&&this.focusPointsInput(),!a&&s&&this.titleRef.current&&this.titleRef.current.focus()}get canEnterEditMode(){return this.props.onPointsClick&&this.props.canEnterEditMode}getGrade(){const{points:e,question:t}=this.props;return{value:e,unit:c.Questions.isQuestionBlock(t)?p.GradingUnit.PointsEach:p.GradingUnit.Points}}renderPointsInfo(){const{editMode:e,hasQuestionEditPermissions:t,id:s,question:i,localize:n,questionTitle:o,showPointsInfo:r,hideEditPoints:l,analyticsEventAugmentor:d,disableInteraction:f}=this.props;if(!1!==r){const r=f?"true":void 0,g=`question-points-${s}`,b=m.default.isActive(e),_=!t,y=t&&!b,E=t&&b,C=c.Questions.isQuestionBlock(i),w=()=>{const e=`assessments.canvas.question.header.edit.ariaLabel.${C?"block":"question"}`,t=n.translate(e,{questionTitle:o}),s=this.canEnterEditMode?`${h}pill--clickable`:"",i=`${e}.gradepill`,l=d(u.AnalyticsEventTypes.CLICK_EVENT,this.handlePointsClick,e),{value:c,unit:m}=this.getGrade();return a.default.createElement(a.default.Fragment,null,a.default.createElement("span",{"data-analytics-id":e,id:g,onClick:l,className:`${h}pill-wrapper ${s}`},a.default.createElement(p.GradePill,{variant:p.GradePillType.UnitBased,grade:c,unit:m,ariaLabel:t,ariaHidden:r,ariaDescribedBy:g,analyticsId:i})))},S=()=>{const e=`points-input${s}`,{value:t,unit:i}=this.getGrade(),l=`assessments.canvas.question.header.edit.ariaLabel.${C?"block":"question"}`,u=n.translate(l,{questionTitle:o}),d=`${l}.gradepill`;return a.default.createElement("div",{className:`${h}points`},a.default.createElement(p.GradePill,{id:e,variant:p.GradePillType.UnitBased,grade:t,emptyGradeNotAllowed:!0,unit:i,onBlur:this.onPointsChange,hasFocus:!0,ariaLabel:u,ariaHidden:r,analyticsId:d}))};if(_||y)return w();if(E&&!l)return S()}return null}render(){const{disableFocus:e,disableInteraction:s,editMode:i,goalAriaLabel:n,hasAlignedGoals:o,question:l,localize:u,UltraWindowSize:p}=this.props,f=m.default.isActive(i),g=c.Questions.isQuestionBlock(l),b=`${h}regrading`,_=f?`${h}edit`:"",y=!!l.fullCredit,E=!f&&y,C=E?a.default.createElement("span",{className:`${h}full-credit-label`},u.translate("assessments.canvas.question.header.fullCreditLabel")):null,w=p.isSmallBreakpoint(),S=a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:`${h}title-container`},a.default.createElement("h3",{id:`${t.QUESTION_TITLE_ID_PREFIX}${this.props.id}`,className:`${h}title`,ref:this.titleRef,tabIndex:-1},this.props.questionTitle),g&&!f&&a.default.createElement("div",{className:`${h}pool-indicator`},u.translate("assessments.canvas.question.header.poolIndicator"))),o&&a.default.createElement(r.IconButton,{icon:a.default.createElement(d.Goal,null),className:`${h}goal-icon-button`,onClick:this.handleOpenGoalsIconClick,ariaLabel:n,disabled:e,href:"#","aria-hidden":s?"true":void 0,removedFromTabOrder:s,analyticsId:"assessments.canvas.question.header.goalIcon.button"}));return a.default.createElement("div",{className:`question-header ${b} ${_}`},w&&a.default.createElement(a.default.Fragment,null,!E&&a.default.createElement(a.default.Fragment,null,S,this.renderRegradeCheckbox(),this.renderPointsInfo()),E&&a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:`${h}column ${h}first-column`},S),a.default.createElement("div",{className:`${h}column ${h}secondary-column`},C,this.renderPointsInfo()))),!w&&a.default.createElement(a.default.Fragment,null,S,C,this.renderRegradeCheckbox(),this.renderPointsInfo()))}}g.propTypes={id:n.default.string.isRequired,canEnterEditMode:n.default.bool.isRequired,editMode:n.default.number.isRequired,localize:n.default.object.isRequired,points:n.default.number,questionTitle:n.default.string.isRequired,onQuestionChange:n.default.func.isRequired,onPointsClick:n.default.func.isRequired,hasSubmissions:n.default.bool.isRequired,hasQuestionEditPermissions:n.default.bool.isRequired,hasAlignedGoals:n.default.bool,openGoals:n.default.func.isRequired,goalAriaLabel:n.default.string.isRequired,hideFullCreditCheckbox:n.default.bool,disableFocus:n.default.bool,disableInteraction:n.default.bool,showPointsInfo:n.default.bool,UltraWindowSize:n.default.object.isRequired,focusTitle:n.default.bool,hideEditPoints:n.default.bool,question:n.default.object.isRequired,...f.withAnalyticsProps},t.UnwrappedQuestionHeader=o.localizedComponentWrapper(g),t.default=l.windowResizingResponsiveComponentWrapper(u.withAnalytics(t.UnwrappedQuestionHeader))},"391C":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importDefault(s("ERkP")),a=s("8unJ"),n=s("MC1S"),o=s("0x+l");s("ztHM");const r=e=>{const{localize:t,onRemove:s,pairNumber:a,isReadOnly:r}=e;return i.default.createElement("div",{className:`matching-prompt-reused-answer ${r?"":" matching-prompt-reused-answer--edit"}`},i.default.createElement(o.Reuse,{className:"matching-prompt-reused-answer__icon"}),i.default.createElement("span",null,t.translate("assessments.canvas.question.matching.reusedAnswer",{pairNumber:a})),!r&&i.default.createElement(n.IconButton,{className:"matching-prompt-reused-answer__remove-button",icon:i.default.createElement(o.Clear,null),onClick:s,title:t.translate("assessments.canvas.question.matching.removeReusedAnswer",{pairNumber:a}),analyticsId:"assessments.canvas.question.matching.removeReUsedAnswer"}))};t.UnwrappedMatchingAnswerReused=r,t.default=a.localizedComponentWrapper(r)},"3ANQ":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("MC1S"),r=s("5rx+"),l=s("IzIX"),u=s("0x+l");s("QpzK");class d extends a.PureComponent{constructor(e){super(e),this.inlineAddButton=null,this.focus=()=>{this.inlineAddButton&&this.inlineAddButton.focus()},this.open=()=>{this.props.onToggleAddMenu(this,this.props.index)},this.close=()=>{this.props.onDismissAddMenu()},this.onClick=e=>{e.stopPropagation(),this.props.isMenuOpen?this.close():this.open()},this.onMouseOver=()=>{this.setState({isMouseOver:!0})},this.onMouseOut=()=>{this.setState({isMouseOver:!1})},this.onKeyboardFocus=()=>{this.setState({isKeyboardFocused:!0})},this.onKeyboardBlur=()=>{this.setState({isKeyboardFocused:!1})},this.getIcon=()=>this.props.isMenuOpen||this.state.isMouseOver||this.state.isKeyboardFocused?a.default.createElement(l.FilledAdd,null):a.default.createElement(u.Add,null),this.getIconClass=()=>{let e="create-new-bar";return this.props.isMenuOpen&&(e+=" -open -focused"),(this.state.isMouseOver||this.state.isKeyboardFocused)&&(e+=" -focused"),this.props.isBlankCanvas&&(e+=" -blank"),this.props.show||(e+=" -hidden"),e},this.setInlineButtonRef=e=>{this.inlineAddButton=e._buttonElement},this.state={isMouseOver:!1,isKeyboardFocused:!1}}render(){const{analyticsId:e}=this.props;return a.default.createElement(o.IconButton,{componentRef:this.setInlineButtonRef,className:this.getIconClass(),icon:this.getIcon(),onFocus:this.onKeyboardFocus,onBlur:this.onKeyboardBlur,"aria-haspopup":"true","aria-expanded":this.props.isMenuOpen,"aria-controls":"assessment-canvas-add-content-menu","aria-hidden":this.props.removedFromTabOrder?"true":void 0,ariaLabel:this.props.buttonAriaLabel,onClick:this.onClick,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,removedFromTabOrder:this.props.removedFromTabOrder,analyticsId:`${e}.inlineAddButton.iconButton.button`})}}t.default=d,d.propTypes={buttonAriaLabel:n.default.string.isRequired,index:n.default.number.isRequired,isBlankCanvas:n.default.bool,isMenuOpen:n.default.bool.isRequired,onDismissAddMenu:n.default.func,onToggleAddMenu:n.default.func,removedFromTabOrder:n.default.bool,show:n.default.bool.isRequired,...r.addAnalyticsProps}},"3Md0":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("lcFE");t.default=i.default,t.QuestionPickerPanel=i.QuestionPickerPanel},"3UQ0":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("Pfoe")),o=i.__importDefault(s("gTAB")),r=s("2yjE");t.getQuestionTextProps=(e,t)=>{const{localize:s,localizationPrefix:i,question:a,questionTitle:n}=e,o=`${r.QUESTION_TITLE_ID_PREFIX}${a.id}`,l=s.translate(`${i}.canvas.question.placeholder.question`,{questionTitle:n||""});return{activeEditorId:e.activeEditorId,ariaLabelledBy:o,disableFocus:e.disableFocus,editMode:e.editMode,placeholderText:l,plugins:e.editorPlugins,pluginsConfig:e.pluginsConfig,onChange:t,question:a,refreshBbml:e.refreshBbml,setActiveEditorId:e.setActiveEditorId}},t.default=({activeEditorId:e,ariaLabelledBy:t,disableEditor:s,disableFocus:i,editMode:r,editorPlugins:l,placeholderText:u,onChange:d,pluginsConfig:c,question:p,refreshBbml:m,setActiveEditorId:f})=>{const h=o.default.isInactive(r)||!!s;return a.default.createElement("div",{className:"question-text"},a.default.createElement(n.default,{activeEditorId:e,ariaLabelledBy:t,ariaRequired:!0,bbml:p.questionText.rawText,disableFocus:i,id:p.id,isReadOnly:h,keepToolbarVisible:!1,onChange:e=>{const t={...p,questionText:{rawText:e.toBbML()}};d(t)},placeholder:u,plugins:l,pluginsConfig:c,refreshBbml:m,setActiveEditorId:f}))}},"3ZJq":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("yxoV");t.AutomatedQuestionFeedback=i.default;var a=s("C9HY");t.AutomatedQuestionFeedbackEdit=a.default;var n=s("O55a");t.AutomatedQuestionFeedbackRead=n.default;var o=s("OyKE");t.AutomatedQuestionFeedbackAttemptReview=o.default},"4+yV":function(e,t,s){"use strict";s.r(t)},"4Pbl":function(e,t,s){"use strict";s.r(t)},"4bjT":function(e,t,s){"use strict";s.r(t)},"5B29":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importStar(s("ERkP"));t.DEFAULT_VALUE={allyService:{getXythosIdFromContentFileUrl:()=>null,update:()=>{},isAvailable:()=>Promise.resolve(!1),getIndexMapFromBbML:()=>null},contentId:null,isAllyAvailable:!1};const a=i.createContext(t.DEFAULT_VALUE);t.withAssessmentPanelContext=e=>t=>i.createElement(a.Consumer,null,s=>i.createElement(e,Object.assign({},t,{context:s}))),t.default=a},"5Hnx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=i.__importDefault(s("PCGI")),r=i.__importDefault(s("m20R")),l=i.__importDefault(s("uh+7")),u=i.__importDefault(s("gTAB")),d=i.__importStar(s("TIvv")),c=i.__importStar(s("AiU9")),p=i.__importDefault(s("ZfLe")),m=s("Vng8");t.CalculatedFormula=e=>{const{editMode:t,question:s}=e;return a.default.createElement("div",null,a.default.createElement(o.default,{editMode:t,question:s},a.default.createElement(d.default,Object.assign({},d.getPluggableQuestionHeaderProps(e,t=>{const i={...s,...t};e.onQuestionChange(i,m.hasBaseQuestionChanged)}))),a.default.createElement(c.default,Object.assign({},c.getQuestionControlProps(e)))),u.default.isActive(t)?a.default.createElement(r.default,Object.assign({},e)):a.default.createElement(l.default,Object.assign({},e)))},t.CalculatedFormula.propTypes={editMode:n.default.number.isRequired,onQuestionChange:n.default.func.isRequired,question:n.default.object.isRequired,showFeatureAnnouncement:n.default.object};const f=p.default(t.CalculatedFormula);t.default=f},"5NQ0":function(e,t,s){"use strict";s.r(t)},"5Y6Q":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("zGdY");t.isUnansweredQuestion=e=>{switch(null==e?void 0:e.questionType){case i.QuestionType.PresentationOnly:return!1;case i.QuestionType.FIMB:return(e=>{const{givenAnswers:t}=e;return!t||"object"!=typeof t||!Object.values(t||{}).every(e=>null!=e&&e.trim().length>0)})(e);case i.QuestionType.Matching:return(e=>{const{givenAnswers:t,question:s}=e;return!t||!s||t.filter(e=>null!==e).length<s.prompts.length})(e);default:return(null==e?void 0:e.attemptStatus)===i.AttemptStatus.NotAttempted}}},"5aOz":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=i.__importDefault(s("PCGI")),r=i.__importDefault(s("gTAB")),l=s("WGaE"),u=i.__importStar(s("TIvv")),d=i.__importDefault(s("ZfLe")),c=i.__importStar(s("AiU9")),p=i.__importStar(s("OPED")),m=s("Vng8");s("qTgb");class f extends a.Component{constructor(){super(...arguments),this.onQuestionChange=e=>{this.props.onQuestionChange(e,m.hasEssayQuestionChanged)}}render(){const{editMode:e,localize:t,localizationPrefix:s,question:i}=this.props,n=r.default.isActive(e),d=n&&m.hasLinkedQuestion(i);return a.default.createElement("div",{className:`essay ${e?"essay--edit":"essay--read"}`},a.default.createElement(o.default,{editMode:e,question:i},a.default.createElement(l.LinkedQuestionNotification,{show:d,usageCount:i.usageCount}),a.default.createElement(u.default,Object.assign({},u.getPluggableQuestionHeaderProps(this.props,this.onQuestionChange))),a.default.createElement(c.default,Object.assign({},c.getQuestionControlProps(this.props))),a.default.createElement(p.default,Object.assign({},p.getQuestionTextProps(this.props,this.onQuestionChange)))),n?null:a.default.createElement("div",{className:"essay__info"},a.default.createElement("div",null,t.translate(`${s}.canvas.question.essay.instructions`))))}}t.Essay=f,f.propTypes={deleteQuestion:n.default.func.isRequired,editMode:n.default.number.isRequired,localize:n.default.object.isRequired,onQuestionChange:n.default.func.isRequired,question:n.default.object.isRequired,questionBeingEditedId:n.default.string,questionTitle:n.default.string.isRequired,refreshBbml:n.default.bool.isRequired,showQuestionControls:n.default.bool.isRequired,startEditMode:n.default.func.isRequired,pluginsConfig:n.default.object.isRequired,localizationPrefix:n.default.string.isRequired};const h=d.default(f);t.default=h},"5mCR":function(e,t,s){"use strict";s.r(t)},"5rm9":function(e,t,s){"use strict";s.r(t)},"5rx+":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("aWzz");t.addAnalyticsProps={analyticsId:i.PropTypes.string.isRequired},t.withAnalyticsProps={analyticsEventAugmentor:i.PropTypes.func.isRequired},t.mockAnalyticsAugmentor=(e,t)=>e=>{t(e)}},"6TGb":function(e,t){e.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 200 200" style="enable-background:new 0 0 200 200;" xml:space="preserve"><g><circle style="fill:#E3F4FC;" cx="99.5" cy="99.5" r="99.5"></circle><g><rect x="51.74" y="40.724" style="fill:#D2EDFA;" width="95.52" height="117.282"></rect><rect x="51.74" y="38.606" style="fill:#FFFFFF;" width="95.52" height="115.42"></rect></g><rect x="93.928" y="75.222" style="fill:#D2EDFA;" width="42.188" height="2.388"></rect><rect x="93.928" y="80.794" style="fill:#D2EDFA;" width="42.188" height="2.388"></rect><rect x="93.928" y="86.366" style="fill:#D2EDFA;" width="20.696" height="2.388"></rect><g><g><g><g><polygon style="fill:#C26FD2;" points="57.61,97.358 59.775,89.345 51.752,91.475 "></polygon></g></g></g></g><g><g><path style="fill:#D2EDFA;" d="M79.6,77.61v14.328H65.272V77.61H79.6 M81.988,75.222H62.884v19.104h19.104V75.222L81.988,75.222z "></path></g></g><g><text transform="matrix(1 0 0 1 93.9282 30.6462)" style="fill:#A8BFCC; font-family:&#x27;OpenSans-Semibold&#x27;; font-size:23.3456;">Abc</text></g><rect x="62.884" y="49.75" style="fill:#D2EDFA;" width="73.232" height="14.328"></rect><g><path style="fill:#D2EDFA;" d="M133.728,107.858v30.248H65.272v-30.248H133.728 M136.116,105.47H62.884v35.024h73.232V105.47 L136.116,105.47z"></path></g><rect x="86.764" y="75.222" style="fill:#D2EDFA;" width="2.388" height="2.388"></rect><rect x="86.764" y="80.794" style="fill:#D2EDFA;" width="2.388" height="2.388"></rect><rect x="86.764" y="86.366" style="fill:#D2EDFA;" width="2.388" height="2.388"></rect><rect x="34.394" y="118.206" style="fill:#AEC6D6;" width="35.024" height="2.388"></rect><rect x="34.394" y="124.574" style="fill:#AEC6D6;" width="34.228" height="2.388"></rect><rect x="34.394" y="130.942" style="fill:#AEC6D6;" width="34.228" height="2.388"></rect><rect x="34.394" y="137.31" style="fill:#AEC6D6;" width="19.9" height="2.388"></rect><g><g><line style="fill:#C7BCAC;" x1="142.447" y1="110.126" x2="142.446" y2="110.126"></line></g></g><g><defs><rect id="SVGID_1_" x="100.296" y="132.534" width="30.248" height="29.452"></rect></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible;"></use></clipPath><g style="clip-path:url(#SVGID_2_);"><path style="fill:#36D7FB;" d="M129.748,162.782h-28.656c-0.879,0-1.592-0.713-1.592-1.592v-27.86 c0-0.879,0.713-1.592,1.592-1.592h28.656c0.879,0,1.592,0.713,1.592,1.592v27.86C131.34,162.069,130.627,162.782,129.748,162.782 z"></path><g><g><circle style="fill:#FEE132;" cx="120.668" cy="147.315" r="2.841"></circle><path style="fill:#FEFA78;" d="M120.669,145.611c0.94,0.001,1.704,0.766,1.704,1.706s-0.766,1.704-1.706,1.704 c-0.94-0.001-1.704-0.766-1.704-1.706C118.964,146.374,119.729,145.61,120.669,145.611 M120.67,144.474 c-1.569-0.001-2.842,1.27-2.843,2.839c-0.001,1.569,1.27,2.842,2.839,2.843c1.569,0.001,2.842-1.27,2.843-2.839 C123.51,145.748,122.239,144.475,120.67,144.474L120.67,144.474z"></path></g><g style="opacity:0.2;"><polyline style="fill:#303030;" points="131.308,160.029 131.31,155.796 125.631,150.11 119.945,155.789 109.723,145.554 99.487,156.912 99.486,160.008 "></polyline></g><g><path style="fill:#44E17D;" d="M119.975,158.238l-10.222-10.235l-10.236,11.358l-0.001,1.817 c-0.001,0.876,0.715,1.592,1.591,1.593l27.957,0.018c1.25,0.001,2.274-1.021,2.274-2.271l0.001-2.273l-5.679-5.686 L119.975,158.238z"></path><g><g><path style="fill:#82FA7D;" d="M109.812,150.315l9.036,9.048l1.125,1.126l1.126-1.125l4.56-4.554l4.088,4.093l-0.002,2.295 l-28.638-0.019l0.001-1.207L109.812,150.315 M109.753,148.002l-10.236,11.358l-0.001,1.818 c-0.001,0.876,0.715,1.592,1.591,1.593l28.638,0.019c0,0,0.001,0,0.001,0c0.875,0,1.591-0.716,1.592-1.591l0.002-2.954 l-5.679-5.686l-5.686,5.679L109.753,148.002L109.753,148.002z"></path></g></g></g></g></g></g><path style="fill:#D2EDFA;" d="M129.748,161.209v1.573l-28.656,0v-1.573H99.5v1.573c0,0.879,0.713,1.592,1.592,1.592h28.656 c0.879,0,1.592-0.713,1.592-1.592v-1.573H129.748z"></path><path style="fill:#FFFFFF;" d="M129.748,133.33L129.748,133.33v27.86l-28.656,0l0-27.86H129.748 M129.748,131.738h-28.656 c-0.879,0-1.592,0.713-1.592,1.592v27.86c0,0.879,0.713,1.592,1.592,1.592h28.656c0.879,0,1.592-0.713,1.592-1.592v-27.86 C131.34,132.451,130.627,131.738,129.748,131.738L129.748,131.738z"></path><path style="fill:none;stroke:#C26FD2;stroke-width:2.388;stroke-linecap:round;stroke-miterlimit:10;" d="M96.515,147.26 c-6.924,0-12.537-5.613-12.537-12.537c0-6.924,5.613-12.537,12.537-12.537"></path><g><g><polygon style="fill:#C26FD2;" points="97.088,126.308 104.276,122.158 97.088,118.007 "></polygon></g></g><g><g><polygon style="fill:#C26FD2;" points="68.671,53.292 72.822,60.48 76.973,53.292 "></polygon></g></g><path style="fill:none;stroke:#C26FD2;stroke-width:2.388;stroke-linecap:round;stroke-miterlimit:10;" d="M72.734,54.526V31.84 c0-6.1,4.945-11.045,11.045-11.045h7.363"></path><line style="fill:none;stroke:#C26FD2;stroke-width:2.388;stroke-linecap:round;stroke-miterlimit:10;" x1="35.289" y1="113.695" x2="54.659" y2="94.326"></line></g><g><rect x="139.218" y="70.125" transform="matrix(0.7071 0.7071 -0.7071 0.7071 107.7969 -73.9948)" style="fill:#FEC34C;" width="8" height="46"></rect><rect x="144.875" y="75.782" transform="matrix(0.7071 0.7071 -0.7071 0.7071 113.4538 -76.3379)" style="fill:#FCB73D;" width="8" height="46"></rect><rect x="157.431" y="76.983" transform="matrix(0.7071 0.7071 -0.7071 0.7071 104.0101 -93.1369)" style="fill:#D5D5D5;" width="14" height="4"></rect><rect x="156.896" y="73.447" transform="matrix(0.7071 0.7071 -0.7071 0.7071 100.4746 -91.6725)" style="fill:#E8E8E8;" width="8" height="4"></rect><path style="fill:#FC5D92;" d="M170.795,82.518l-11.314-11.314l2.885-2.885c3.093-3.093,8.108-3.093,11.201,0l0.113,0.113 c3.093,3.093,3.093,8.108,0,11.201L170.795,82.518z"></path><polygon style="fill:#FCD3A6;" points="118.469,123.531 118.469,123.531 124.126,106.56 135.44,117.874 "></polygon><polyline style="fill:#FCD3A6;" points="124.126,106.56 127.897,106.56 127.897,110.331 131.669,110.331 131.669,114.103 135.44,114.103 135.44,117.874 "></polyline><path style="opacity:0.1;" d="M173.68,68.433l-0.057-0.057l-8.485,8.485l5.657,5.657l2.885-2.885 C176.773,76.54,176.773,71.526,173.68,68.433z"></path><polygon style="fill:#767676;" points="120.237,118.227 118.469,123.531 123.773,121.763 "></polygon></g></svg>'},"6iVS":function(e,t,s){"use strict";s.r(t)},"6rK7":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("qs/y");t.default=i.default},"7//j":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("nBlB"),r=s("8unJ"),l=s("VQXm"),u=i.__importDefault(s("RtIR"));class d extends a.Component{constructor(){super(...arguments),this.getDraggingLabelObject=e=>{const t=this.props.keyInsertIndex-1;return this.props.isKeyboardMoving?e===t?{string:"assessments.canvas.drop.buttonStart",relation:""}:0===this.props.keyInsertIndex?{string:"assessments.canvas.dropAnswer.buttonTop",relation:this.props.questionTitle}:u.default("dropAnswer",this.props.question.answers[t],this.props.questionTitle):u.default("dragAnswer",this.props.question,this.props.questionTitle)}}render(){const{items:e,localize:t,keyInsertIndex:s,isKeyboardMoving:i}=this.props;return a.default.createElement("ol",{id:"multiple-answer-dnd",className:"multiple-answer__list"},e.map((e,n)=>{const o=this.getDraggingLabelObject(n),r=i?s:n+1,u=t.translate(o.string,{relatedQuestion:o.relation,answerNumber:r});return a.default.createElement("li",{key:e.id,className:"multiple-answer__dnd-item"},a.default.createElement(l.DndMultipleAnswerChoice,Object.assign({},this.props,{answer:e,index:n,dragButtonAriaLabel:u,preview:a.default.createElement("div",{className:"multiple-answer__preview",dangerouslySetInnerHTML:{__html:e.answerText.rawText}})})))}))}}d.propTypes={question:n.default.object.isRequired,questionTitle:n.default.string.isRequired,items:n.default.array.isRequired,localize:n.default.object.isRequired,keyInsertIndex:n.default.number.isRequired,isKeyboardMoving:n.default.bool.isRequired},t.UnwrappedEditModeChoices=d,t.default=r.localizedComponentWrapper(o.DragNDropContainer(d))},"76BM":function(e,t,s){"use strict";s.r(t)},"7Eh6":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importStar(s("ERkP")),a=s("/gJS"),n=s("8unJ");t.default=n.localizedComponentWrapper(({code:e,isNew:t=!1,localize:s})=>{const{accessCodeClass:n,highlightClass:o,noHighlightClass:r}=a.useStyles(),l=t?o:r;return i.createElement("span",{className:`${n} ${l} js-access-code-display`},s.formatNumber(Number.parseInt(e,10),{useGrouping:!1,minimumIntegerDigits:6}))})},"7LMM":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=s("FgpP"),n=i.__importStar(s("ERkP")),o=i.__importDefault(s("gTAB"));s("5rm9");const r=i.__importDefault(s("aWzz")),l=s("1Xy2"),u=s("E1pj"),d=({editMode:e,question:t,localize:s,isAnswersEditMode:i,options:r,onScoringOptionsChange:u,translationKeyPrefix:d,UltraWindowSize:c})=>{const p=r.map(e=>({key:e.key,text:s.translate(`${d}.${e.key}`)})),m=o.default.isInactive(e),f=l.getSelectedScoringOption(t),h=s.translate(`${d}.${f.key}`),g=s.translate(`${d}.readPlaceholder`,{scoringOption:h});return n.createElement(n.Fragment,null,m?n.createElement("div",{className:"scoring-options__text"},g):n.createElement("div",{className:"scoring-options__wrapper"},n.createElement("div",{className:"scoring-options__selector"},n.createElement(a.Dropdown,{label:s.translate(`${d}.dropdownLabel`),options:p,onChanged:e=>{let t=null;switch(e.key){case l.partialCreditNoPenalty:t={allowPartialCredit:!0,allowNegativeScoreForIncorrectAnswers:!1,allowNegativeOverallScore:!1};break;case l.noPartialCredit:t={allowPartialCredit:!1,allowNegativeScoreForIncorrectAnswers:!1,allowNegativeOverallScore:!1};break;case l.partialCreditWithPenalty:t={allowPartialCredit:!0,allowNegativeScoreForIncorrectAnswers:!0,allowNegativeOverallScore:!1};break;case l.partialCreditOverallNegative:t={allowPartialCredit:!0,allowNegativeScoreForIncorrectAnswers:!0,allowNegativeOverallScore:!0}}u(t)},selectedKey:f.key,inlineLabel:!c.isSmallBreakpoint(),analyticsId:`${d}.dropdown`,disabled:!i}))))};d.propTypes={question:r.default.object.isRequired,onScoringOptionsChange:r.default.func.isRequired,editMode:r.default.number.isRequired,localize:r.default.object.isRequired,isAnswersEditMode:r.default.bool.isRequired,translationKeyPrefix:r.default.string.isRequired,UltraWindowSize:r.default.object.isRequired},t.default=u.windowResizingResponsiveComponentWrapper(d)},"7Pdu":function(e,t,s){"use strict";s.r(t)},"7UBu":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=s("MC1S"),o=i.__importDefault(s("aWzz")),r=s("3ZJq"),l=i.__importDefault(s("PCGI")),u=i.__importDefault(s("gTAB")),d=s("Vng8"),c=i.__importDefault(s("ZfLe")),p=s("WGaE"),m=i.__importStar(s("TIvv")),f=i.__importStar(s("AiU9")),h=i.__importStar(s("OPED"));s("5mCR");const g="true",b="false";class _ extends a.Component{constructor(){super(...arguments),this.onQuestionChange=e=>{this.props.onQuestionChange(e,d.hasTrueFalseQuestionChanged)},this.onAnswerChange=(e,t)=>{const{onQuestionChange:s,question:i}=this.props;s({...i,answer:t.key===g},d.hasTrueFalseQuestionChanged)},this.getReadModeSection=e=>{const{localize:t,question:s}=this.props;return a.default.createElement("ol",{className:"true-false__list"},a.default.createElement("li",{className:"true-false__li"},a.default.createElement("span",{className:"true-false__text"},t.translate(`${e}.${s.answerType}.true`)),s.answer&&a.default.createElement("span",{className:"true-false__correct"},t.translate(`${e}.correctAnswer`))),a.default.createElement("li",{className:"true-false__li"},a.default.createElement("span",{className:"true-false__text"},t.translate(`${e}.${s.answerType}.false`)),!s.answer&&a.default.createElement("span",{className:"true-false__correct"},t.translate(`${e}.correctAnswer`))))},this.getEditModeSection=e=>{const{localize:t,question:s}=this.props;return a.default.createElement("div",{className:"true-false__options"},a.default.createElement(n.ChoiceGroup,{onChange:this.onAnswerChange,options:[{key:g,text:t.translate(`${e}.${s.answerType}.true`)},{key:b,text:t.translate(`${e}.${s.answerType}.false`)}],selectedKey:s.answer?g:b}))}}render(){const{editMode:e,localizationPrefix:t,question:s,setActiveEditorId:i,pluginsConfig:n}=this.props,o=u.default.isActive(e)&&d.hasLinkedQuestion(s),c=`${t}.canvas.question.trueFalse`,g=u.default.isInactive(e);return a.default.createElement("div",{className:"true-false"},a.default.createElement(l.default,{editMode:e,question:s},a.default.createElement(p.LinkedQuestionNotification,{show:o,usageCount:s.usageCount}),a.default.createElement(m.default,Object.assign({},m.getPluggableQuestionHeaderProps(this.props,this.onQuestionChange))),a.default.createElement(f.default,Object.assign({},f.getQuestionControlProps(this.props))),a.default.createElement(h.default,Object.assign({},h.getQuestionTextProps(this.props,this.onQuestionChange)))),g?this.getReadModeSection(c):this.getEditModeSection(c),a.default.createElement(r.AutomatedQuestionFeedback,{editMode:e,onQuestionChange:this.onQuestionChange,question:s,setActiveEditorId:i,pluginsConfig:n}))}}t.TrueFalse=_,_.propTypes={activeEditorId:o.default.string,alignedGoals:o.default.arrayOf(o.default.object),canEnterEditMode:o.default.bool,customQuestionHeader:o.default.func,deleteQuestion:o.default.func.isRequired,disableEditor:o.default.bool,disableFocus:o.default.bool,disableInteraction:o.default.bool,editMode:o.default.number.isRequired,editorPlugins:o.default.arrayOf(o.default.object),focusTitle:o.default.bool,hasQuestionEditPermissions:o.default.bool,hasSubmissions:o.default.bool.isRequired,localizationPrefix:o.default.string.isRequired,localize:o.default.shape({translate:o.default.func}).isRequired,onQuestionChange:o.default.func.isRequired,openGoals:o.default.func,pluginsConfig:o.default.shape({}).isRequired,question:o.default.shape({assessmentId:o.default.string,id:o.default.string,points:o.default.number,answer:o.default.bool,answerType:o.default.string}).isRequired,questionTitle:o.default.string.isRequired,refreshBbml:o.default.bool.isRequired,setActiveEditorId:o.default.func.isRequired,showQuestionControls:o.default.bool.isRequired,startEditMode:o.default.func.isRequired,showFeatureAnnouncement:o.default.object},_.defaultProps={activeEditorId:null,alignedGoals:null,canEnterEditMode:!1,customQuestionHeader:null,disableEditor:!1,disableFocus:!1,disableInteraction:!1,editorPlugins:null,focusTitle:!1,hasQuestionEditPermissions:!1,openGoals:null};const y=c.default(_);t.default=y},"7fK4":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("AuQm"),l=s("np6O"),u=s("XBaz"),d=s("zGdY"),c=s("t6ux"),p=s("9tRF"),m=s("/R3Y");s("zKpB"),t.CLASS_PREFIX="calculated-formula-question__step-3__variable-value-table",t.TRANSLATION_KEY_PREFIX="assessments.canvas.question.calculatedFormula.stepThree.variableValueTable",t.getResultColumnHeaderInfo=(e,s,i)=>{const a=c.getCorrectAnswerToleranceType(s),n=c.getCorrectAnswerToleranceValue(s),o=`${t.TRANSLATION_KEY_PREFIX}.resultColumnHeader`,r=c.getAnswerTranslationKey(o,a,n,i);return r?e.translate(r,{unitsText:i,answerToleranceValue:n}):null},t.getInputBounding=e=>{const t=e.getBoundingClientRect();return{left:t.left-2,right:t.right+2}},t.getTableBounding=(e,t)=>{const s=e.getBoundingClientRect().width,i=t.offsetWidth-t.clientWidth,a=t.getBoundingClientRect(),n=a.right-s-i;return{left:a.left,right:n}},t.scrollIntoView=(e,s,i)=>{const a=t.getInputBounding(e),n=t.getTableBounding(s,i),o=a.right-n.right,r=a.left-n.left;a.right>n.right&&(i.scrollLeft+=o),a.left<n.left&&(i.scrollLeft+=r)},t.formatResult=(e,t,s,i,a,n)=>{const o=e.babelfishFormatInstance&&e.babelfishFormatInstance.number?e.babelfishFormatInstance.number.getDecimalStringSync(t):".",{SignificantFigures:r,Decimal:l}=d.CalculatedFormulaAnswerPrecisionType,{Normal:u,Exponential:p}=d.CalculatedFormulaAnswerFormatType,m=c.roundWithPrecision(s,i,a?p:u,n?r:l);return a?m.toExponential().replace(".",o):e.formatNumber(m,{maximumFractionDigits:i})},t.BaseVariableValueTableRowResult=({disabled:e,localize:s,result:i,rowNumber:n,ident:o,calculateRow:r,isDirty:d,isRecalculatingVariableSets:p,isExponential:f,scale:h,currentLocale:g,roundToSignificantFigures:b,hasError:_,resultId:y})=>{const E=!Number.isFinite(i)||_,C=E?s.translate(`${t.TRANSLATION_KEY_PREFIX}.resultError`,{row:n}):t.formatResult(s,g,i,h,f,b);return a.default.createElement("td",{className:`${t.CLASS_PREFIX}__cell--result`},a.default.createElement("span",{className:`${t.CLASS_PREFIX}__result-flex-wrapper`},a.default.createElement("span",{id:y,className:m.removeExtraWhitespace(`\n                        ${t.CLASS_PREFIX}__result\n                        ${E?`${t.CLASS_PREFIX}__result--error`:""}\n                    `)},p?"":C),!p&&d&&!_&&a.default.createElement(l.AnalyticsIconButton,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.stepThree.variableValueTable.refresh`,"aria-label":s.translate(`${t.TRANSLATION_KEY_PREFIX}.refresh.ariaLabel`,{row:n}),disabled:e,onClick:()=>r(o)},a.default.createElement(u.Refresh,null))))},t.BaseVariableValueTableRowResult.propTypes={calculateRow:n.default.func,currentLocale:n.default.string,disabled:n.default.bool.isRequired,hasError:n.default.bool.isRequired,ident:n.default.string,isDirty:n.default.bool,isExponential:n.default.bool.isRequired,isRecalculatingVariableSets:n.default.bool,localize:n.default.object,result:n.default.number,resultId:n.default.string.isRequired,roundToSignificantFigures:n.default.bool.isRequired,rowNumber:n.default.number,scale:n.default.number.isRequired},t.VariableValueTableRowResult=o.localizedComponentWrapper(t.BaseVariableValueTableRowResult),t.VariableValueInput=({ariaDescribedBy:e,ariaLabel:s,disabled:i,hasError:n,value:o,isRecalculatingVariableSets:l,updateVariableValue:u,ident:d,variableName:p,onFocus:m})=>a.default.createElement(r.LocalizedNumberInput,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.stepThree.variableValueTable.textField`,ariaDescribedBy:n?e:null,ariaLabel:s,className:`${t.CLASS_PREFIX}__input`,disabled:l||i,numberFormatOptions:{maximumFractionDigits:20},onChange:e=>u(d,p,e),onFocus:m,validate:()=>!n,value:o}),t.VariableValueInput.propTypes={ariaDescribedBy:n.default.string.isRequired,ariaLabel:n.default.string.isRequired,disabled:n.default.bool.isRequired,hasError:n.default.bool.isRequired,value:n.default.number,ident:n.default.string,isRecalculatingVariableSets:n.default.bool,updateVariableValue:n.default.func,variableName:n.default.string,onFocus:n.default.func},t.BaseVariableValueTableRow=({disabled:e,localize:s,rowNumber:i,variableSet:n,isRecalculatingVariableSets:o,calculateRow:r,updateVariableValue:l,isDirty:u,onInputFocus:d,isExponential:c,scale:m,roundToSignificantFigures:f})=>{const h=`variable-value-set-result-${n.ident}`;return a.default.createElement("tr",{className:`${t.CLASS_PREFIX}__row--data`},a.default.createElement("th",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--row`,scope:"row"},s.formatNumber(i)),Object.keys(n.variableValues).map(r=>a.default.createElement("td",{className:`${t.CLASS_PREFIX}__cell`,key:`${n.ident}-${r}`},a.default.createElement(t.VariableValueInput,{ariaDescribedBy:h,ariaLabel:s.translate(`${t.TRANSLATION_KEY_PREFIX}.input.ariaLabel`,{variable:r,row:i}),disabled:e,hasError:!Number.isFinite(n.variableValues[r]),value:n.variableValues[r],isRecalculatingVariableSets:o,updateVariableValue:l,variableName:r,ident:n.ident,onFocus:d}))),a.default.createElement(t.VariableValueTableRowResult,{calculateRow:r,disabled:e,hasError:!p.isVariableSetValid(n),ident:n.ident,isDirty:u,isExponential:c,isRecalculatingVariableSets:o,result:n.answer,resultId:h,roundToSignificantFigures:f,rowNumber:i,scale:m}))},t.BaseVariableValueTableRow.propTypes={calculateRow:n.default.func,disabled:n.default.bool.isRequired,isDirty:n.default.bool,isExponential:n.default.bool.isRequired,isRecalculatingVariableSets:n.default.bool,localize:n.default.object,onInputFocus:n.default.func,roundToSignificantFigures:n.default.bool.isRequired,rowNumber:n.default.number.isRequired,scale:n.default.number.isRequired,updateVariableValue:n.default.func,variableSet:n.default.shape({answer:n.default.number,variableValues:n.default.object,ident:n.default.string.isRequired}).isRequired},t.VariableValueTableRow=o.localizedComponentWrapper(t.BaseVariableValueTableRow),t.BaseVariableValueTable=({disabled:e,localize:s,variableSets:i,isRecalculatingVariableSets:n,calculateRow:o,updateVariableValue:r,dirtyRowMap:l,correctAnswerTolerance:u,unitsText:d,isExponential:c,scale:p,roundToSignificantFigures:f})=>{if(!i)return null;const h=a.useRef(),g=a.useRef(),b=e=>{t.scrollIntoView(e.target,h.current,g.current)},_=t.getResultColumnHeaderInfo(s,u,d);return a.default.createElement("table",{"aria-label":s.translate(`${t.TRANSLATION_KEY_PREFIX}.title`),className:`${t.CLASS_PREFIX}`,ref:g},a.default.createElement("tbody",{className:`${t.CLASS_PREFIX}__body`},a.default.createElement("tr",{className:`${t.CLASS_PREFIX}__row--header`},a.default.createElement("td",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--column`}),Object.keys(i[0].variableValues).map(e=>a.default.createElement("th",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--column`,key:e,scope:"col"},e)),a.default.createElement("th",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--column--result`,scope:"col",ref:h},a.default.createElement("span",{className:m.removeExtraWhitespace(`\n                                ${t.CLASS_PREFIX}__header--column--result--contents\n                            `)},a.default.createElement("span",null,s.translate(`${t.TRANSLATION_KEY_PREFIX}.answer`)),_&&a.default.createElement("span",{className:`${t.CLASS_PREFIX}__header--column--result--contents--info`},_)))),i&&i.map((s,i)=>a.default.createElement(t.VariableValueTableRow,{calculateRow:o,disabled:e,isDirty:l[s.ident],isExponential:c,isRecalculatingVariableSets:n,key:s.ident,onInputFocus:b,roundToSignificantFigures:f,rowNumber:i+1,scale:p,updateVariableValue:r,variableSet:s}))))},t.BaseVariableValueTable.propTypes={calculateRow:n.default.func,correctAnswerTolerance:n.default.object,dirtyRowMap:n.default.object,disabled:n.default.bool.isRequired,isExponential:n.default.bool.isRequired,isRecalculatingVariableSets:n.default.bool,localize:n.default.object,roundToSignificantFigures:n.default.bool.isRequired,scale:n.default.number.isRequired,unitsText:n.default.string,updateVariableValue:n.default.func,variableSets:n.default.arrayOf(n.default.shape({answer:n.default.number,variableValues:n.default.object,ident:n.default.string.isRequired}))},t.default=o.localizedComponentWrapper(t.BaseVariableValueTable)},"8gHA":function(e,t,s){"use strict";s.r(t)},"9HIK":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("2L3Q");t.default=i.default},"9mqG":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("TrYj");t.default=i.default},"9qOT":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Waue");t.default=i.default,t.QuestionPoolQuestionList=i.QuestionPoolQuestionList},"9tRF":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("zGdY");function a(e){return e===i.CalculatedFormulaToleranceType.Numeric}function n(e,t,s){return a(e)?t/s:t/100}function o(e){return e>=0&&e<=100}function r(e,s){return e>=s&&e<=t.MAX_ROUNDING_VALUE}function l(e){return i.CalculatedFormulaAnswerPrecisionType.SignificantFigures===e?t.MIN_SIGNIFICANT_FIGURES_ROUNDING_VALUE:t.MIN_DECIMAL_ROUNDING_VALUE}function u({maxValue:e,minValue:t}){return e>=t}function d({maxValue:e,minValue:t}){return t<=e}function c({scale:e}){return e>=0&&e<=t.MAX_SCALE_VALUE}function p(e){const{maxValue:t,minValue:s,scale:i}=e;return Number.isFinite(t)&&Number.isFinite(s)&&Number.isFinite(i)&&u(e)&&d(e)&&c(e)}function m({variableValues:e}){return Object.values(e).every(e=>Number.isFinite(e))}function f({answer:e}){return Number.isFinite(e)}function h(e){return f(e)&&m(e)}t.MIN_DECIMAL_ROUNDING_VALUE=0,t.MIN_SIGNIFICANT_FIGURES_ROUNDING_VALUE=1,t.MAX_ROUNDING_VALUE=50,t.MAX_SCALE_VALUE=50,t.MIN_ANSWER_SETS=1,t.isNumericType=a,t.getToleranceValueAsPercent=n,t.isValidPercent=o,t.isValidRounding=r,t.getMinimumRoundingValue=l,t.isAnswerScaleValid=function({answerScale:e,correctAnswerPrecision:t}){const s=l(t);return Number.isFinite(e)&&r(e,s)},t.isAnswerToleranceValid=function({correctAnswerTolerance:e}){return Number.isFinite(e.value)},t.isPartialCreditPointsPercentValid=function({allowPartialCredit:e,partialCreditPointsPercent:t}){return!e||Number.isFinite(t)&&o(t)},t.isPartialCreditToleranceValid=function({allowPartialCredit:e,partialCreditTolerance:t}){return!e||Number.isFinite(t.value)},t.isPartialCreditValueGreaterThanAnswerValue=function({allowPartialCredit:e,correctAnswerTolerance:t,partialCreditTolerance:s,points:i}){const a=t&&n(t.type,t.value,i),o=s&&n(s.type,s.value,i);return 0===a||!e||o>=a},t.isPartialCreditPercentGreaterThanUnitsPercent=function({allowPartialCredit:e,partialCreditPointsPercent:t,units:s}){return!e||!s.unitsRequired||t>s.unitPointsPercent},t.isUnitPointsPercentValid=function({units:e}){return e&&(!e.unitsRequired||Number.isFinite(e.unitPointsPercent)&&o(e.unitPointsPercent))},t.isUnitValueValid=function({units:e}){return e&&(!e.unitsRequired||!!e.unitValue)},t.isVariableDefinitionMaxValueInRange=u,t.isVariableDefinitionMinValueInRange=d,t.isVariableDefinitionScaleInRange=c,t.isVariableDefinitionValid=p,t.isVariableDefinitionsValid=function({variableDefinitions:e}){return null==e||e.every(p)},t.isVariableSetCountValid=function({variableSetCount:e}){return Number.isFinite(e)&&e>=0},t.isVariableSetValuesValid=m,t.isVariableValueAnswerValid=f,t.isVariableSetValid=h,t.isVariableSetsValid=function({variableSets:e}){return e.every(e=>h(e))}},AFzv:function(e,t,s){"use strict";s.r(t)},AV37:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("MC1S"),r=s("8unJ"),l="questionReuse.copyProcessing";t.default=(e,t=1)=>{const s=o.NotificationType.Processing;class i extends a.default.Component{constructor(){super(...arguments),this.notificationWrapper=a.default.createRef()}componentDidMount(){this.notificationWrapper.current.focus()}render(){const{localize:e}=this.props;return a.default.createElement("div",{className:"question-reuse-notification-wrapper",tabIndex:"0",ref:this.notificationWrapper},a.default.createElement(o.Notification,{type:s,message:e.translate(l,{questionCount:t})}))}}return i.propTypes={localize:n.default.object.isRequired},{positionAfter:e,type:s,Component:r.localizedComponentWrapper(i)}}},AepM:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importStar(s("ERkP")),a=s("zTL+"),n=s("ECG1"),o=s("8unJ");t.LocalizedPeerReviewPeriodOpenBanner=o.localizedComponentWrapper(({peerReviewDueDate:e,localize:t})=>{const s=t.translate("banners.peerAssessments.peerReviewPeriodOpen.notice",{peerReviewDueDate:e}),o=i.createElement(n.Information,null);return i.createElement(a.AnalyticsBanner,{severity:"info",icon:o},i.createElement("span",{className:"js-banner-contents"},s))})},Ag5V:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("uxze"),r=s("zDAW"),l=s("pNgc"),u=s("AuQm"),d=s("o7ef"),c=s("Vng8"),p=e=>{-1!==e.clipboardData.getData("Text").indexOf(".")&&(e.preventDefault(),e.stopPropagation())},m=e=>{var t;const{hasSubmissions:s,localize:i,onQuestionChange:n,openPoolQuestionPanel:m,question:f,questionBeingEditedId:h}=e,g=`question-block-display-questions-${f.id}`,b=i.translate(`${d.LOCALE_KEY_BASE}.displayQuestions.invalid`),_=f.numOfQuestionsToChoose>=0&&f.numOfQuestionsToChoose<=f.numOfAvailableQuestions,y=a.default.useCallback(e=>{let t;t=Number.isInteger(e)?e:null==e?0:f.numOfQuestionsToChoose,n({...f,numOfQuestionsToChoose:t})},[f,n]);return a.default.createElement("div",{className:`${d.CLASS_BASE} ${d.CLASS_BASE}--edit`},a.default.createElement("div",{className:`${d.CLASS_BASE}__content`},a.default.createElement("div",{className:`${d.CLASS_BASE}__editables-wrapper`},a.default.createElement("div",{className:`${d.CLASS_BASE}__editables-details`},a.default.createElement(l.ContentCollection,{className:`${d.CLASS_BASE}__icon`,color:"primary"}),a.default.createElement("div",{className:`${d.CLASS_BASE}__content-description-wrapper`},a.default.createElement("div",{className:`${d.CLASS_BASE}__content-description`},i.translate(`${d.LOCALE_KEY_BASE}.description.edit.plural`,{questionsTotal:f.numOfAvailableQuestions})),a.default.createElement(o.Link,{disabled:c.isNewQuestion(f)||h!==f.id,onClick:()=>m(f.id),analyticsId:"questionBlockQuestionEdit.poolQuestionPanel.open.link"},i.translate(`${d.LOCALE_KEY_BASE}.viewQuestions`,{questionsTotal:f.numOfAvailableQuestions})))),a.default.createElement("div",{className:`${d.CLASS_BASE}__editables-divider`}),a.default.createElement("div",{className:`${d.CLASS_BASE}__display-questions-wrapper`},a.default.createElement(r.Label,{className:`${d.CLASS_BASE}__display-questions-label`,htmlFor:g},i.translate(`${d.LOCALE_KEY_BASE}.displayQuestions.label`)),a.default.createElement(u.LocalizedNumberInput,{className:`${d.CLASS_BASE}__display-questions-input-wrapper`,helperText:_?"":b,validate:()=>_,id:g,min:0,onPaste:p,onChange:y,type:"text",value:null!==(t=f.numOfQuestionsToChoose)&&void 0!==t?t:0,disabled:s,analyticsId:"questionBlockQuestionEdit.displayQuestionsInput.textField"})))))};m.propTypes={hasSubmissions:n.default.bool.isRequired,localize:n.default.object.isRequired,onQuestionChange:n.default.func.isRequired,openPoolQuestionPanel:n.default.func.isRequired,question:n.default.object.isRequired,questionBeingEditedId:n.default.string},t.default=m},AiU9:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("nsO7")),n=i.__importStar(s("ERkP")),o=i.__importDefault(s("aWzz")),r=s("MC1S"),l=s("76kz"),u=s("0x+l"),d=s("t3aq"),c=s("JfV0"),p=s("zGdY"),m=s("caKH"),f=s("8unJ"),h=i.__importDefault(s("o8si")),g=i.__importDefault(s("RtIR"));s("+2T6");const b=s("b0Dq");function _(e){switch(e){case p.QuestionType.Essay:case p.QuestionType.FIMB:case p.QuestionType.Matching:case p.QuestionType.Multiple:case p.QuestionType.Either:case p.QuestionType.QuestionBlock:return!0;default:return!1}}class y extends n.Component{constructor(e){super(e),this.onDeleteClick=()=>{this.setState({isConfirmationDialogOpen:!0})},this.onAlignWithGoal=()=>{this.props.openGoals()},this.onConfirmationDismiss=()=>{this.setState({isConfirmationDialogOpen:!1})},this.onCancelDelete=()=>{this.onConfirmationDismiss(),this.dropDownMenuButton.firstChild.focus()},this.onMenuOpen=()=>{this.props.updateDropdownMenuOptions&&this.props.updateDropdownMenuOptions(),this.state.isConfirmationDialogOpen&&this.onConfirmationDismiss()},this.getDropDownMenuOptions=()=>{const e=this.mergeDefaultMenuOptionsWithOverrides(),{hasQuestionDeletePermissions:t,hasQuestionEditPermissions:s,hasSubmissions:i,question:a,removeEditOption:n}=this.props,o=!!a.usageCount&&a.usageCount>0;return e.filter(e=>{switch(e.key){case"alignWithGoal":return s;case"regrade":return s&&i;case"delete":return t&&!i&&!o;case"edit":{const e=s&&!n;return _(a.questionType)?e&&!i:e}default:return!0}})},this.getDefaultMenuOptions=()=>{const{localize:e,question:t,startEditMode:s}=this.props,i=[{key:"edit",icon:n.default.createElement(u.Edit,null),name:e.translate("assessments.canvas.question.overflowOptions.edit"),onClick:()=>s()},{key:"delete",icon:n.default.createElement(u.Trash,null),name:e.translate("assessments.canvas.question.overflowOptions.delete"),onClick:()=>this.onDeleteClick()}];if(_(t.questionType)&&i.unshift({key:"regrade",icon:n.default.createElement(u.Edit,null),name:e.translate("assessments.canvas.question.overflowOptions.regrade"),onClick:()=>s()}),!c.Questions.isPresentationOnly(t)&&!c.Questions.isQuestionBlock(t)){const t={key:"alignWithGoal",icon:n.default.createElement(u.Goal,null),name:e.translate("assessments.canvas.question.overflowOptions.alignWithGoal"),onClick:()=>this.onAlignWithGoal()};i.splice(i.length-1,0,t)}return i},this.mergeDefaultMenuOptionsWithOverrides=()=>{const{dropDownMenuOptionsOverrides:e}=this.props,t=this.getDefaultMenuOptions(),s=t.map(t=>{const s=a.find(e,{key:t.key});return void 0===s?t:s}),i=a.differenceWith(e,t,(e,t)=>e.key===t.key);return s.concat(i)},this.state={isConfirmationDialogOpen:!1}}render(){const{deleteQuestion:e,dragButtonAriaLabel:t,dragPointRef:s,disableInteraction:i,hasAssessmentModifyPermissions:a,hasSubmissions:o,localize:u,question:p,questionTitle:f,showQuestionControls:_}=this.props;if(!_)return null;let y="question";c.Questions.isPresentationOnly(p)&&(y=c.Questions.isFileAttachment(p)?"file":"text");const E="file"===y?b.getFileViewerPropsArray(p):[],C=E.length?E[0].file:null,w={onDismiss:()=>this.onConfirmationDismiss(),showAsCallout:!0,target:this.dropDownMenuButton,calloutProps:{setInitialFocus:!0},dialogContentProps:{type:r.DialogType.actionConfirmation,showCloseButton:!1,title:u.translate(`assessments.canvas.question.deleteConfirmation.title.${y}`),subText:u.translate(`assessments.canvas.question.deleteConfirmation.subText.${y}`),isAlert:!0}},S=g.default("overflow",p,f),P=this.getDropDownMenuOptions();return n.default.createElement("div",{className:"question-controls"},n.default.createElement("div",{className:"question-controls__actions"},n.default.createElement("div",{ref:e=>{this.dropDownMenuButton=e},className:"question-controls__menu-icon"},!!P.length&&n.default.createElement(r.ActionMenu,{maintainExpandedProperties:this.state.isConfirmationDialogOpen,menuProps:{directionalHint:6,items:P,onMenuOpened:()=>this.onMenuOpen()},ariaLabel:u.translate(S.string,{relatedContent:S.relation}),"aria-hidden":i?"true":void 0,removedFromTabOrder:i}),this.state.isConfirmationDialogOpen?n.default.createElement(m.UltraModalDialog,Object.assign({},w),n.default.createElement(r.DialogFooter,null,n.default.createElement(r.DefaultButton,{onClick:()=>this.onCancelDelete(),text:u.translate("assessments.canvas.question.deleteConfirmation.cancel"),analyticsId:"assessments.canvas.question.deleteConfirmation.cancel"}),n.default.createElement(r.PrimaryButton,{onClick:e,text:u.translate("assessments.canvas.question.deleteConfirmation.delete"),analyticsId:"assessments.canvas.question.deleteConfirmation.delete"}))):null),C&&l.canFileBeRenderedInline(C)&&l.isFileDisplayedInline(C)&&n.default.createElement("div",{className:"question-controls__score-indicator"},n.default.createElement(d.AllyWidget,{contentRef:p.id,widgetType:d.WidgetType.ScoreIndicator})),!o&&a&&n.default.createElement(h.default,{ariaLabel:t,className:"question-controls__dnd",dragPointRef:s,title:u.translate("assessments.canvas.drag.instructions"),removedFromTabOrder:i,analyticsId:"assessments.canvas.drag.instructions"})))}}y.propTypes={deleteQuestion:o.default.func.isRequired,dragButtonAriaLabel:o.default.string.isRequired,dragPointRef:o.default.func.isRequired,dropDownMenuOptionsOverrides:o.default.array,editMode:o.default.number.isRequired,hasQuestionEditPermissions:o.default.bool.isRequired,hasQuestionDeletePermissions:o.default.bool.isRequired,hasSubmissions:o.default.bool.isRequired,hasAssessmentModifyPermissions:o.default.bool.isRequired,localize:o.default.object.isRequired,openGoals:o.default.func.isRequired,removeEditOption:o.default.bool,startEditMode:o.default.func.isRequired,updateDropdownMenuOptions:o.default.func,question:o.default.object.isRequired,questionTitle:o.default.string,disableInteraction:o.default.bool,showQuestionControls:o.default.bool.isRequired},t.getQuestionControlProps=e=>({deleteQuestion:e.deleteQuestion,dragButtonAriaLabel:e.dragButtonAriaLabel,dragPointRef:e.dragPointRef,editMode:e.editMode,hasQuestionEditPermissions:e.hasQuestionEditPermissions,hasQuestionDeletePermissions:e.hasQuestionDeletePermissions,hasSubmissions:e.hasSubmissions,hasAssessmentModifyPermissions:e.hasAssessmentModifyPermissions,openGoals:e.openGoals,question:e.question,showQuestionControls:e.showQuestionControls,startEditMode:e.startEditMode}),t.default=f.localizedComponentWrapper(y)},B8lv:function(e,t,s){"use strict";s.r(t)},BJSr:function(e,t,s){"use strict";s.r(t)},BXTk:function(e,t,s){"use strict";s.r(t)},C9HY:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=s("uDfI"),o=s("8unJ"),r=s("tN4z"),l=s("ECG1"),u=s("JfV0"),d=s("zGdY"),c=s("HZ1V"),p=i.__importDefault(s("Pfoe")),m=i.__importDefault(s("O94r")),f=i.__importDefault(s("YE/5")),h=o.localizedComponentWrapper(({localize:e,modeDisplayText:t,uniqueId:s})=>{const i=c.useStyles();return a.default.createElement("div",{className:i.displaySettings},a.default.createElement(r.AnalyticsTypography,{component:"span",variant:"inherit",id:`${g}__displaySettingsText-${s}`},t),a.default.createElement(r.AnalyticsTooltip,{analyticsId:`${b}.tooltip`,title:e.translate("automatedQuestionFeedback.edit.displaySettings.tooltip.content"),placement:"top"},a.default.createElement(r.AnalyticsIconButton,{className:i.displaySettingsButton,analyticsId:`${b}.displaySettings.tooltip`,"aria-label":e.translate("automatedQuestionFeedback.edit.displaySettings.tooltip.ariaLabel")},a.default.createElement(l.Information,null))))}),g="automated-question-feedback-edit",b="assessments.automated-question-feedback.edit";t.CORRECT_FEEDBACK_SELECTOR=`js-${g}__correct-feedback`,t.INCORRECT_FEEDBACK_SELECTOR=`js-${g}__incorrect-feedback`,t.AutomatedQuestionFeedbackEditComponent=({content:e,localize:s,question:i,onQuestionChange:n,setActiveEditorId:o,activeEditorId:l,pluginsConfig:_})=>{var y,E,C,w,S;const P=c.useStyles(),A=`${g}_incorrect-section-title_${i.id}`,R=`${g}_correct-section-title_${i.id}`,[v,q]=a.default.useState(!!(null===(y=i.correctResponseFeedback)||void 0===y?void 0:y.rawText)||!!(null===(E=i.incorrectResponseFeedback)||void 0===E?void 0:E.rawText)),[T,I]=a.default.useState(!1),[D,Q]=a.default.useState(!1);let F="";const x=null===(C=null==e?void 0:e.deploymentSettings)||void 0===C?void 0:C.feedbackSettings,{associatedDate:k,mode:N}=u.FeedbackSettings.getFeedbackModeByOption(d.AssessmentFeedbackOption.InstructorFeedback,x);return F=N?k?s.translate("automatedQuestionFeedback.edit.displaySettings.feedbackMode.osd",{date:k}):s.translate(`automatedQuestionFeedback.edit.displaySettings.feedbackMode.${N}`):s.translate("automatedQuestionFeedback.edit.displaySettings.hidden"),a.default.createElement("div",{className:m.default(P.base,g)},a.default.createElement("div",{className:P.header},a.default.createElement(r.AnalyticsFormControlLabel,{analyticsId:`${b}.toggleLabel`,className:P.toggleLabel,control:a.default.createElement(r.AnalyticsSwitch,{analyticsId:`${b}.toggleSwitch`,checked:v,className:m.default(P.toggleSwitch,`${g}__toggleSwitch`),onChange:(e,t)=>{var s,a;const n=(null===(s=i.correctResponseFeedback)||void 0===s?void 0:s.rawText)||(null===(a=i.incorrectResponseFeedback)||void 0===a?void 0:a.rawText);t||!n&&!D?q(t):I(!0)}}),label:s.translate("automatedQuestionFeedback.edit.toggleLabel")}),a.default.createElement(h,{modeDisplayText:F,uniqueId:i.id})),v&&a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:`${P.correct} ${t.CORRECT_FEEDBACK_SELECTOR}`},a.default.createElement("div",{className:P.sectionHeader},a.default.createElement(r.AnalyticsTypography,{id:R,component:e=>a.default.createElement("label",Object.assign({htmlFor:`correct-feedback_${i.id}`},e)),variant:"h6",className:P.sectionTitle},s.translate("automatedQuestionFeedback.correctAnswerLabel"))),a.default.createElement(p.default,{ariaLabelledBy:R,bbml:null===(w=i.correctResponseFeedback)||void 0===w?void 0:w.rawText,id:`correct-feedback_${i.id}`,isReadOnly:!1,onChange:e=>{Q(!0),n({...i,correctResponseFeedback:{rawText:e.toBbML()}})},setActiveEditorId:o,keepToolbarVisible:!1,activeEditorId:l,pluginsConfig:_})),a.default.createElement("div",{className:`${P.correct} ${t.INCORRECT_FEEDBACK_SELECTOR}`},a.default.createElement("div",{className:P.sectionHeader},a.default.createElement(r.AnalyticsTypography,{id:A,component:e=>a.default.createElement("label",Object.assign({htmlFor:`incorrect-feedback_${i.id}`},e)),variant:"h6",className:P.sectionTitle},s.translate("automatedQuestionFeedback.incorrectAnswerLabel")),a.default.createElement(r.AnalyticsTypography,{component:"span",variant:"body2",className:P.sectionInstructions},s.translate("automatedQuestionFeedback.edit.incorrectAnswerInstructions"))),a.default.createElement(p.default,{ariaLabelledBy:A,bbml:null===(S=i.incorrectResponseFeedback)||void 0===S?void 0:S.rawText,id:`incorrect-feedback_${i.id}`,isReadOnly:!1,onChange:e=>{Q(!0),n({...i,incorrectResponseFeedback:{rawText:e.toBbML()}})},setActiveEditorId:o,keepToolbarVisible:!1,activeEditorId:l,pluginsConfig:_}))),a.default.createElement(f.default,{analyticsId:`${b}.removeFeedbackWarning`,okButtonLocaleKey:"automatedQuestionFeedback.edit.warningDialog.okButton",onOk:()=>{I(!1),q(!1),Q(!1),n({...i,correctResponseFeedback:{rawText:""},incorrectResponseFeedback:{rawText:""}})},onCancel:()=>I(!1),onDismiss:()=>I(!1),show:T,subText:s.translate("automatedQuestionFeedback.edit.warningDialog.text"),title:s.translate("automatedQuestionFeedback.edit.warningDialog.title")}))};const _=n.connect((e,t)=>({content:u.select.content.getContentByAssessmentId(e,t.question.assessmentId)}))(t.AutomatedQuestionFeedbackEditComponent);t.default=o.localizedComponentWrapper(_)},CCvt:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("AuQm"),l=s("E1pj"),u=s("t6ux"),d=s("9tRF");function c(e,t,s){return{...e,[t]:s}}function p(e){return e.reduce((e,t)=>c(e,t.name,!0),{})}function m(e){return Object.values(e).every(e=>e)}s("BJSr"),t.CLASS_PREFIX="calculated-formula-question__step-2__variable-range-table",t.TRANSLATION_KEY_PREFIX="assessments.canvas.question.calculatedFormula.stepTwo.variableRanges",t.INPUT_KEY_PREFIX=`${t.TRANSLATION_KEY_PREFIX}.table.input`,t.getInputErrorKey=(e,s,i)=>{let a=null;return null!=s&&i<s?a=`${t.INPUT_KEY_PREFIX}.error.lessThanMinimum`:null!=e&&i>e?a=`${t.INPUT_KEY_PREFIX}.error.greaterThanMaximum`:null==i&&(a=`${t.INPUT_KEY_PREFIX}.error.NaN`),a},t.BaseVariableRangeInput=({analyticsId:e,ariaLabel:s,disabled:i,localize:n,max:o,min:l,numberFormatOptions:u,onChange:d,onValidate:c,value:p})=>{const m=t.getInputErrorKey(o,l,p),f=null!=m&&n.translate(m,{max:o,min:l});return a.default.useEffect(()=>{c(null==m)},[m,c]),a.default.createElement(r.LocalizedNumberInput,{analyticsId:`${e}.textField`,ariaLabel:s,className:`${t.CLASS_PREFIX}__input`,disabled:i,helperText:f,max:o,min:l,numberFormatOptions:u,onChange:d,validate:()=>!f,value:p})},t.BaseVariableRangeInput.propTypes={analyticsId:n.default.string.isRequired,ariaLabel:n.default.string.isRequired,disabled:n.default.bool.isRequired,localize:n.default.object,max:n.default.number,min:n.default.number,numberFormatOptions:n.default.object,onChange:n.default.func.isRequired,onValidate:n.default.func.isRequired,value:n.default.number},t.VariableRangeInput=o.localizedComponentWrapper(t.BaseVariableRangeInput),t.BaseVariableRangeTableRow=({disabled:e,localize:s,maxValue:i,minValue:n,name:o,onChange:r,onValidate:l,scale:c})=>{const[p,m]=a.useState(!0),[f,h]=a.useState(!0),[g,b]=a.useState(!0),_=p&&f&&g;a.default.useEffect(()=>{l(_)},[_]);return a.default.createElement("tr",{className:`${t.CLASS_PREFIX}__row`},a.default.createElement("th",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--row`,scope:"row"},o),a.default.createElement("td",{className:`${t.CLASS_PREFIX}__cell ${t.CLASS_PREFIX}__cell--min`},a.default.createElement(t.VariableRangeInput,{analyticsId:`${u.ANALYTICS_ID_PREFIX}.variableRange.minimum`,ariaLabel:s.translate(`${t.INPUT_KEY_PREFIX}.ariaLabel.minimum`,{name:o}),disabled:e,max:i,onChange:e=>{r({minValue:e})},onValidate:h,value:n})),a.default.createElement("td",{className:`${t.CLASS_PREFIX}__cell ${t.CLASS_PREFIX}__cell--max`},a.default.createElement(t.VariableRangeInput,{analyticsId:`${u.ANALYTICS_ID_PREFIX}.variableRange.maximum`,ariaLabel:s.translate(`${t.INPUT_KEY_PREFIX}.ariaLabel.maximum`,{name:o}),disabled:e,min:n,onChange:e=>{r({maxValue:e})},onValidate:m,value:i})),a.default.createElement("td",{className:`${t.CLASS_PREFIX}__cell ${t.CLASS_PREFIX}__cell--scale`},a.default.createElement(t.VariableRangeInput,{analyticsId:`${u.ANALYTICS_ID_PREFIX}.variableRange.scale`,ariaLabel:s.translate(`${t.INPUT_KEY_PREFIX}.ariaLabel.decimalPlaces`,{name:o}),disabled:e,max:d.MAX_SCALE_VALUE,min:0,numberFormatOptions:{maximumFractionDigits:0},onChange:e=>{r({scale:e})},onValidate:b,value:c})))},t.BaseVariableRangeTableRow.propTypes={disabled:n.default.bool.isRequired,localize:n.default.object,maxValue:n.default.number,minValue:n.default.number,name:n.default.string.isRequired,onChange:n.default.func.isRequired,onValidate:n.default.func.isRequired,scale:n.default.number},t.VariableRangeTableRow=o.localizedComponentWrapper(t.BaseVariableRangeTableRow),t.setRowValid=c,t.getInitialRowValidityMap=p,t.isTableValid=m,t.BaseVariableRangeTable=({disabled:e,localize:s,onValidate:i,onVariableDefinitionChange:n,titleId:o,variableDefinitions:r})=>{const[l,u]=a.useState(p(r));a.useEffect(()=>{i(m(l))},[m(l),i]);return a.default.createElement("table",{"aria-describedby":o,className:`${t.CLASS_PREFIX}`},a.default.createElement("tbody",{className:`${t.CLASS_PREFIX}__body`},a.default.createElement("tr",{className:`${t.CLASS_PREFIX}__row`},a.default.createElement("td",null),a.default.createElement("th",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--column`,scope:"col"},s.translate(`${t.TRANSLATION_KEY_PREFIX}.table.headers.minimum`)),a.default.createElement("th",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--column`,scope:"col"},s.translate(`${t.TRANSLATION_KEY_PREFIX}.table.headers.maximum`)),a.default.createElement("th",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--column`,scope:"col"},s.translate(`${t.TRANSLATION_KEY_PREFIX}.table.headers.decimalPlaces`))),r&&r.map(s=>{if(!s)return null;const{maxValue:i,minValue:o,name:r,scale:d}=s;return a.default.createElement(t.VariableRangeTableRow,{disabled:e,key:r,maxValue:i,minValue:o,name:r,onChange:e=>{n({...s,...e})},onValidate:e=>{u(c(l,r,e))},scale:d})})))},t.BaseVariableRangeTable.propTypes={disabled:n.default.bool.isRequired,localize:n.default.object,onValidate:n.default.func.isRequired,onVariableDefinitionChange:n.default.func.isRequired,titleId:n.default.string.isRequired,variableDefinitions:n.default.arrayOf(n.default.shape({maxValue:n.default.number,minValue:n.default.number,name:n.default.string.isRequired,scale:n.default.number})).isRequired},t.VariableRangeTable=o.localizedComponentWrapper(t.BaseVariableRangeTable),t.BaseVariableRange=({disabled:e,localize:s,onValidate:i,onVariableDefinitionChange:n,variableDefinitions:o})=>{const[r]=a.useState(l.getId("calculated-question-variable-ranges-table-title-")),u=o&&o.length>0;return a.default.createElement("div",{className:`${t.CLASS_PREFIX}__container`},a.default.createElement("h4",{className:`${t.CLASS_PREFIX}__title`,id:r},s.translate(`${t.TRANSLATION_KEY_PREFIX}.title`)),u?a.default.createElement(t.VariableRangeTable,{disabled:e,onValidate:i,onVariableDefinitionChange:n,titleId:r,variableDefinitions:o}):a.default.createElement("span",{className:`${t.CLASS_PREFIX}__no-variables`},s.translate(`${t.TRANSLATION_KEY_PREFIX}.noVariables`)))},t.BaseVariableRange.propTypes={disabled:n.default.bool.isRequired,localize:n.default.object,onValidate:n.default.func.isRequired,onVariableDefinitionChange:n.default.func.isRequired,variableDefinitions:n.default.arrayOf(n.default.shape({maxValue:n.default.number,minValue:n.default.number,name:n.default.string.isRequired,scale:n.default.number}))},t.default=o.localizedComponentWrapper(t.BaseVariableRange)},CvmH:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("KTc4");t.default=i.default},D0DQ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("MC1S");s("KTib");const r=e=>{const{disabled:t,editable:s,inputDescriptionText:i,inputLabelText:n,inputText:r,onInputChange:l}=e;return s?a.default.createElement("div",{className:"fimb-question-answer-input fimb-question-answer-input--edit"},a.default.createElement(o.TextField,{value:r,disabled:t,label:n,onChanged:l,analyticsId:"fimbQuestionAnswerInput.edit.textField"})):a.default.createElement("div",{className:"fimb-question-answer-input fimb-question-answer-input--read"},a.default.createElement("div",{className:"fimb-question-answer-input__label"},n),a.default.createElement("div",{className:"fimb-question-answer-input__input-wrapper"},a.default.createElement("div",{className:"fimb-question-answer-input__answer"},r),a.default.createElement("div",{className:"fimb-question-answer-input__description"},i)))};r.propTypes={disabled:n.default.bool.isRequired,editable:n.default.bool.isRequired,inputDescriptionText:n.default.string.isRequired,inputLabelText:n.default.string.isRequired,inputText:n.default.string.isRequired,onInputChange:n.default.func.isRequired},t.default=r},DeRc:function(e,t,s){"use strict";s.r(t)},DjPm:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("ERkP"),a=s("mzw0"),n=s("gYi3"),o=s("A4Z1");t.MathEditor=({apiBasePath:e,className:t,locale:s,initialMathML:r,isRtl:l,onError:u,onLoad:d})=>{const c=i.useRef(null),{initError:p,isReady:m,wirisEditorInstance:f}=a.useWirisEditor(c,e,r,s),h=n.useStyles();return i.useEffect(()=>{f&&m&&d(f)},[f]),i.useEffect(()=>{p&&u(p)},[p]),i.createElement(o.AnalyticsJssThemeProvider,{theme:"light",isRtl:l},i.createElement("div",{className:`${h.mathEditor} math-editor ${t||""}`,ref:c}))},t.MathEditor.displayName="MathEditor"},E8Oa:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("JfV0"),r=s("Vng8"),l=i.__importDefault(s("NzPg")),u=i.__importDefault(s("ZfLe")),d=i.__importStar(s("jPx/"));class c extends a.Component{constructor(){super(...arguments),this.validate=(e,t)=>{const s=t.answers.some(e=>""===e.answerText.rawText),i=t.prompts.some(e=>""===e.promptText.rawText);return!(s||i)&&r.hasMatchingQuestionChanged(e,t)},this.onQuestionChange=(e,t)=>{const s={...e,prompts:this.updatePromptsPartialCreditPercentage(e)};this.props.onQuestionChange(s,this.validate,t)},this.onAnswerChange=e=>{const{question:t}=this.props,s=t.answers.map(t=>t.ui.id===e.ui.id?e:t),i={...t,answers:s};this.onQuestionChange(i)},this.onPromptChange=e=>{const{question:t}=this.props,s=t.prompts.map(t=>t.id===e.id?e:t),i={...t,prompts:s};this.onQuestionChange(i)},this.onPromptAnswerPairAddition=()=>{const{question:e,setActiveEditorId:t}=this.props,s=o.Questions.createMatchingAnswer(),i=o.Questions.createMatchingPrompt(e.answers.length),a={...e,prompts:[...e.prompts,i],answers:[...e.answers,s]};this.onQuestionChange(a,()=>t(`prompt-${i.id}`))},this.onDistractorAddition=()=>{const{question:e,setActiveEditorId:t}=this.props,s=o.Questions.createMatchingAnswer(!0),i={...e,answers:[...e.answers,s]};this.onQuestionChange(i,()=>t(`distractor-${s.ui.id}`))},this.onPromptAnswerPairDeletion=e=>{const{question:t}=this.props;this.onQuestionChange(d.removePairFromQuestion(t,e))},this.onDistractorDeletion=e=>{const{question:t}=this.props,s=t.answers.findIndex(t=>t.ui.id===e),i=d.removeAnswerFromQuestion(t,s);this.onQuestionChange(i)},this.onPromptAnswerReuse=(e,t)=>{const{question:s}=this.props,i=s.prompts.findIndex(t=>t.id===e),a=s.prompts[i],n=s.prompts[i].matchingAnswerIndex,o=s.prompts[t].matchingAnswerIndex,r=[...s.prompts.slice(0,i),{...a,matchingAnswerIndex:o,reusesAnswer:!0},...s.prompts.slice(i+1)];let l={...s,prompts:r,answers:s.answers};a.reusesAnswer||(l=d.removeAnswerFromQuestion(l,n)),this.onQuestionChange(l)},this.onPromptRemoveReusedAnswer=e=>{const{question:t,setActiveEditorId:s}=this.props,i=t.prompts.findIndex(t=>t.id===e),a=o.Questions.createMatchingAnswer(!1),n=[...t.answers,a],r=n.length-1,l=[...t.prompts.slice(0,i),{...t.prompts[i],matchingAnswerIndex:r,reusesAnswer:!1},...t.prompts.slice(i+1)],u={...t,prompts:l,answers:n};this.onQuestionChange(u,()=>s(d.getAnswerEditorId(e)))},this.canDeletePromptAnswerPair=e=>{const{question:t}=this.props;return t.prompts.length>o.MATCHING_MINIMUM_REQUIRED_AMOUNT_OF_PROMPTS&&(t.answers.length>o.MATCHING_MINIMUM_REQUIRED_AMOUNT_OF_ANSWERS||e)},this.canDeleteDistractor=()=>{const{question:e}=this.props;return e.answers.length>o.MATCHING_MINIMUM_REQUIRED_AMOUNT_OF_ANSWERS},this.onScoringOptionsChange=e=>{const{question:t}=this.props,s={...t,...e};this.onQuestionChange(s)},this.updatePromptsPartialCreditPercentage=e=>{const t=e=>{return Math.round(1e5*e)/1e5},s=e.prompts,i=(e=>{return Math.trunc(1e5*e)/1e5})(100/s.length),a=-1*i,n=t(100-i*s.length);return s.map((e,o)=>{return o===s.length-1?{...e,partialCredit:t(i+n),negativeCredit:t(a-n)}:{...e,partialCredit:i,negativeCredit:a}})}}render(){return a.default.createElement(l.default,Object.assign({},this.props,{canDeleteDistractor:this.canDeleteDistractor,canDeletePromptAnswerPair:this.canDeletePromptAnswerPair,onAnswerChange:this.onAnswerChange,onDistractorAddition:this.onDistractorAddition,onDistractorDeletion:this.onDistractorDeletion,onPromptAnswerPairAddition:this.onPromptAnswerPairAddition,onPromptAnswerPairDeletion:this.onPromptAnswerPairDeletion,onPromptAnswerReuse:this.onPromptAnswerReuse,onPromptRemoveReusedAnswer:this.onPromptRemoveReusedAnswer,onPromptChange:this.onPromptChange,onQuestionChange:this.onQuestionChange,onScoringOptionsChange:this.onScoringOptionsChange}))}}t.MatchingContainer=c,c.propTypes={question:n.default.object.isRequired,onQuestionChange:n.default.func.isRequired,setActiveEditorId:n.default.func.isRequired},t.default=u.default(c)},E8lv:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("MmQQ");t.LocalizedPeerNotEnoughSubmissionsBanner=i.LocalizedPeerNotEnoughSubmissionsBanner,t.LocalizedPeerReviewPeriodOpenBanner=i.LocalizedPeerReviewPeriodOpenBanner,t.LocalizedPeerReviewHasBeenDeletedBanner=i.LocalizedPeerReviewHasBeenDeletedBanner;var a=s("Sa8I");t.TimeLimitOverriddenByDueDateBanner=a.TimeLimitOverriddenByDueDateBanner},EC4L:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=i.__importStar(s("nsO7")),r=s("nBlB"),l=s("JfV0"),u=i.__importDefault(s("RtIR")),d=s("y3re"),c=i.__importDefault(s("MDkG")),p=i.__importDefault(s("YqWx"));s("Syma");class m extends a.Component{constructor(){super(...arguments),this.questionPreviews={},this.getPreview=(e,t)=>{const s=e.id,i=this.questionPreviews[s];return null==i||i.question===e&&i.questionTitle===t||(this.questionPreviews[s]=null),null==this.questionPreviews[s]&&(this.questionPreviews[s]={question:e,questionTitle:t,preview:a.default.createElement(p.default,{question:e,questionTitle:t})}),this.questionPreviews[s].preview},this.hasQuestionCreatePermissions=e=>!0===o.get(e,"permissions.create"),this.getDraggingLabelObject=(e,t,s)=>{const i=this.props.keyInsertIndex-1;return this.props.isKeyboardMoving?e===i?{string:"assessments.canvas.drop.buttonStart",relation:""}:0===this.props.keyInsertIndex?{string:"assessments.canvas.drop.buttonTop",relation:""}:u.default("drop",this.props.items[i],s[i]):u.default("drag",t,s[e])},this.getQuestionTitleArray=()=>{const{items:e,localize:t}=this.props;let s=0;return e.map(e=>{if(!l.Questions.isPresentationOnly(e)){let i="assessments.canvas.question.header.",a={};if(l.Questions.isQuestionBlock(e)&&e.numOfQuestionsToChoose>1){const t=s+1,n=s+e.numOfQuestionsToChoose;i+="titleBlock",a={blockStart:t,blockEnd:n},s=n}else l.Questions.isQuestionBlock(e)&&0===e.numOfQuestionsToChoose?i+="titleBlockEmpty":(i+="title",a={position:s+=1});return t.translate(i,a)}return null})}}render(){const{items:e,localize:t,AddButton:s,hasSubmissions:i,hasAssessmentModifyPermissions:n,isLoadingInProgress:o,notification:r}=this.props,l=new d.FeatureAnnouncementsHelper(e).getQuestionFeatureAnnouncements(),p=this.getQuestionTitleArray();return a.default.createElement("div",null,o||i||!n?a.default.createElement("div",{className:"assessment-canvas-react__question-spacer"}):a.default.createElement(s,{buttonAriaLabel:t.translate("assessments.canvas.add.buttonTop"),index:0,analyticsId:"assessments.canvas.add"}),r&&"start"===r.positionAfter&&a.default.createElement(r.Component,null),e.map(({alignedGoals:e,...n},o)=>{const d=o+1,m=this.getDraggingLabelObject(o,n,p),f=u.default("add",n,p[o]);return a.default.createElement("div",{key:n.id},a.default.createElement(c.default,Object.assign({alignedGoals:e,question:n,questionTitle:p[o],dragButtonAriaLabel:t.translate(m.string,{relatedContent:m.relation}),index:o,preview:this.getPreview(n,p[o]),showFeatureAnnouncement:l[n.id]},this.props)),!i&&this.hasQuestionCreatePermissions(n)?a.default.createElement(s,{index:d,buttonAriaLabel:t.translate(f.string,{relatedContent:f.relation}),analyticsId:"assessments.canvas.addQuestion"}):a.default.createElement("div",{className:"assessment-canvas-react__question-spacer"}),r&&n.id===r.positionAfter&&a.default.createElement(r.Component,null))}))}}m.propTypes={items:n.default.array.isRequired,AddButton:n.default.func.isRequired,localize:n.default.object.isRequired,hasSubmissions:n.default.bool.isRequired,hasAssessmentModifyPermissions:n.default.bool.isRequired,isLoadingInProgress:n.default.bool,pluginsConfig:n.default.object.isRequired,keyInsertIndex:n.default.number.isRequired,isKeyboardMoving:n.default.bool.isRequired,notification:n.default.object,babelfishInstance:n.default.object.isRequired,currentLocale:n.default.string.isRequired,addQuestionsToEmptyPool:n.default.func.isRequired,localizationPrefix:n.default.string.isRequired},t.UnwrappedQuestionList=m,t.default=r.DragNDropContainer(m)},EH0T:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importStar(s("ERkP")),a=s("ALQB"),n=s("8unJ"),o=s("anH7");t.LocalizedAssessmentProgressBar=n.localizedComponentWrapper(({descriptionId:e,totalQuestionCount:t,unansweredQuestionCount:s,localize:n})=>{const{progressBarClass:r}=o.useStyles(),l=n.translate("assessmentProgress.progressBar.ariaLabel"),u=0===t?0:(t-s)/t*100;return i.createElement(a.AnalyticsLinearProgress,{"aria-hidden":!0,ariaLabel:l,"aria-describedby":e,variant:"determinate",value:u,classes:{root:r}})})},FwPp:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("MC1S"),r=s("JfV0"),l=s("kBJj"),u=s("nsO7"),d=s("Vng8"),c=s("3ZJq"),p=i.__importDefault(s("PCGI")),m=i.__importDefault(s("gTAB")),f=s("WGaE"),h=i.__importStar(s("TIvv")),g=i.__importDefault(s("ZfLe")),b=i.__importStar(s("AiU9")),_=i.__importDefault(s("CvmH")),y=i.__importStar(s("OPED")),E=i.__importStar(s("p1hm")),C=s("/R3Y");s("gZ3u");const w=i.__importDefault(s("7LMM")),S=s("1Xy2");class P extends a.Component{constructor(e){super(e),this.getTranslatedIdentifier=e=>this.state.translatedIdentifiersMap[e]||e,this.textContainsClosedBracketsWithTextInside=e=>{const t=e.match(/\[(.*)\]/i);return null!==t&&""!==t[1]},this.validate=(e,t,s,i,a,n)=>{const o=e.points!==t.points,r=d.hasFullCreditFlagChanged(e,t),l=i.rawText;return!(r||o||d.isNewQuestion(t)||!l||l!==a.rawText||!d.hasAutomatedFeedbackChanged(e,t))||!1!==n&&(!u.isEqual(e,t)||(this.props.hasSubmissions?o?d.havePointsChangedToPositive(s.points,t.points):r:d.havePointsChangedToPositive(s.points,t.points)))},this.onQuestionChange=e=>{const{originalDisplayQuestionText:t,isAnswersEditMode:s}=this.state,i=this.props.question.questionText;this.props.onQuestionChange({...e,questionText:i},(i,a,n)=>this.validate(i,a,n,t,e.questionText,s)),this.setState({isValidTemplate:this.textContainsClosedBracketsWithTextInside(e.questionText.rawText),displayQuestionText:e.questionText})},this.onTranslate=(e,t,s,i,a)=>{this.setState(s=>({isAnswersEditMode:a,disableAnswersTextFields:!a,displayQuestionText:{rawText:e},translatedIdentifiersMap:{...s.translatedIdentifiersMap,...t}}),()=>this.refreshBbml())},this.translateIdent=e=>{const t=e.split("-")[1];return this.props.babelfishInstance.translate(this.props.currentLocale,"assessments.canvas.question.fimb.blank",{count:t})},this.onScoringOptionsChange=e=>{const{question:t}=this.props,s={...t,...e};this.onQuestionChange(s)},this.translateQuestion=(e,t,s,i)=>{let a=e;const n={...s},o=[];return t.forEach(e=>{if(n[e.ident]){const t=n[e.ident];a=a.replace(e.ident,t)}else o.push(this.translateIdent(e.ident).then(t=>{a=a.replace(e.ident,t),n[e.ident]=t}))}),Promise.all(o).then(()=>{this.onTranslate(a,n,e,t,i)})},this.parseQuestionText=()=>{const e={courseId:this.props.courseId,assessmentId:this.props.question.assessmentId};return r.parseFIMBQuestionText(this.state.displayQuestionText,e)},this.refreshBbml=()=>{this.setState({refreshBbml:!0},()=>this.setState({refreshBbml:!1}))},this.removeIdentifierWrappersInQuestionText=e=>{const t=document.createElement("div");t.innerHTML=e;const s=t.querySelectorAll("a[data-bbfile]");if(null!=s&&s.length>0)for(let e=0;e<s.length;e+=1){const t=s[e];-1!==t.getAttribute("data-bbfile").indexOf("fimb-answer-value")&&(t.outerHTML=t.innerHTML)}return t.innerHTML},this.replaceQuestionTextWithAnswers=(e,t)=>{let s=this.removeIdentifierWrappersInQuestionText(e);return t.forEach(e=>{const t=e.answerValues.map(e=>e.value).join(E.ANSWER_DELIMITER),i=this.getTranslatedIdentifier(e.ident);s=s.replace(i,t)}),s},this.toggleAnswersEditMode=()=>{this.state.isAnswersEditMode?this.setAnswersEditModeOff():this.setAnswersEditModeOn()},this.setAnswersEditModeOff=()=>{this.setState((e,t)=>({isAnswersEditMode:!1,disableAnswersTextFields:!0,displayQuestionText:{rawText:this.replaceQuestionTextWithAnswers(e.displayQuestionText.rawText,t.question.answers)}}),this.refreshBbml),this.props.onQuestionChange(this.props.question,()=>!1)},this.setAnswersEditModeOn=()=>{const{question:e,hasSubmissions:t}=this.props;return this.parseQuestionText().then(s=>{const i=s.answers.length!==e.answers.length;if(t&&i)return void this.setState({regradingError:!0},()=>{this.QuestionRef.current.scrollIntoView({behavior:"smooth",block:"start"})});!0===this.state.regradingError&&this.setState({regradingError:!1});const a={...e,answers:s.answers,questionText:{...e.questionText,rawText:s.replacedQuestionText}};d.hasFIMBQuestionChanged(e,a)||(a.answers=e.answers);delete a.questionText.webLocation,this.props.onQuestionChange(a,e=>!u.isEqual(e,a),()=>{this.translateQuestion(s.replacedQuestionText,s.answers,this.state.translatedIdentifiersMap,!0)})})},this.startEditMode=(e=null)=>{this.props.startEditMode(()=>{this.setState((e,t)=>{const s={rawText:this.replaceQuestionTextWithAnswers(e.displayQuestionText.rawText,t.question.answers)},i={originalDisplayQuestionText:s,displayQuestionText:s};return e.isAnswersEditMode&&(i.isAnswersEditMode=!1,i.disableAnswersTextFields=!0),i},()=>{this.refreshBbml(),e&&e()})})},this.onAnswerChange=e=>{const{question:t,onQuestionChange:s}=this.props,i=t.answers.map(t=>t.ident===e.ident?e:t),a={...t,answers:i},n=a.answers.some(e=>{return!e.answerValues.some(e=>e.value)});s(a,()=>!n)},this.dismissRegradingError=()=>{this.setState({regradingError:!1})},this.state={isValidTemplate:this.textContainsClosedBracketsWithTextInside(e.question.questionText.rawText),isAnswersEditMode:!1,disableAnswersTextFields:!0,refreshBbml:!1,translatedIdentifiersMap:{},displayQuestionText:{rawText:""},originalDisplayQuestionText:{rawText:""},regradingError:!1},this.QuestionRef=a.default.createRef();const t=this.props.question;if(t&&t.questionText&&t.answers&&t.answers.length>0){const e=this.translateQuestion(t.questionText.rawText,t.answers,{},!1);m.default.isActive(this.props.editMode)&&e.then(()=>{this.setState(e=>({displayQuestionText:{rawText:this.replaceQuestionTextWithAnswers(e.displayQuestionText.rawText,t.answers)}}),()=>{this.refreshBbml()})})}}static getDerivedStateFromProps(e,t){if(e.refreshBbml){let s=e.question.questionText.rawText;return e.question.answers.forEach(e=>{const i=t.translatedIdentifiersMap[e.ident];s=s.replace(e.ident,i)}),{...t,displayQuestionText:{rawText:s},regradingError:!1}}return null}render(){const{isValidTemplate:e,isAnswersEditMode:t,disableAnswersTextFields:s,regradingError:i}=this.state,n=m.default.isActive(this.props.editMode),r={...this.props.question,questionText:this.state.displayQuestionText},u=this.props.localize.translate("assessments.canvas.question.fimb.regradingErrorMessage"),g=n&&d.hasLinkedQuestion(this.props.question),P=n&&!t,A=[{key:S.noPartialCredit},{key:S.partialCreditNoPenalty}],R=a.default.createElement(w.default,{question:this.props.question,onScoringOptionsChange:this.onScoringOptionsChange,editMode:this.props.editMode,localize:this.props.localize,isAnswersEditMode:t,options:A,translationKeyPrefix:"assessments.canvas.question.multipleAnswer.scoringOptions"});return a.default.createElement("div",{className:`fimb-question ${n?"fimb-question--edit":"fimb-question--read"}`,ref:this.QuestionRef},i&&a.default.createElement(o.Notification,{type:o.NotificationType.Failure,message:u,onClose:this.dismissRegradingError}),a.default.createElement(p.default,{editMode:this.props.editMode,question:r},a.default.createElement(f.LinkedQuestionNotification,{show:g,usageCount:this.props.question.usageCount}),a.default.createElement(h.default,Object.assign({},h.getPluggableQuestionHeaderProps(this.props,this.onQuestionChange),{question:r,onPointsClick:this.startEditMode})),a.default.createElement(b.default,Object.assign({},b.getQuestionControlProps(this.props),{startEditMode:this.startEditMode})),a.default.createElement(_.default,{instructions:this.props.localize.translate("assessments.canvas.question.fimb.instructions"),show:P}),a.default.createElement(y.default,Object.assign({},y.getQuestionTextProps(this.props,this.onQuestionChange),{disableEditor:t,editorPlugins:[l.customClass()],question:r,refreshBbml:this.state.refreshBbml||this.props.refreshBbml}))),this.props.question.answers&&this.props.question.answers.length>0&&a.default.createElement("div",{className:C.removeExtraWhitespace(`fimb-question__answers-container\n                          fimb-question__answers-container--${n?"edit":"read"}`)},this.props.question.answers.map(e=>a.default.createElement(E.default,{answer:e,assessmentId:this.props.question.assessmentId,courseId:this.props.courseId,disabled:s,inputLabel:this.getTranslatedIdentifier(e.ident),key:e.ident,onAnswerChange:this.onAnswerChange,readOnly:!n}))),n&&a.default.createElement("div",{className:`fimb-question__mode-changer ${t?"-off":"-on"}`},a.default.createElement(o.Link,{onClick:this.toggleAnswersEditMode,disabled:!t&&!e},t?this.props.localize.translate("assessments.canvas.question.fimb.previousStep"):this.props.localize.translate("assessments.canvas.question.fimb.nextStep"))),this.props.question.answers&&this.props.question.answers.length>1?R:"",a.default.createElement(c.AutomatedQuestionFeedback,{editMode:this.props.editMode,onQuestionChange:this.onQuestionChange,question:r,setActiveEditorId:this.props.setActiveEditorId,activeEditorId:this.props.activeEditorId,pluginsConfig:this.props.pluginsConfig}))}}t.Fimb=P,P.propTypes={activeEditorId:n.default.string,canEnterEditMode:n.default.bool.isRequired,courseId:n.default.string.isRequired,deleteQuestion:n.default.func.isRequired,editMode:n.default.number.isRequired,hasSubmissions:n.default.bool.isRequired,onQuestionChange:n.default.func.isRequired,question:n.default.object.isRequired,questionTitle:n.default.string.isRequired,refreshBbml:n.default.bool.isRequired,showQuestionControls:n.default.bool.isRequired,startEditMode:n.default.func.isRequired,localize:n.default.object.isRequired,pluginsConfig:n.default.object.isRequired,babelfishInstance:n.default.object.isRequired,currentLocale:n.default.string.isRequired,setActiveEditorId:n.default.func.isRequired,showFeatureAnnouncement:n.default.object};const A=g.default(P);t.default=A},G5c7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("gTAB")),o=s("Vng8"),r=s("/R3Y");s("JKrv"),t.BaseQuestionComponent=({editMode:e,question:t,children:s})=>{const i=n.default.isActive(e);return a.default.createElement("div",{className:r.removeExtraWhitespace(`\n                    base-question\n                    ${i?"base-question--edit":"base-question--read"}\n                    ${o.isNewQuestion(t)?"js-new-question":""}\n                `)},a.default.createElement("div",{className:"base-question__content"},s))},t.default=t.BaseQuestionComponent},"GD/5":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("eecw");t.default=i.default},GOY5:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=s("zGdY"),n=s("5Y6Q"),o=s("MC1S");var r;!function(e){e[e.Answered=0]="Answered",e[e.Unanswered=1]="Unanswered"}(r=t.QuestionStatusFilter||(t.QuestionStatusFilter={}));class l{constructor(){this.questionAttempts=[],this.questionAttemptPages=[],this.questionAttemptLookup={},this.filter={},this.currentPageIndex=0,this.firstQuestionOnCurrentPageIndex=0,this.firstPageIndex=null,this.previousPageIndex=null,this.nextPageIndex=null,this.lastPageIndex=null,this.isVisibleAnswerDirty=!1,this.currentVisibleQuestionAttemptsPage=[],this.canNavigateBackward=!1,this.canNavigateForward=!1,this.totalQuestionCount=0,this.unansweredQuestionCount=0,this.questionsMatchingFilterCount=0}isAnswerable(e){return e.questionType!==a.QuestionType.PresentationOnly}augmentCurrentQuestionAttempt(e,t,s){this.questionAttemptLookup[e.id]=e,e.onAnswerChanging=this.onAnswerChanging,e.onAnswerPersisted=this.onAnswerPersisted,e.questionIndex=t,e.pageIndex=s,e.isVisibleGivenFilter=!0}calculateUnansweredQuestionCount(){this.unansweredQuestionCount=this.questionAttempts.filter(n.isUnansweredQuestion).length}setCurrentVisibleQuestionAttemptsPage(){this.currentVisibleQuestionAttemptsPage=[];const e=this.questionAttemptPages[this.currentPageIndex];e&&(this.currentVisibleQuestionAttemptsPage=e.filter(e=>e.isVisibleGivenFilter))}onFilterChanged(e){this.firstPageIndex=null,this.previousPageIndex=null,this.nextPageIndex=null,this.lastPageIndex=null,this.questionsMatchingFilterCount=0,this.calculateNavigationState(),this.processQuestionAttemptsBackwards(e),this.processQuestionAttemptsForwards(e),this.setCurrentVisibleQuestionAttemptsPage(),this.calculateNavigationState()}processQuestionAttemptsBackwards(e){if(this.currentPageIndex>0)for(let t=this.firstQuestionOnCurrentPageIndex-1;t>=0;t--){const s=this.isQuestionAttemptVisible(t,e);s&&null==this.previousPageIndex&&(this.previousPageIndex=this.questionAttempts[t].pageIndex),s&&(this.firstPageIndex=this.questionAttempts[t].pageIndex)}}processQuestionAttemptsForwards(e){for(let t=this.firstQuestionOnCurrentPageIndex;t<this.questionAttempts.length;t++){const s=this.isQuestionAttemptVisible(t,e),i=this.questionAttempts[t].pageIndex;s&&i>this.currentPageIndex&&null==this.nextPageIndex&&(this.nextPageIndex=this.questionAttempts[t].pageIndex),s&&i>this.currentPageIndex&&(this.lastPageIndex=this.questionAttempts[t].pageIndex)}}isQuestionAttemptVisible(e,t){if(t){const s=this.evaluateQuestionAgainstFilter(this.questionAttempts[e],t);return this.questionsMatchingFilterCount+=s&&this.isAnswerable(this.questionAttempts[e])?1:0,s}return this.questionAttempts[e].isVisibleGivenFilter}evaluateQuestionAgainstFilter(e,t){let s=!0;return"status"in t&&(s=e.questionType===a.QuestionType.PresentationOnly||t.status===r.Answered&&e.attemptStatus!==a.AttemptStatus.NotAttempted||t.status===r.Unanswered&&e.attemptStatus===a.AttemptStatus.NotAttempted),s&&t.types&&(s=t.types.some(t=>t===e.questionType)),e.isVisibleGivenFilter=s,s}onAnswerChanging(){this.isVisibleAnswerDirty=!0,this.calculateNavigationState()}onAnswerPersisted(e){const t=this.questionAttemptLookup[e.id];t&&(t.attemptStatus=e.attemptStatus,this.calculateUnansweredQuestionCount(),"givenAnswer"in e&&(t.givenAnswer=e.givenAnswer),"givenAnswers"in e&&(t.givenAnswers=e.givenAnswers)),this.isVisibleAnswerDirty=!1,this.onFilterChanged(this.filter)}calculateNewPageIndexesAfterNavigating(){this.firstPageIndex=null,this.previousPageIndex=null,this.nextPageIndex=null,this.lastPageIndex=null,this.calculateNavigationState(),this.processQuestionAttemptsBackwards(),this.processQuestionAttemptsForwards(),this.calculateNavigationState()}}i.__decorate([o.autobind,i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[]),i.__metadata("design:returntype",void 0)],l.prototype,"onAnswerChanging",null),i.__decorate([o.autobind,i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[Object]),i.__metadata("design:returntype",void 0)],l.prototype,"onAnswerPersisted",null),t.BaseQuestionAttemptView=l},GaPR:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importStar(s("ERkP")),a=s("zTL+"),n=s("IVC4"),o=s("sEjo"),r=s("8unJ"),l=s("U9G1");t.LocalizedPeerReviewHasBeenDeletedBanner=r.localizedComponentWrapper(({assignAndNavigateToPeerReview:e,dismissBanner:t,hasEnoughSubmissionsForPeerAssessment:s,canRetrieveNewPeerReview:r,localize:u})=>{const d=u.translate("banners.peerAssessments.peerReviewHasBeenDeleted.startNewReviewButton"),c=u.translate("banners.peerAssessments.peerReviewHasBeenDeleted.dismissButton"),p=u.translate("banners.peerAssessments.peerReviewHasBeenDeleted.notice"),m=u.translate("banners.peerAssessments.peerReviewHasBeenDeleted.notEnoughSubmissionsNotice"),f=s?p:m,{bannerClass:h,iconWrapperClass:g,iconClass:b,actionClass:_,buttonClass:y}=l.useStyles(),E=[i.createElement(o.AnalyticsOutlineButton,{analyticsId:"course.assessments.assessment-overview.peerReview.peerReviewDeletedBanner.dismissButton",key:"dismiss",onClick:t,className:y},c)];return r&&E.push(i.createElement(o.AnalyticsOutlineButton,{analyticsId:"course.assessments.assessment-overview.peerReview.peerReviewDeletedBanner.startNewReviewButton",key:"startNewReviewButton",onClick:e,className:y},d)),i.createElement(a.AnalyticsBanner,{severity:"warning",actions:E,icon:i.createElement(n.Attention,{className:b}),classes:{root:h,icon:g,action:_}},i.createElement("span",{className:"js-banner-contents"},f))})},Ggyl:function(e,t,s){"use strict";s.r(t)},H9Ny:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("Agfx");t.useStyles=i.makeStyles(e=>({containerClass:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:e.spacing(5)}}))},HAQq:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=i.__importDefault(s("2yjE")),r=i.__importDefault(s("MozA"));s("Udwz"),t.QuestionPoolQuestionHeaderReadMode=e=>{const{localize:t,questionSourceName:s,deleteQuestion:i,startEditMode:n,hasSubmissions:l,hasAssessmentModifyPermissions:u,overflowMenuButtonLabelData:d}=e;return a.default.createElement("div",{className:"question-pool-question-header question-pool-question-header--read"},a.default.createElement("div",{className:"question-pool-question-header__title-row"},a.default.createElement(o.default,Object.assign({},e,{showPointsInfo:!1})),a.default.createElement("div",{className:"question-pool-question-header__menu-icon"},a.default.createElement(r.default,{deleteQuestion:i,startEditMode:n,hasSubmissions:l,hasAssessmentModifyPermissions:u,overflowMenuButtonLabelData:d}))),a.default.createElement("div",{className:"question-pool-question-header__question-source"},t.translate("questionPools.questionHeader.questionSource",{questionSourceName:s})))},t.QuestionPoolQuestionHeaderReadMode.propTypes={localize:n.default.object.isRequired,questionSourceName:n.default.string.isRequired,startEditMode:n.default.func.isRequired,hasSubmissions:n.default.bool.isRequired,hasAssessmentModifyPermissions:n.default.bool.isRequired,deleteQuestion:n.default.func.isRequired,overflowMenuButtonLabelData:n.default.object.isRequired},t.default=t.QuestionPoolQuestionHeaderReadMode},HW8w:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("Agfx");t.useStyles=i.makeStyles(e=>({containerClass:{display:"flex",alignItems:"center",color:"green"},firstButtonClass:{borderRight:`1px solid ${e.palette.secondary.light}`}}))},HZ1V:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("Agfx"),a=s("xkx/");t.useStyles=i.makeStyles(e=>i.createStyles({base:{marginTop:"16px","& label$toggleLabel":{cursor:"pointer"}},toggleLabel:{marginLeft:"-8px",marginRight:0},toggleSwitch:{},correct:{margin:"10px 0",[e.breakpoints.up("sm")]:{margin:"21px 0 10px"}},incorrect:{margin:"16px 0 10px"},sectionHeader:{marginBottom:"10px"},sectionTitle:{},sectionInstructions:{color:a.BbSemanticPalette.textMedium},header:{display:"flex",flexDirection:"column",[e.breakpoints.up("sm")]:{flexDirection:"row"}},displaySettings:{display:"flex",alignItems:"center",flexDirection:"row-reverse",marginLeft:"-8px",marginRight:"auto",[e.breakpoints.up("sm")]:{flexDirection:"row",marginLeft:"auto",marginRight:"-8px"}},displaySettingsButton:{}}))},IDN4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("GOY5");class a extends i.BaseQuestionAttemptView{initializeQuestionAttempts(e){this.questionAttempts=e,this.totalQuestionCount=this.questionAttempts.length;let t=0;for(let e=0;e<this.questionAttempts.length;e++)this.augmentCurrentQuestionAttempt(this.questionAttempts[e],e,0),t+=this.isAnswerable(this.questionAttempts[e])?1:0;this.questionAttemptPages=[e],this.totalQuestionCount=t,this.questionsMatchingFilterCount=t,this.calculateUnansweredQuestionCount(),this.setCurrentVisibleQuestionAttemptsPage(),this.calculateNavigationState()}calculateNavigationState(){this.canNavigateBackward=!1,this.canNavigateForward=!1}navigateFirst(){throw new Error("Navigation is not supported when all questions at once.")}navigatePrevious(){throw new Error("Navigation is not supported when all questions at once.")}navigateNext(){throw new Error("Navigation is not supported when all questions at once.")}navigateLast(){throw new Error("Navigation is not supported when all questions at once.")}isLastPage(){return!0}}t.AllAtOnceQuestionAttemptView=a},IHpG:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("GOY5");class a extends i.BaseQuestionAttemptView{initializeQuestionAttempts(e){this.questionAttempts=e,this.totalQuestionCount=this.questionAttempts.length;let t=0;for(let e=0;e<this.questionAttempts.length;e++)this.augmentCurrentQuestionAttempt(this.questionAttempts[e],e,this.questionAttemptPages.length),t+=this.isAnswerable(this.questionAttempts[e])?1:0,this.questionAttemptPages.push([this.questionAttempts[e]]);const s=this.totalQuestionCount>1;this.nextPageIndex=s?1:null,this.lastPageIndex=s?this.questionAttempts.length-1:null,this.totalQuestionCount=t,this.questionsMatchingFilterCount=t,this.calculateUnansweredQuestionCount(),this.setCurrentVisibleQuestionAttemptsPage(),this.calculateNavigationState()}calculateNavigationState(){if(1!==this.questionAttemptPages.length){if(this.isVisibleAnswerDirty)return this.canNavigateBackward=!1,void(this.canNavigateForward=!1);this.canNavigateBackward=null!=this.firstPageIndex||null!=this.previousPageIndex,this.canNavigateForward=null!=this.nextPageIndex||null!=this.lastPageIndex}}navigateFirst(){this.canNavigateBackward&&null!=this.firstPageIndex&&(this.currentPageIndex=this.firstPageIndex,this.firstQuestionOnCurrentPageIndex=this.questionAttemptPages[this.currentPageIndex][0].questionIndex,this.setCurrentVisibleQuestionAttemptsPage(),this.calculateNewPageIndexesAfterNavigating())}navigatePrevious(){this.canNavigateBackward&&null!=this.previousPageIndex&&(this.currentPageIndex=this.previousPageIndex,this.firstQuestionOnCurrentPageIndex=this.questionAttemptPages[this.currentPageIndex][0].questionIndex,this.setCurrentVisibleQuestionAttemptsPage(),this.calculateNewPageIndexesAfterNavigating())}navigateNext(){this.canNavigateForward&&null!=this.nextPageIndex&&(this.currentPageIndex=this.nextPageIndex,this.firstQuestionOnCurrentPageIndex=this.questionAttemptPages[this.currentPageIndex][0].questionIndex,this.setCurrentVisibleQuestionAttemptsPage(),this.calculateNewPageIndexesAfterNavigating())}navigateLast(){this.canNavigateForward&&null!=this.lastPageIndex&&(this.currentPageIndex=this.lastPageIndex,this.firstQuestionOnCurrentPageIndex=this.questionAttemptPages[this.currentPageIndex][0].questionIndex,this.setCurrentVisibleQuestionAttemptsPage(),this.calculateNewPageIndexesAfterNavigating())}isLastPage(){return this.currentPageIndex===this.questionAttemptPages.length-1}}t.OneAtATimeQuestionAttemptView=a},IUzX:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=i.__importDefault(s("cFZT"));s("la2Y");const l=i.__importDefault(s("VE9O")),u=({localize:e,headerKey:t,messageKey:s})=>a.default.createElement("div",{className:"question-reuse-sources-empty-state"},a.default.createElement(r.default,{image:l.default,passedClass:"question-reuse-sources-empty-state__image"}),a.default.createElement("h3",{className:"question-reuse-sources-empty-state__title"},e.translate(t)),a.default.createElement("div",{className:"question-reuse-sources-empty-state__message"},e.translate(s)));u.propTypes={localize:n.default.object.isRequired,headerKey:n.default.string.isRequired,messageKey:n.default.string.isRequired},t.default=o.localizedComponentWrapper(u)},J495:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("zGdY"),r=s("AuQm"),l=s("j92x"),u=s("6GoY"),d=s("FgpP"),c=s("t6ux"),p=i.__importDefault(s("CCvt")),m=i.__importDefault(s("OjB1")),f=s("/R3Y"),h=s("9tRF");s("ytrv");const g=i.__importDefault(s("W2w9")),b=s("wMBS");function _(e){return e.hasFullGreaterThanPartialError||e.hasPartialCreditPointsRangeError||e.hasAnswerToleranceNaNError||e.hasPartialCreditToleranceNaNError||e.hasRoundingValueError||e.hasUnitPointsPercentRangeError||e.hasUnitsGreaterThanPartialError||e.hasUnitValueEmptyError||e.hasVariableRangeError||e.hasVariableSetCountNaNError||e.hasVariableSetCountLessThanOneError}t.CLASS_PREFIX="calculated-formula-question__step-2",t.DEFAULT_FULL_CREDIT_TOLERANCE_SETTINGS={correctAnswerTolerance:{type:o.CalculatedFormulaToleranceType.Numeric,value:0}},t.DEFAULT_PARTIAL_CREDIT_SETTINGS={partialCreditPointsPercent:0,partialCreditTolerance:{type:o.CalculatedFormulaToleranceType.Numeric,value:0}},t.DEFAULT_UNITS_SETTINGS={unitValue:"",unitPointsPercent:0};class y extends a.Component{constructor(e){super(e),this.onFloatTextFieldChangeFactory=(e,t,s)=>i=>t?this.props.onQuestionChange({[t]:{...s,[e]:i}}):this.props.onQuestionChange({[e]:i}),this.onIntegerTextFieldChangeFactory=e=>t=>{this.props.onQuestionChange({[e]:t})},this.onTextFieldChangeFactory=(e,t,s)=>i=>{this.props.onQuestionChange({[t]:{...s,[e]:i}})},this.onDropdownChangedFactory=(e,t,s)=>i=>{this.props.onQuestionChange({[t]:{...s,[e]:i.key}})},this.onCheckboxChangeFactory=e=>t=>{this.props.onQuestionChange({[e]:t.target.checked})},this.updateCorrectAnswerFormat=(e,t)=>{this.props.onQuestionChange({correctAnswerFormat:t.key})},this.updateCorrectAnswerPrecision=e=>{const t={correctAnswerPrecision:e.key};e.key===o.CalculatedFormulaAnswerPrecisionType.SignificantFigures&&this.props.question.answerScale<h.MIN_SIGNIFICANT_FIGURES_ROUNDING_VALUE&&(t.answerScale=h.MIN_SIGNIFICANT_FIGURES_ROUNDING_VALUE),this.props.onQuestionChange(t)},this.handleVariableRangeError=e=>{this.setState({hasVariableRangeError:!e})},this.updateVariableDefinition=e=>{const{onAnswerSetsRelatedFieldDirty:t,onQuestionChange:s,question:i}=this.props,a=i.variableDefinitions.map(t=>t.name===e.name?{...t,...e}:t);t(!0),s({variableDefinitions:a})},this.getFullCreditRangeError=()=>{const{translateKey:e}=this.props,{hasFullGreaterThanPartialError:t,hasAnswerToleranceNaNError:s}=this.state;return s?e("stepTwo.variableSetCount.error.NaN"):t?e("stepTwo.precisionScoring.fullCreditRangeOverlapError"):""},this.getPartialCreditRangeError=()=>{const{translateKey:e}=this.props,{hasFullGreaterThanPartialError:t,hasPartialCreditToleranceNaNError:s}=this.state;return s?e("stepTwo.variableSetCount.error.NaN"):t?e("stepTwo.precisionScoring.partialCreditRangeOverlapError"):""},this.getPartialCreditPointsRangeError=()=>this.state.hasPartialCreditPointsRangeError?this.props.translateKey("stepTwo.precisionScoring.rangeError"):"",this.getVariableSetCountError=()=>{const{hasVariableSetCountNaNError:e,hasVariableSetCountLessThanOneError:t}=this.state,{translateKey:s}=this.props;return e?s("stepTwo.variableSetCount.error.NaN"):t?s("stepTwo.variableSetCount.error.negative"):""},this.getRoundingValueError=()=>{const{question:e,translateKey:t}=this.props,s=h.getMinimumRoundingValue(e.correctAnswerPrecision);return this.state.hasRoundingValueError?t("stepTwo.rounding.invalidInputError",{min:s,max:h.MAX_ROUNDING_VALUE}):""},this.handleGoToNextStep=()=>{const{question:e}=this.props;_(this.state)||(!function(e){return h.isAnswerScaleValid(e)&&h.isAnswerToleranceValid(e)&&h.isPartialCreditPointsPercentValid(e)&&h.isPartialCreditToleranceValid(e)&&h.isPartialCreditValueGreaterThanAnswerValue(e)&&h.isUnitPointsPercentValid(e)&&h.isUnitValueValid(e)&&h.isVariableDefinitionsValid(e)&&h.isVariableSetCountValid(e)}(e)?this.checkForErrors():this.props.onGoToNextStep())},this.checkForErrors=()=>{this.setState(this.getErrorStateFromQuestion())},this.getErrorStateFromQuestion=()=>({...this.getPrecisionScoringErrorStateFromQuestion(),...this.getRoundingValueErrorStateFromQuestion(),...this.getUnitPointsPercentErrorStateFromQuestion(),...this.getUnitValueErrorStateFromQuestion(),...this.getVariableSetCountErrorStateFromQuestion()}),this.getPrecisionScoringErrorStateFromQuestion=()=>({hasFullGreaterThanPartialError:!h.isPartialCreditValueGreaterThanAnswerValue(this.props.question),hasPartialCreditPointsRangeError:!h.isPartialCreditPointsPercentValid(this.props.question),hasAnswerToleranceNaNError:!h.isAnswerToleranceValid(this.props.question),hasPartialCreditToleranceNaNError:!h.isPartialCreditToleranceValid(this.props.question),hasUnitsGreaterThanPartialError:!h.isPartialCreditPercentGreaterThanUnitsPercent(this.props.question)}),this.checkForPrecisionScoringErrors=()=>{this.setState(this.getPrecisionScoringErrorStateFromQuestion())},this.getRoundingValueErrorStateFromQuestion=()=>({hasRoundingValueError:!h.isAnswerScaleValid(this.props.question)}),this.checkForRoundingValueError=()=>{this.setState(this.getRoundingValueErrorStateFromQuestion())},this.getUnitPointsPercentErrorStateFromQuestion=()=>({hasUnitPointsPercentRangeError:!h.isUnitPointsPercentValid(this.props.question),hasUnitsGreaterThanPartialError:!h.isPartialCreditPercentGreaterThanUnitsPercent(this.props.question)}),this.checkForUnitPointsPercentErrors=()=>{this.setState(this.getUnitPointsPercentErrorStateFromQuestion())},this.getUnitValueErrorStateFromQuestion=()=>({hasUnitValueEmptyError:!h.isUnitValueValid(this.props.question)}),this.checkForUnitValueErrors=()=>{this.setState(this.getUnitValueErrorStateFromQuestion())},this.getVariableSetCountErrorStateFromQuestion=()=>{const{variableSetCount:e}=this.props.question;return{hasVariableSetCountNaNError:null==e,hasVariableSetCountLessThanOneError:null!=e&&e<h.MIN_ANSWER_SETS}},this.checkForVariableSetCountErrors=()=>{this.setState(this.getVariableSetCountErrorStateFromQuestion())},this.getToleranceTypeDropdown=(e,s,i,n)=>{const{translateKey:r}=this.props,l=[{key:o.CalculatedFormulaToleranceType.Numeric,className:`${t.CLASS_PREFIX}__precision-type--numeric`,text:r("stepTwo.precisionScoring.numberOption"),index:0,ariaLabel:r("stepTwo.precisionScoring.numberOption"),selected:e===o.CalculatedFormulaToleranceType.Numeric},{key:o.CalculatedFormulaToleranceType.Percent,className:`${t.CLASS_PREFIX}__precision-type--percent`,text:r("stepTwo.precisionScoring.percentageOption"),index:1,ariaLabel:r("stepTwo.precisionScoring.percentageOption"),selected:e===o.CalculatedFormulaToleranceType.Percent}];return a.default.createElement("div",{className:n},a.default.createElement(d.Dropdown,{analyticsId:`${i}.dropdown`,options:l,onChanged:s,selectedKey:e}))},this.getRoundingValueLabel=e=>{const{translateKey:t}=this.props;return e===o.CalculatedFormulaAnswerPrecisionType.Decimal?t("stepTwo.rounding.valueArialLabel.decimal"):t("stepTwo.rounding.valueArialLabel.significantFigure")},this.toggleAnswerToleranceOptionsVisibility=e=>{this.props.onQuestionChange({...t.DEFAULT_FULL_CREDIT_TOLERANCE_SETTINGS}),this.setState({areAnswerToleranceOptionsVisible:e.target.checked,hasFullGreaterThanPartialError:!1})},this.toggleAllowPartialCredit=e=>{const s=e.target.checked;this.props.onQuestionChange({...t.DEFAULT_PARTIAL_CREDIT_SETTINGS,allowPartialCredit:s}),this.setState({hasPartialCreditPointsRangeError:!1,hasFullGreaterThanPartialError:!1,hasUnitsGreaterThanPartialError:!h.isPartialCreditPercentGreaterThanUnitsPercent({...this.props.question,allowPartialCredit:s})})},this.toggleUnitsRequired=e=>{const s=e.target.checked;this.props.onQuestionChange({units:{...t.DEFAULT_UNITS_SETTINGS,unitsRequired:s}}),this.setState({hasUnitPointsPercentRangeError:!1,hasUnitsGreaterThanPartialError:!1,hasUnitValueEmptyError:!1})};const{correctAnswerTolerance:s}=e.question;this.state={areAnswerToleranceOptionsVisible:s&&s.value>0,hasFullGreaterThanPartialError:!1,hasAnswerToleranceNaNError:!1,hasPartialCreditToleranceNanError:!1,hasPartialCreditPointsRangeError:!1,hasRoundingValueError:!1,hasUnitPointsPercentRangeError:!1,hasUnitsGreaterThanPartialError:!1,hasUnitValueEmptyError:!1,hasVariableRangeError:!1,hasVariableSetCountNaNError:!1,hasVariableSetCountLessThanOneError:!1}}componentDidMount(){this.checkForErrors()}componentDidUpdate(e,t){const s=_(t),i=_(this.state);s!==i&&this.props.onValidate(!i),e.question.variableSetCount!==this.props.question.variableSetCount&&this.props.onAnswerSetsRelatedFieldDirty(!0)}render(){const{areAnswerToleranceOptionsVisible:e,hasRoundingValueError:s,hasUnitPointsPercentRangeError:i,hasUnitsGreaterThanPartialError:n,hasUnitValueEmptyError:y}=this.state,{hasSubmissions:E,onGoBackStep:C,question:w,translateKey:S}=this.props,{answerScale:P,allowPartialCredit:A,correctAnswerFormat:R,correctAnswerPrecision:v,correctAnswerTolerance:q,displayRoundingSettingsToStudent:T,partialCreditPointsPercent:I,partialCreditTolerance:D,units:Q,variableDefinitions:F,variableSetCount:x}=w,k=this.getRoundingValueLabel(v),N=this.getFullCreditRangeError(),L=this.getPartialCreditRangeError(),M=this.getPartialCreditPointsRangeError(),O=this.getVariableSetCountError();return a.default.createElement("div",{className:t.CLASS_PREFIX},a.default.createElement("div",{className:`${t.CLASS_PREFIX}__answer-format`},a.default.createElement(u.ChoiceGroup,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.answerFormat.choiceGroup`,legendLabel:S("stepTwo.answerFormat.title"),defaultSelectedKey:R,options:[{key:o.CalculatedFormulaAnswerFormatType.Normal,text:S("stepTwo.answerFormat.normalOption"),checked:R===o.CalculatedFormulaAnswerFormatType.Normal},{key:o.CalculatedFormulaAnswerFormatType.Exponential,text:S("stepTwo.answerFormat.exponentialOption"),checked:R===o.CalculatedFormulaAnswerFormatType.Exponential}],onChange:this.updateCorrectAnswerFormat,disabled:E})),a.default.createElement("div",{className:`${t.CLASS_PREFIX}__rounding-inputs`},a.default.createElement(d.Dropdown,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.roundingType.dropdown`,selectedKey:v,label:S("stepTwo.rounding.title"),options:[{key:o.CalculatedFormulaAnswerPrecisionType.Decimal,text:S("stepTwo.rounding.decimalOption"),index:0,ariaLabel:S("stepTwo.rounding.decimalOption"),selected:v===o.CalculatedFormulaAnswerPrecisionType.Decimal},{key:o.CalculatedFormulaAnswerPrecisionType.SignificantFigures,text:S("stepTwo.rounding.significantFigureOption"),index:1,ariaLabel:S("stepTwo.rounding.significantFigureOption"),selected:v===o.CalculatedFormulaAnswerPrecisionType.SignificantFigures}],onChanged:this.updateCorrectAnswerPrecision,disabled:E}),a.default.createElement("div",{className:f.removeExtraWhitespace(`\n                            ${t.CLASS_PREFIX}__rounding-inputs__text-field\n                            ${s?`${t.CLASS_PREFIX}__rounding-inputs__text-field--has-error`:""}\n                        `)},a.default.createElement(r.LocalizedNumberInput,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.precisionScoring.rounding.textField`,ariaLabel:k,className:s?"has-error":"",disabled:E,helperText:this.getRoundingValueError(),onBlur:this.checkForRoundingValueError,onChange:this.onIntegerTextFieldChangeFactory("answerScale"),max:h.MAX_ROUNDING_VALUE,min:h.getMinimumRoundingValue(v),numberFormatOptions:{maximumFractionDigits:0},validate:()=>!this.getRoundingValueError(),value:P}))),a.default.createElement(l.Checkbox,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.displayRoundingSettings.checkbox`,checked:T,className:`${t.CLASS_PREFIX}__display-rounding-settings__checkbox`,onChange:this.onCheckboxChangeFactory("displayRoundingSettingsToStudent"),label:S("stepTwo.rounding.displayRoundingSettingsToStudent")}),a.default.createElement("fieldset",{className:`${t.CLASS_PREFIX}__fieldset ${t.CLASS_PREFIX}__precision-scoring`},a.default.createElement("legend",{className:`${t.CLASS_PREFIX}__fieldset__legend`},S("stepTwo.precisionScoring.title")),a.default.createElement(l.Checkbox,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.precisionScoring.fullCredit.checkbox`,checked:e,className:`${t.CLASS_PREFIX}__full-credit-precision__checkbox`,onChange:this.toggleAnswerToleranceOptionsVisibility,label:S("stepTwo.precisionScoring.fullCreditLabel")}),e&&a.default.createElement("div",{className:`${t.CLASS_PREFIX}__precision-scoring-input-group`},this.getToleranceTypeDropdown(q&&q.type,this.onDropdownChangedFactory("type","correctAnswerTolerance",q),`${c.ANALYTICS_ID_PREFIX}.precisionScoring.fullCredit.toleranceType`,`${t.CLASS_PREFIX}__full-credit-precision__type-dropdown`),a.default.createElement(r.LocalizedNumberInput,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.precisionScoring.fullCreditTolerance.textField`,className:`${t.CLASS_PREFIX}__full-credit-precision__value-input${N?" has-error":""}`,label:S("stepTwo.precisionScoring.positiveNegativeIndicator"),onBlur:this.checkForPrecisionScoringErrors,onChange:this.onFloatTextFieldChangeFactory("value","correctAnswerTolerance",q),helperText:N,validate:()=>!N,value:q.value})),a.default.createElement(l.Checkbox,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.precisionScoring.partialCredit.checkbox`,checked:A,className:`${t.CLASS_PREFIX}__partial-credit-precision__checkbox`,onChange:this.toggleAllowPartialCredit,label:S("stepTwo.precisionScoring.partialCreditLabel")}),A&&a.default.createElement("div",null,a.default.createElement("div",{className:`${t.CLASS_PREFIX}__precision-scoring-input-group`},this.getToleranceTypeDropdown(D&&D.type,this.onDropdownChangedFactory("type","partialCreditTolerance",D),`${c.ANALYTICS_ID_PREFIX}.precisionScoring.partialCredit.toleranceType`,`${t.CLASS_PREFIX}__partial-credit-precision__type-dropdown`),a.default.createElement(r.LocalizedNumberInput,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.precisionScoring.partialCreditTolerance.textField`,className:`${t.CLASS_PREFIX}__partial-credit-precision-value-input${L?" has-error":""}`,helperText:L,label:S("stepTwo.precisionScoring.positiveNegativeIndicator"),onBlur:this.checkForPrecisionScoringErrors,onChange:this.onFloatTextFieldChangeFactory("value","partialCreditTolerance",D),validate:()=>!L,value:D.value})),a.default.createElement(r.LocalizedNumberInput,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.precisionScoring.partialCredit.creditToAward.textField`,className:`${t.CLASS_PREFIX}__precision-scoring-partial-credit-percentage${M?" has-error":""}`,helperText:M,label:S("stepTwo.precisionScoring.creditToAwardLabel"),onChange:this.onFloatTextFieldChangeFactory("partialCreditPointsPercent"),onBlur:this.checkForPrecisionScoringErrors,max:100,min:0,validate:()=>!M,value:I}))),a.default.createElement(m.default,{hasUnitPointsPercentRangeError:i,hasUnitsGreaterThanPartialError:n,hasUnitValueEmptyError:y,onUnitPointsPercentChange:this.onFloatTextFieldChangeFactory("unitPointsPercent","units",Q),onUnitPointsPercentBlur:this.checkForUnitPointsPercentErrors,onUnitsRequiredChange:this.toggleUnitsRequired,onUnitValueBlur:this.checkForUnitValueErrors,onUnitValueChange:this.onTextFieldChangeFactory("unitValue","units",Q),unitPointsPercent:Q.unitPointsPercent,unitsRequired:Q.unitsRequired,unitValue:Q.unitValue}),a.default.createElement(p.default,{disabled:E,onValidate:this.handleVariableRangeError,onVariableDefinitionChange:this.updateVariableDefinition,variableDefinitions:F}),a.default.createElement(r.LocalizedNumberInput,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.answerSetCount.textField`,className:`${t.CLASS_PREFIX}__variable-answer-sets-input${O?" has-error":""}`,disabled:E||!c.doesQuestionHaveVariables(this.props.question),helperText:O,label:S("stepTwo.variableSetCount.title"),numberFormatOptions:{maximumFractionDigits:0},min:h.MIN_ANSWER_SETS,onBlur:this.checkForVariableSetCountErrors,onChange:this.onIntegerTextFieldChangeFactory("variableSetCount"),required:!0,validate:()=>!O,value:x,id:"calculated_formula_question_sets"}),a.default.createElement(g.default,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.stepTwo`,showBack:!0,onBackClick:C,showNext:!0,isNextDisabled:_(this.state),onNextClick:this.handleGoToNextStep}),a.default.createElement(b.OffScreenAnnouncement,{type:"polite",message:S("stepTwo.stepNumber"),changeTrigger:1}))}}t.BaseCalculatedFormulaQuestionEditStepTwo=y,y.propTypes={hasSubmissions:n.default.bool.isRequired,onAnswerSetsRelatedFieldDirty:n.default.func.isRequired,onGoBackStep:n.default.func.isRequired,onGoToNextStep:n.default.func.isRequired,onQuestionChange:n.default.func.isRequired,onValidate:n.default.func.isRequired,question:n.default.object.isRequired,translateKey:n.default.func.isRequired},t.default=y},JKrv:function(e,t,s){"use strict";s.r(t)},KTc4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importDefault(s("ERkP")),a=s("/R3Y");s("t70R");t.default=({show:e,instructions:t})=>i.default.createElement("div",{className:a.removeExtraWhitespace(`\n        question-instructions\n        question-instructions--${e?"visible":"hidden"}\n      `),"aria-hidden":!e},t)},KTib:function(e,t,s){"use strict";s.r(t)},LeqM:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importDefault(s("ERkP")),a=s("MC1S"),n=s("8unJ");t.default=n.localizedComponentWrapper(({localize:e,show:t,usageCount:s})=>t?i.default.createElement(a.Notification,{type:a.NotificationType.Caution,disableAutoDismiss:!0,message:e.translate("assessments.canvas.question.multipleReferencesNotification.message",{usageCount:s})}):null)},Lk6F:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("nsO7")),n=s("Zwiy"),o=s("8jBL"),r=s("myse"),l=i.__importDefault(s("ERkP")),u=i.__importDefault(s("aWzz")),d=s("8unJ"),c=s("uDfI"),p=s("9OUN"),m=s("JfV0"),f=s("Y+9S");s("4bjT");const h=s("9qOT"),g=i.__importDefault(s("9HIK")),b=s("5rx+"),_=i.__importDefault(s("9mqG")),y=s("X3OV"),E=s("Y+9S");class C extends l.default.Component{constructor(e){if(super(e),this.dismissPanel=()=>this.state.isAnyQuestionDirty?(this.setCloseDialogVisibility(!0),!1):(f.notifyMobileApp(f.MessageType.QuestionPoolPanelClosed),this.props.closePanel(),!0),this.setCloseDialogVisibility=e=>{this.setState({isShowingCloseDialog:e})},this.hasMoreQuestions=()=>this.state.paging&&!a.isEmpty(this.state.paging.nextPage),this.onScroll=e=>{if(this.state.isLoadingQuestions||!this.hasMoreQuestions())return;const t=e.target;t.scrollHeight-t.scrollTop===t.clientHeight&&this.loadMoreQuestions()},this.onLoadMoreButtonClick=()=>{this.loadMoreQuestions(!0)},this.getLoadMoreQuestionsButtonText=()=>{const{localize:e}=this.props,{offset:t,count:s}=this.state.paging,i=C.QUESTION_POOL_QUESTION_LOAD_LIMIT,a=t+i;if(this.hasMoreQuestions()){const t=s-a>i?i:s-a;return e.translate("questionPools.moreQuestions.enabled",{count:t})}return e.translate("questionPools.moreQuestions.disabled")},this.loadMoreQuestions=e=>{const{courseId:t,assessmentId:s,questionPoolId:i,loadQuestionsFromQuestionBlock:a}=this.props;!this.state.isLoadingQuestions&&this.hasMoreQuestions()&&(this.setState(()=>({isLoadingQuestions:!0})),a({courseId:t,assessmentId:s,questionBlockId:i,offset:this.state.paging.offset+C.QUESTION_POOL_QUESTION_LOAD_LIMIT,limit:C.QUESTION_POOL_QUESTION_LOAD_LIMIT}).then(t=>{this.setState(s=>{const i=e?t.questions[0].id:s.firstNewQuestionBankId;return{paging:t.paging,isLoadingQuestions:!1,firstNewQuestionBankId:i,totalQuestionCount:t.paging.count}})}))},this.addQuestionsToPool=()=>{const{closePanel:e,openQuestionPicker:t}=this.props;e(!0),t()},this.deleteQuestionFromPool=(...e)=>{this.props.deleteQuestionFromQuestionBlock(...e).then(()=>{this.setState(e=>({totalQuestionCount:e.totalQuestionCount-1}))})},this.setIsAnyQuestionDirty=e=>{this.setState({isAnyQuestionDirty:e})},this.state={isAnyQuestionDirty:!1,isShowingCloseDialog:!1,totalQuestionCount:0},f.isInMobileApp()){const t={type:f.MessageType.QuestionPoolPanelOpened,status:f.MessageStatus.Success,pageTitle:e.localize.translate("questionPools.panelHeader")};f.sendMessageToMobile(t),E.dismissPanel(this.dismissPanel)}}componentWillUnmount(){E.dismissPanel(void 0)}UNSAFE_componentWillMount(){const{courseId:e,assessmentId:t,questionPoolId:s}=this.props;if(e){this.setState({isLoadingQuestions:!0});const i={courseId:e,assessmentId:t,questionBlockId:s,limit:C.QUESTION_POOL_QUESTION_LOAD_LIMIT};this.props.loadQuestionsFromQuestionBlock(i).then(e=>{this.setState({paging:e.paging,isLoadingQuestions:!1,totalQuestionCount:e.paging.count})})}}render(){const{closePanel:e,courseId:t,localize:s,hasSubmissions:i,hasAssessmentModifyPermissions:a,questions:u,assessmentTitle:d,persistQuestion:c,assessmentId:p,questionPoolId:m,localizationPrefix:f,analyticsEventAugmentor:b,commonContext:y}=this.props,{firstNewQuestionBankId:E,isLoadingQuestions:C,isShowingCloseDialog:w,paging:S,totalQuestionCount:P}=this.state,A=b(r.AnalyticsEventTypes.CLICK_EVENT,this.addQuestionsToPool,"questionPool.panel.add.button"),R=`questionPools.moreQuestions.enabled${this.hasMoreQuestions()?"enabled":"disabled"}`,v=b(r.AnalyticsEventTypes.CLICK_EVENT,this.onLoadMoreButtonClick,R),q={url:s.translate("questionPools.pageHelpUrl")};return l.default.createElement(n.BbPanel,{isOpen:"true",type:n.BbPanelType.full,onDismiss:this.dismissPanel,excludeContentPadding:!0,closeButtonAriaLabel:s.translate("questionPools.cancel"),className:"question-pool-panel",onScroll:this.onScroll,pageHelpProps:q,stackIndex:3,analyticsId:"questionPools.panel",heightOffset:y.panelHeightOffset},l.default.createElement(n.BbPanelHeader,{smallHeaderTitle:d,title:s.translate("questionPools.panelHeader"),analyticsId:"questionPools.panelHeader"}),l.default.createElement("div",{className:"question-pool-panel__content-scroll-wrapper"},l.default.createElement("div",{className:"question-pool-panel__content"},u&&l.default.createElement("div",{className:"question-pool-panel__top-bar"},l.default.createElement("span",{className:"question-pool-panel__question-count"},s.translate("questionPools.questionCount",{count:P})),a&&!i&&l.default.createElement("button",{className:"question-pool-panel__add-button-container button clear",onClick:A,"data-analytics-id":"questionPool.panel.add.button"},l.default.createElement("span",{className:"question-pool-panel__add-button-label"},s.translate("questionPools.addQuestionButtonLabel")),l.default.createElement(o.AddCircle,{id:"question-pool-panel_add-button-icon"}))),l.default.createElement(h.QuestionPoolQuestionList,{courseId:t,questions:u,hasSubmissions:i,hasAssessmentModifyPermissions:a,deleteQuestion:this.deleteQuestionFromPool,isLoading:C,firstNewQuestionBankId:E,setIsAnyQuestionDirty:this.setIsAnyQuestionDirty,persistQuestion:c,questionPoolId:m,assessmentId:p,localizationPrefix:f}),S&&l.default.createElement("button",{className:"question-pool-panel__load-more-button",onClick:v,"data-analytics-id":R,disabled:!this.hasMoreQuestions()},this.getLoadMoreQuestionsButtonText()),u&&0===u.length&&!C&&l.default.createElement(_.default,null))),w&&l.default.createElement(g.default,{setCloseDialogVisibility:this.setCloseDialogVisibility,closePanel:e}))}}t.QuestionPoolPanel=C,C.QUESTION_POOL_QUESTION_LOAD_LIMIT=50,C.propTypes={assessmentId:u.default.string.isRequired,assessmentTitle:u.default.string.isRequired,closePanel:u.default.func.isRequired,courseId:u.default.string.isRequired,localize:u.default.object.isRequired,loadQuestionsFromQuestionBlock:u.default.func.isRequired,deleteQuestionFromQuestionBlock:u.default.func.isRequired,questions:u.default.array.isRequired,hasAssessmentModifyPermissions:u.default.bool.isRequired,hasSubmissions:u.default.bool.isRequired,persistQuestion:u.default.func.isRequired,questionPoolId:u.default.string.isRequired,openQuestionPicker:u.default.func.isRequired,localizationPrefix:u.default.string.isRequired,...b.withAnalyticsProps};const w=c.connect((e,t)=>({questions:m.select.question.getQuestionsByQuestionBlockId(e,t.questionPoolId)}),e=>p.bindActionCreators({loadQuestionsFromQuestionBlock:m.actions.question.loadQuestionsFromQuestionBlock,deleteQuestionFromQuestionBlock:m.actions.question.deleteQuestionFromQuestionBlock},e))(C);t.default=r.withAnalytics(d.localizedComponentWrapper(y.withAssessmentCommonContext(w)))},"M+qG":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=s("w8C8"),o=s("XBaz"),r=i.__importDefault(s("+4s7")),l=s("HW8w"),u=s("8unJ");t.default=u.localizedComponentWrapper(({localize:e,onCodeRefresh:t,onCodeCopy:s})=>{const{containerClass:i,firstButtonClass:u}=l.useStyles();return a.createElement("div",{className:i},a.createElement(r.default,{className:u,analyticsId:"assessments.settings.accessCode.copy",onClick:s,tooltip:e.translate("assessments.settings.accessCode.copy"),activeTooltip:e.translate("assessments.settings.accessCode.copied")},a.createElement(n.Duplicate,null)),a.createElement(r.default,{analyticsId:"assessments.settings.accessCode.refresh",onClick:t,tooltip:e.translate("assessments.settings.accessCode.refresh"),activeTooltip:e.translate("assessments.settings.accessCode.refreshed")},a.createElement(o.Refresh,null)))})},MDkG:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("nBlB"),r=i.__importDefault(s("j9WP")),l=({checkAndDisableAssessmentSettings:e,courseId:t,index:s,dragPointRef:i,itemRef:n,alignedGoals:o,question:l,questionTitle:u,onQuestionEdit:d,onQuestionMadeDirty:c,persistQuestion:p,deleteQuestion:m,questionBeingEditedId:f,isAnyQuestionDirty:h,hasSubmissions:g,hasAssessmentModifyPermissions:b,openGoals:_,pluginsConfig:y,dragButtonAriaLabel:E,babelfishInstance:C,currentLocale:w,disableInteraction:S,openPoolQuestionPanel:P,addQuestionsToEmptyPool:A,localizationPrefix:R,showFeatureAnnouncement:v})=>{const q=s+1;return a.default.createElement("div",{className:`js-assessment-question-${q}`,ref:n},a.default.createElement(r.default,{checkAndDisableAssessmentSettings:e,courseId:t,questionBeingEditedId:f,isAnyQuestionDirty:h,alignedGoals:o,question:l,questionTitle:u,questionPosition:q,onQuestionEdit:d,onQuestionMadeDirty:c,persistQuestion:p,deleteQuestion:m,hasSubmissions:g,hasAssessmentModifyPermissions:b,openGoals:_,pluginsConfig:y,dragButtonAriaLabel:E,dragPointRef:i,babelfishInstance:C,currentLocale:w,disableInteraction:S,openPoolQuestionPanel:P,addQuestionsToEmptyPool:A,localizationPrefix:R,showFeatureAnnouncement:v}))};l.propTypes={checkAndDisableAssessmentSettings:n.default.func.isRequired,courseId:n.default.string.isRequired,dragPointRef:n.default.func.isRequired,index:n.default.number.isRequired,questionTitle:n.default.string,itemRef:n.default.object,questionBeingEditedId:n.default.string,isAnyQuestionDirty:n.default.bool.isRequired,alignedGoals:n.default.array,question:n.default.object.isRequired,onQuestionEdit:n.default.func.isRequired,onQuestionMadeDirty:n.default.func.isRequired,persistQuestion:n.default.func.isRequired,deleteQuestion:n.default.func.isRequired,hasSubmissions:n.default.bool.isRequired,hasAssessmentModifyPermissions:n.default.bool.isRequired,openGoals:n.default.func.isRequired,pluginsConfig:n.default.object.isRequired,dragButtonAriaLabel:n.default.string.isRequired,babelfishInstance:n.default.object.isRequired,currentLocale:n.default.string.isRequired,disableInteraction:n.default.bool,openPoolQuestionPanel:n.default.func.isRequired,addQuestionsToEmptyPool:n.default.func.isRequired,localizationPrefix:n.default.string.isRequired,showFeatureAnnouncement:n.default.object},t.default=o.DragNDropItem(l)},MmQQ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("qgI1");t.LocalizedPeerNotEnoughSubmissionsBanner=i.LocalizedPeerNotEnoughSubmissionsBanner;var a=s("AepM");t.LocalizedPeerReviewPeriodOpenBanner=a.LocalizedPeerReviewPeriodOpenBanner;var n=s("GaPR");t.LocalizedPeerReviewHasBeenDeletedBanner=n.LocalizedPeerReviewHasBeenDeletedBanner},MozA:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("pfaR");t.default=i.default},Mx6v:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("uDfI"),r=s("9OUN"),l=s("JfV0"),u=s("E1pj"),d=i.__importDefault(s("afDw")),c=(i.__importDefault(s("VsDy")),i.__importDefault(s("5B29")));class p extends a.Component{constructor(e){super(e),this.state={hasLoadedQuestions:!1,isQuestionLoadingInProgress:!0,isAllyAvailable:!1}}componentDidMount(){const{allyService:e,courseId:t,contentId:s,loadContents:i}=this.props;t&&s&&i({courseId:t,contentId:s}),e.isAvailable().then(e=>this.setState(()=>({isAllyAvailable:e})))}componentDidUpdate(e){const{assessment:t,courseId:s,loadGradebookColumn:i,loadQuestions:a}=this.props,{hasLoadedQuestions:n}=this.state;!e.assessment&&t&&i({courseId:s,columnId:t.gradableItemId}),t&&(n||a({courseId:s,assessmentId:t.id,refreshState:!0,expand:"alignedGoals,usageCount"}).then(()=>{this.setState(()=>({isQuestionLoadingInProgress:!1,hasLoadedQuestions:!0}))}))}render(){const{features:e,UltraWindowSize:t,allyService:s,contentId:i}=this.props,n={allyService:s,contentId:i,isAllyAvailable:this.state.isAllyAvailable};return a.default.createElement("div",null,a.default.createElement(c.default.Provider,{value:n},a.default.createElement(d.default,Object.assign({},this.props,{isLoadingInProgress:this.state.isQuestionLoadingInProgress})),e&&e.reactAssessmentsSettings&&!1))}}t.AssessmentPanel=p,p.propTypes={courseId:n.default.string.isRequired,contentId:n.default.string.isRequired,assessment:n.default.object,questions:n.default.array.isRequired,content:n.default.object,gradebookColumn:n.default.object,features:n.default.shape({isProduction:n.default.bool,cloudStorageIntegration:n.default.bool,reactAssessmentsSettings:n.default.bool}),loadContents:n.default.func.isRequired,loadGradebookColumn:n.default.func.isRequired,createQuestion:n.default.func.isRequired,deleteQuestion:n.default.func.isRequired,loadQuestions:n.default.func.isRequired,persistQuestion:n.default.func.isRequired,persistContent:n.default.func.isRequired,persistGradebookColumn:n.default.func.isRequired,removeRubricAssociations:n.default.func.isRequired,routes:n.default.object.isRequired,pluginsConfig:n.default.object.isRequired,setIsAnyQuestionDirty:n.default.func.isRequired,applyAccessibilityHandling:n.default.func,revertAccessibilityHandling:n.default.func,babelfishInstance:n.default.object.isRequired,UltraWindowSize:n.default.object.isRequired,localizationPrefix:n.default.string.isRequired,allyService:n.default.object.isRequired};const m=o.connect((e,t)=>({assessment:l.select.assessment.getAssessmentByContentId(e,t.contentId),questions:l.select.question.getQuestionsByContentId(e,t.contentId),content:l.select.content.getContentById(e,t.contentId),gradebookColumn:l.select.gradebookColumn.getGradebookColumnByContentId(e,t.contentId)}),e=>r.bindActionCreators({loadContents:l.actions.content.loadContents,loadGradebookColumn:l.actions.gradebookColumn.loadGradebookColumn,persistContent:l.actions.content.persistContent,persistGradebookColumn:l.actions.gradebookColumn.persistGradebookColumn,createQuestion:l.actions.question.createQuestion,deleteQuestion:l.actions.question.deleteQuestion,loadQuestions:l.actions.question.loadQuestions,persistQuestion:l.actions.question.persistQuestion,removeRubricAssociations:l.actions.gradebookColumn.removeRubricAssociations},e))(u.windowResizingResponsiveComponentWrapper(p));t.default=m},NHtK:function(e,t,s){"use strict";s.r(t)},NPG5:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=i.__importDefault(s("Pfoe")),r=s("3ZJq");s("TAB1");const l=e=>{const{answersInfo:t,answersInfoLabel:s,localize:i,question:n,questionTextClassName:l}=e;return a.default.createElement("div",{className:"readonly-multiple-answer-question"},a.default.createElement("div",{className:l},a.default.createElement(o.default,{id:n.id,bbml:n.questionText.rawText,isReadOnly:!0,refreshBbml:!0})),a.default.createElement("div",{className:"readonly-answer__container"},a.default.createElement("div",{className:"readonly-multiple-answer-question__instructions readonly-answer__main readonly-answer__instructions"},i.translate("assessments.canvas.question.multipleAnswer.answerInstructions")),t&&a.default.createElement("span",{className:"readonly-answer__info-label readonly-answer__info"},s)),a.default.createElement("ol",{className:"readonly-multiple-answer-question__list"},n.answers.map((e,s)=>a.default.createElement("li",{key:e.id,className:"readonly-multiple-answer-question__li readonly-answer__container"},a.default.createElement("div",{className:"readonly-multiple-answer-question__answer readonly-answer__main"},a.default.createElement("span",{className:"readonly-multiple-answer-question__text"},a.default.createElement(o.default,{bbml:e.answerText.rawText,id:e.id,isReadOnly:!0})),e.correctAnswer&&a.default.createElement("span",{className:"readonly-multiple-answer-question__correct"},i.translate("assessments.canvas.question.multipleAnswer.correctAnswer"))),t&&a.default.createElement("div",{className:"readonly-multiple-answer-question__answers-info readonly-answer__info"},t[s])))),a.default.createElement(r.AutomatedQuestionFeedbackRead,{question:n}))};l.propTypes={answersInfo:n.default.array,answersInfoLabel:n.default.string,localize:n.default.object.isRequired,question:n.default.object.isRequired,questionTextClassName:n.default.string.isRequired},t.default=l},Nr1y:function(e,t,s){"use strict";s.r(t)},NzPg:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importStar(s("nsO7")),o=i.__importDefault(s("aWzz")),r=s("MC1S"),l=s("E1pj"),u=s("JfV0"),d=s("3ZJq"),c=i.__importDefault(s("PCGI")),p=i.__importDefault(s("gTAB")),m=s("WGaE"),f=i.__importDefault(s("R6T4")),h=i.__importDefault(s("rLAU")),g=i.__importStar(s("TIvv")),b=i.__importStar(s("AiU9")),_=i.__importDefault(s("CvmH")),y=i.__importStar(s("OPED")),E=i.__importStar(s("jPx/")),C=s("Vng8");s("4Pbl");const w=s("1Xy2"),S=i.__importDefault(s("7LMM")),P=e=>{const{canDeleteDistractor:t,canDeletePromptAnswerPair:s,editMode:i,localize:o,onDistractorAddition:l,onDistractorDeletion:P,onPromptAnswerPairAddition:A,onPromptAnswerPairDeletion:R,onQuestionChange:v,onScoringOptionsChange:q,question:T,setActiveEditorId:I,startEditMode:D,UltraWindowSize:Q,pluginsConfig:F}=e,x=T.answers.filter(e=>e.isDistractor),k=E.reusableAnswers(T),N=E.answerIdToPromptIndexMap(T),L=p.default.isInactive(i),M=!L&&C.hasLinkedQuestion(T),O=T.prompts.length>=u.MATCHING_MAXIMUM_AMOUNT_OF_PROMPT_ANSWER_PAIRS,B=O?o.translate("assessments.canvas.question.matching.addPairMaxReached",{maxCount:u.MATCHING_MAXIMUM_AMOUNT_OF_PROMPT_ANSWER_PAIRS}):o.translate("assessments.canvas.question.matching.addPair"),z=x.length>=u.MATCHING_MAXIMUM_AMOUNT_OF_DISTRACTORS,V=z?o.translate("assessments.canvas.question.matching.addDistractorMaxReached",{maxCount:u.MATCHING_MAXIMUM_AMOUNT_OF_DISTRACTORS}):o.translate("assessments.canvas.question.matching.addDistractor"),$=C.isNewQuestion(e.question),j=()=>!0===n.get(e,"question.permissions.addOrRemoveAnswer")&&!0===n.get(e,"question.permissions.changeMatchingAnswerIndex")||$,U=()=>!0===n.get(e,"question.permissions.addOrRemovePrompt")&&!0===n.get(e,"question.permissions.addOrRemoveAnswer")&&!0===n.get(e,"question.permissions.changeMatchingAnswerIndex")||$,K=e=>{e.preventDefault()},W=[{key:w.partialCreditNoPenalty},{key:w.noPartialCredit},{key:w.partialCreditWithPenalty},{key:w.partialCreditOverallNegative}];return a.default.createElement("div",{className:`matching ${i?"matching--edit":"matching--read"}`},a.default.createElement(c.default,{editMode:i,question:T},a.default.createElement(m.LinkedQuestionNotification,{show:M,usageCount:T.usageCount}),a.default.createElement(g.default,Object.assign({},g.getPluggableQuestionHeaderProps(e,v))),a.default.createElement(b.default,Object.assign({},b.getQuestionControlProps(e))),a.default.createElement(_.default,{instructions:o.translate("assessments.canvas.question.matching.instructions"),show:!L}),a.default.createElement(y.default,Object.assign({},y.getQuestionTextProps(e,v)))),a.default.createElement("div",{className:"matching__container"},a.default.createElement("div",{className:"matching__pairs"},!Q.isSmallBreakpoint()&&a.default.createElement("div",{className:"matching__column-titles-container"},a.default.createElement("div",{className:`matching__column-title ${L?"":"field-required"}`},o.translate("assessments.canvas.question.matching.headers.prompts")),a.default.createElement("div",{className:`matching__column-title ${L?"":"field-required"}`},o.translate("assessments.canvas.question.matching.headers.answers"))),a.default.createElement("ol",{className:"matching__list"},T.prompts.map((t,i)=>a.default.createElement("li",{key:t.id,className:"matching__list-item"},a.default.createElement(h.default,Object.assign({},e,{answerIsReused:E.isPairReused(T,t.id),answer:T.answers[t.matchingAnswerIndex],answerIdToPromptIndexMap:N,canDeletePromptAnswerPair:s,hasRemovePromptAnswerPairPermissions:U(),hasReuseAnswerPermissions:j(),index:i,onPromptAnswerPairDeletion:R,prompt:t,reusableAnswers:k,reusedElsewherePair:E.isPairReused(T,t.id),startEditMode:D}))))),!L&&a.default.createElement("div",{className:"matching__actions-container"},a.default.createElement("div",{className:"matching__action"},(()=>!0===n.get(e,"question.permissions.addOrRemovePrompt")&&!0===n.get(e,"question.permissions.addOrRemoveAnswer")||$)()&&a.default.createElement(r.Link,{className:"matching__add-pair",onClick:A,onMouseDown:K,type:"button",disabled:O},B)),a.default.createElement("span",{className:"matching__action"},o.translate("assessments.canvas.question.matching.randomAnswers")))),(!L||L&&x.length>0)&&a.default.createElement("div",{className:"matching__distractors"},a.default.createElement("div",{className:"matching__distractors-list"},a.default.createElement("div",{className:`matching__distractors-list-label ${1!==T.prompts.length||L?"":"field-required"}`},a.default.createElement("span",null,o.translate("assessments.canvas.question.matching.additionalAnswers"))),a.default.createElement("ol",{className:"matching__list matching__distractors-list-items"},x.map((s,i)=>a.default.createElement("li",{className:"matching__distractors-list-items-item",key:s.ui.id},a.default.createElement(f.default,Object.assign({},e,{answer:s,canDeleteDistractor:t,hasRemoveAnswerPermissions:j(),index:i,onDistractorDeletion:P})))))),a.default.createElement("div",{className:"matching__distractor-actions"},!L&&(()=>!0===n.get(e,"question.permissions.addOrRemoveAnswer")||$)()&&a.default.createElement(r.Link,{className:"matching__add-distractor",onClick:l,onMouseDown:K,type:"button",disabled:z},V)))),a.default.createElement(S.default,{question:e.question,onScoringOptionsChange:e.onScoringOptionsChange,editMode:e.editMode,localize:e.localize,isAnswersEditMode:!0,options:W,translationKeyPrefix:"assessments.canvas.question.matching.scoringOptions"}),a.default.createElement(d.AutomatedQuestionFeedback,{editMode:i,onQuestionChange:v,question:T,setActiveEditorId:I,pluginsConfig:F}))};P.propTypes={canDeleteDistractor:o.default.func.isRequired,canDeletePromptAnswerPair:o.default.func.isRequired,editMode:o.default.number.isRequired,localize:o.default.shape({translate:o.default.func}).isRequired,onAnswerChange:o.default.func.isRequired,onDistractorAddition:o.default.func.isRequired,onDistractorDeletion:o.default.func.isRequired,onPromptAnswerPairAddition:o.default.func.isRequired,onPromptAnswerPairDeletion:o.default.func.isRequired,onPromptAnswerReuse:o.default.func.isRequired,onPromptRemoveReusedAnswer:o.default.func.isRequired,onPromptChange:o.default.func.isRequired,onQuestionChange:o.default.func.isRequired,onScoringOptionsChange:o.default.func.isRequired,question:o.default.shape({id:o.default.string,answers:o.default.arrayOf(o.default.object),prompts:o.default.arrayOf(o.default.object),usageCount:o.default.number}).isRequired,startEditMode:o.default.func.isRequired,UltraWindowSize:o.default.shape({isSmallBreakpoint:o.default.func}).isRequired,showFeatureAnnouncement:o.default.object,pluginsConfig:o.default.shape({}).isRequired},t.default=l.windowResizingResponsiveComponentWrapper(P)},O55a:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=s("8unJ"),o=s("M0dR"),r=s("0x+l"),l=s("yETo"),u=i.__importDefault(s("Pfoe")),d=i.__importDefault(s("O94r"));t.SELECTOR_PREFIX="automated-question-feedback-read",t.AutomatedQuestionFeedbackReadComponent=({localize:e,question:s,className:i,pluginsConfig:n})=>{var c,p;const m=l.useStyles(),[f,h]=a.default.useState(!1);if(!(null===(c=s.correctResponseFeedback)||void 0===c?void 0:c.rawText)&&!(null===(p=s.incorrectResponseFeedback)||void 0===p?void 0:p.rawText))return null;const g=`${t.SELECTOR_PREFIX}_content${s.id}`;return a.default.createElement("div",{className:d.default(m.base,i,t.SELECTOR_PREFIX)},a.default.createElement(o.AnalyticsTypography,{component:"h4",variant:"h4"},a.default.createElement("button",{className:d.default(m.contentToggle,`${t.SELECTOR_PREFIX}__content-toggle`),onClick:()=>h(!f),type:"button","aria-expanded":f,"aria-controls":f?g:null},a.default.createElement("span",null,e.translate("automatedQuestionFeedback.read.contentToggleLabel")),f?a.default.createElement(r.ArrowUp,null):a.default.createElement(r.ArrowDown,null))),f&&(()=>{const i=`-${t.SELECTOR_PREFIX}_correct-feedback${s.id}`,r=`-${t.SELECTOR_PREFIX}_incorrect-feedback${s.id}`,l=`${t.SELECTOR_PREFIX}_incorrect-section-title_${s.id}`,c=`${t.SELECTOR_PREFIX}_correct-section-title_${s.id}`;return a.default.createElement("div",{id:g},s.correctResponseFeedback.rawText&&a.default.createElement("div",{className:d.default(m.contentSection,`${t.SELECTOR_PREFIX}__content-section`)},a.default.createElement("div",{className:m.sectionHeader},a.default.createElement(o.AnalyticsTypography,{id:c,component:e=>a.default.createElement("label",Object.assign({htmlFor:`bb-editor${i}`},e)),variant:"h6",className:m.sectionTitle},e.translate("automatedQuestionFeedback.correctAnswerLabel"))),a.default.createElement(u.default,{bbml:s.correctResponseFeedback.rawText,id:i,isReadOnly:!0,ariaLabelledBy:c,pluginsConfig:n})),s.incorrectResponseFeedback.rawText&&a.default.createElement("div",{className:d.default(m.contentSection,`${t.SELECTOR_PREFIX}__content-section`)},a.default.createElement("div",{className:m.sectionHeader},a.default.createElement(o.AnalyticsTypography,{id:l,component:e=>a.default.createElement("label",Object.assign({htmlFor:`bb-editor${r}`},e)),variant:"h6",className:m.sectionTitle},e.translate("automatedQuestionFeedback.incorrectAnswerLabel"))),a.default.createElement(u.default,{bbml:s.incorrectResponseFeedback.rawText,id:r,isReadOnly:!0,ariaLabelledBy:l,pluginsConfig:n})))})())},t.default=n.localizedComponentWrapper(t.AutomatedQuestionFeedbackReadComponent)},O761:function(e,t,s){"use strict";s.r(t)},OIpQ:function(e,t,s){"use strict";s.r(t)},OPED:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("3UQ0");t.default=i.default,t.getQuestionTextProps=i.getQuestionTextProps},OfVW:function(e,t,s){"use strict";s.r(t)},OjB1:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("j92x"),l=s("8h7I"),u=s("AuQm"),d=s("E1pj"),c=s("t6ux"),p=s("/R3Y");s("p3LL"),t.CLASS_PREFIX="calculated-formula-question__step-2__answer-units",t.TRANSLATION_KEY_PREFIX="assessments.canvas.question.calculatedFormula.stepTwo.answerUnits",t.BaseAnswerUnits=({localize:e,onUnitPointsPercentChange:s,onUnitsRequiredChange:i,onUnitValueChange:n,onUnitPointsPercentBlur:o,onUnitValueBlur:m,unitPointsPercent:f,unitsRequired:h,unitValue:g,hasUnitValueEmptyError:b,hasUnitPointsPercentRangeError:_,hasUnitsGreaterThanPartialError:y})=>{const[E]=a.useState(d.getId("calculated-formula-question-instructions-")),C=b?e.translate(`${t.TRANSLATION_KEY_PREFIX}.error.empty`):null;let w=null;if(_)w=e.translate(`${t.TRANSLATION_KEY_PREFIX}.error.outOfRange`);else if(y){const t="assessments.canvas.question.calculatedFormula.stepTwo.precisionScoring";w=e.translate(`${t}.partialCreditLessThanUnitsCreditError`)}return a.default.createElement("fieldset",{className:p.removeExtraWhitespace(`\n                calculated-formula-question__step-2__fieldset\n                ${t.CLASS_PREFIX}__fieldset\n            `)},a.default.createElement("legend",{className:p.removeExtraWhitespace(`\n                    calculated-formula-question__step-2__fieldset__legend\n                    ${t.CLASS_PREFIX}__legend\n                `)},e.translate(`${t.TRANSLATION_KEY_PREFIX}.title`)),a.default.createElement(r.Checkbox,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.answerUnits.required`,checked:h,className:`${t.CLASS_PREFIX}__required-checkbox`,label:e.translate(`${t.TRANSLATION_KEY_PREFIX}.required`),onChange:i}),h&&a.default.createElement("div",{className:`${t.CLASS_PREFIX}__fields-container`},a.default.createElement("div",{className:`${t.CLASS_PREFIX}__units-container`},a.default.createElement(l.TextField,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.answerUnits`,"aria-describedby":E,ariaLabel:e.translate(`${t.TRANSLATION_KEY_PREFIX}.title`),className:`${t.CLASS_PREFIX}__units-input`,errorMessage:C,onBlur:m,onChanged:n,value:null!=g?g:""})),a.default.createElement("div",{className:`${t.CLASS_PREFIX}__units-input-instructions`,id:E},e.translate(`${t.TRANSLATION_KEY_PREFIX}.instructions`)),a.default.createElement(u.LocalizedNumberInput,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.answerUnits.pointsPercentage`,className:`${t.CLASS_PREFIX}__points-percentage-input`,helperText:w,label:e.translate(`${t.TRANSLATION_KEY_PREFIX}.percentageLabel`),max:100,min:0,onBlur:o,onChange:s,validate:()=>!w,value:f})))},t.BaseAnswerUnits.propTypes={hasUnitPointsPercentRangeError:n.default.bool.isRequired,hasUnitsGreaterThanPartialError:n.default.bool.isRequired,hasUnitValueEmptyError:n.default.bool.isRequired,localize:n.default.object,onUnitPointsPercentBlur:n.default.func.isRequired,onUnitPointsPercentChange:n.default.func.isRequired,onUnitsRequiredChange:n.default.func.isRequired,onUnitValueBlur:n.default.func.isRequired,onUnitValueChange:n.default.func.isRequired,unitPointsPercent:n.default.number,unitsRequired:n.default.bool.isRequired,unitValue:n.default.string},t.default=o.localizedComponentWrapper(t.BaseAnswerUnits)},On2X:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=i.__importStar(s("nsO7")),r=s("8unJ"),l=s("aPd7"),u=s("/R3Y"),d=i.__importDefault(s("2yjE"));s("WARa");const c=300;class p extends a.PureComponent{constructor(){super(...arguments),this.getPreviewText=()=>{const e=l.getPlainTextFromBbML(this.props.question.questionText.rawText);return e.length<=c?e:u.truncateString(e,c)}}render(){const{question:e,questionTitle:t}=this.props,s=e.alignedGoals&&e.alignedGoals.length>0;return a.default.createElement("div",{className:"question-preview"},t&&a.default.createElement(d.default,{id:e.id,canEnterEditMode:!1,editMode:0,onQuestionChange:o.noop,points:e.points,question:e,questionTitle:t,onPointsClick:o.noop,hasSubmissions:!1,hasQuestionEditPermissions:!1,hasAlignedGoals:s,openGoals:o.noop,goalAriaLabel:"",disableFocus:!0,analyticsId:"questionPreview.questionText"}),a.default.createElement("div",{className:"question-preview__question-text",id:`bb-editor${e.id}`},this.getPreviewText()))}}p.propTypes={question:n.default.object.isRequired,questionTitle:n.default.string},t.default=r.localizedComponentWrapper(p)},OyKE:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=s("8unJ"),o=s("M0dR"),r=s("0x+l"),l=s("rZf7"),u=i.__importDefault(s("Pfoe")),d=i.__importDefault(s("O94r"));t.SELECTOR_PREFIX="automated-question-feedback-attempt-review",t.AutomatedQuestionFeedbackAttemptReviewComponent=({feedback:e,isCollapsible:s,localize:i,editorPluginsOptions:n})=>{const c=l.useStyles(),[p,m]=a.default.useState(!1);if(!e)return null;const f=Math.floor(1e6*Math.random()+1),h=`${t.SELECTOR_PREFIX}__feedback-${f}`,g=`${t.SELECTOR_PREFIX}_content${f}`,b=e=>a.default.createElement("label",Object.assign({htmlFor:h},e));return a.default.createElement("div",{className:d.default(c.base,t.SELECTOR_PREFIX)},s&&(()=>a.default.createElement(o.AnalyticsTypography,{component:"div",variant:"body1"},a.default.createElement("button",{className:d.default(c.contentToggle,`${t.SELECTOR_PREFIX}__content-toggle`),onClick:()=>m(!p),type:"button","aria-expanded":p,"aria-controls":p?g:null},a.default.createElement("span",null,p?i.translate("automatedQuestionFeedback.attemptReview.hideFeedbackToggleLabel"):i.translate("automatedQuestionFeedback.attemptReview.showFeedbackToggleLabel")),p?a.default.createElement(r.ArrowUp,{className:c.contentToggleIcon}):a.default.createElement(r.ArrowDown,{className:c.contentToggleIcon}))))(),(!s||p)&&(()=>a.default.createElement("div",{className:d.default(c.base,`${t.SELECTOR_PREFIX}__content-section`),id:g},a.default.createElement("div",{className:c.contentSection},a.default.createElement("div",{className:c.sectionHeader},a.default.createElement(r.Feedback,{className:c.feedbackIcon}),a.default.createElement(o.AnalyticsTypography,{component:b,variant:"h4",className:c.contentTitle},i.translate("automatedQuestionFeedback.attemptReview.feedbackLabel"))),a.default.createElement(u.default,{bbml:e,id:h,isReadOnly:!0,refreshBbml:!0,pluginsConfig:n}))))())},t.default=n.localizedComponentWrapper(t.AutomatedQuestionFeedbackAttemptReviewComponent)},Oyt1:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=s("MC1S"),n=s("WOfr"),o=s("RrOo"),r=i.__importStar(s("nsO7")),l=i.__importDefault(s("aWzz")),u=i.__importStar(s("ERkP")),d=s("8unJ"),c=i.__importDefault(s("xyjg"));s("dn4g");class p extends u.PureComponent{constructor(){super(...arguments),this.mainHeading=null,this.focusFirstSourceHeading=()=>{this.mainHeading&&this.mainHeading.focus()},this.isQuestionSelected=e=>{const{isSelectAllQuestions:t,deselectedQuestions:s,selectedQuestions:i}=this.props,a=r.isUndefined(s[e]),n=!r.isUndefined(i[e]);return t&&a||n},this.renderSelectDeselectAll=()=>{const{hideSelectDeselectAll:e,localize:t,onClearAllQuestionSelection:s,onSelectAllQuestions:i}=this.props;return e?null:u.default.createElement("div",{className:"question-picker-results-list__select-deselect-all"},u.default.createElement(a.Link,{className:"js-select-all-questions",onClick:i,analyticsId:"questionPicker.questionList.selectAll.link"},t.translate("questionPicker.questionList.selectAll")),u.default.createElement("span",null," | "),u.default.createElement(a.Link,{className:"js-deselect-all-questions",onClick:s,analyticsId:"questionPicker.questionList.clearAll.link"},t.translate("questionPicker.questionList.clearAll")))},this.renderQuestions=()=>{const{courseId:e,items:t,onItemSelect:s,questionToFocus:i,sources:a,localizationPrefix:l}=this.props,d=r.mapKeys(a,e=>e.id),p=r.groupBy(t,"assessmentId");return Object.entries(p).map(([t,a],r)=>{const p=d[t],m=p?p.title:"",f=p&&"Pool"===p.type?n.QuestionBank:o.Test,h=`heading_${t}`;return u.default.createElement("div",{key:t,className:"js-source-question-grouping"},u.default.createElement("div",{className:"question-picker-results-list__heading-group"},u.default.createElement(f,{className:"question-picker-results-list__heading-icon",color:"primary"}),u.default.createElement("h2",{id:h,className:"question-picker-results-list__heading-text js-question-group-heading",ref:e=>{0===r&&(this.mainHeading=e)}},m)),a.map(a=>{const n=this.isQuestionSelected(a.id);return u.default.createElement("div",{key:a.id},u.default.createElement(c.default,{courseId:e,assessmentId:t,onSelectQuestion:s,question:a,focused:i===a.id,selected:n,sourceHeaderId:h,localizationPrefix:l}))}))})}}componentDidUpdate(e){e.isShowingFilterPanel&&!this.props.isShowingFilterPanel&&this.focusFirstSourceHeading()}render(){const{isLoadingMore:e}=this.props;return u.default.createElement("div",{className:"question-picker-results-list"},this.renderSelectDeselectAll(),this.renderQuestions(),e&&u.default.createElement(a.Spinner,{className:"question-picker-results-list__spinner",size:a.SpinnerSize.large}))}}p.propTypes={courseId:l.default.string.isRequired,localize:l.default.object.isRequired,sources:l.default.array.isRequired,deselectedQuestions:l.default.object.isRequired,hideSelectDeselectAll:l.default.bool,selectedQuestions:l.default.object.isRequired,items:l.default.array.isRequired,isLoadingMore:l.default.bool.isRequired,onItemSelect:l.default.func.isRequired,isSelectAllQuestions:l.default.bool.isRequired,onSelectAllQuestions:l.default.func.isRequired,onClearAllQuestionSelection:l.default.func.isRequired,questionToFocus:l.default.string,isShowingFilterPanel:l.default.bool,localizationPrefix:l.default.string.isRequired},p.defaultProps={hideSelectDeselectAll:!1,isShowingFilterPanel:!0},t.UnwrappedQuestionPickerResultsList=p,t.default=d.localizedComponentWrapper(p)},PCGI:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("G5c7");t.default=i.default},Pfoe:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("kBJj"),r=s("8unJ"),l=s("JfV0");s("DeRc");const u=s("5B29");t.BB_EDITOR_CONTAINER_CLASSNAME="bb-editor-wrapper";const d="bb-editor";class c extends a.Component{constructor(e){super(e),this.ref=null,this.focusEditor=()=>{const e=this.ref.querySelector(".bb-editor");e&&e.focus()},this.updateEditorStyle=()=>{const e=this.ref.classList;this.props.isReadOnly?e.add("read-only"):e.remove("read-only")},this.onEditorBlur=()=>{this.setState(()=>({hasFocus:!1}),this.props.setActiveEditorId(null)),this.props.onBlur&&this.props.onBlur()},this.onEditorFocus=()=>{const{id:e,setActiveEditorId:t}=this.props;this.setState(()=>({hasFocus:!0}),t(e)),this.props.onFocus&&this.props.onFocus()},this.onTextChange=e=>{this.props.refreshBbml||this.props.onChange(e)},this.isToolbarHidden=()=>{const{keepToolbarVisible:e}=this.props;return!e&&!this.state.hasFocus},this.state={ally:this.buildAlly(),bbml:e.bbml,hasFocus:!1,plugins:this.buildPlugins()}}componentDidMount(){this.setState(()=>({bbml:null})),this.updateEditorStyle()}UNSAFE_componentWillReceiveProps(e){e.refreshBbml?this.setState(()=>({bbml:e.bbml})):null!==this.state.bbml&&this.setState(()=>({bbml:null}))}shouldComponentUpdate(e){return!e.id||!e.activeEditorId||e.id===e.activeEditorId}componentDidUpdate(e,t){var s,i;this.updateEditorStyle(),this.props.id===this.props.activeEditorId&&!t.hasFocus&&this.focusEditor();const a=["babelfishInstance","babelfishFormatInstance","courseId","currentLocale","pluginsConfig","plugins"].some(t=>e[t]!==this.props[t]),n=(null===(s=this.props.context)||void 0===s?void 0:s.allyService)!==(null===(i=e.context)||void 0===i?void 0:i.allyService);(n||a)&&this.setState({...n?{ally:this.buildAlly()}:null,...a?{plugins:this.buildPlugins()}:null})}buildAlly(){const{allyService:e}=this.props.context;return{service:e,indexMap:new Map}}buildPlugins(){const{babelfishInstance:e,babelfishFormatInstance:t,courseId:s,currentLocale:i,pluginsConfig:a,plugins:n}=this.props,r={apiBasePath:l.config.apiBasePath,babelfishFormatInstance:t,babelfishInstance:e,locale:i,xsrfToken:l.config.xsrf},u=[...n,o.insertLocalFile({...r}),o.link(),o.image(),o.video(),o.math({...r,courseId:s})];return a&&a.contentMarket&&u.push(o.contentMarket({...a.contentMarket,...r})),a&&a.insertCloudStorageIntegrationFile&&u.push(o.insertCloudStorageIntegrationFile({...a.insertCloudStorageIntegrationFile,...r})),a&&a.insertYoutubeVideo&&u.push(o.insertYoutubeVideo({...a.insertYoutubeVideo,...r})),u}render(){const{babelfishInstance:e,babelfishFormatInstance:s,courseId:i,currentLocale:n,id:r,localize:l,pluginsConfig:u,context:c,...p}=this.props,{ally:m,bbml:f,hasFocus:h,plugins:g}=this.state,b=h?this.props:p,_=`${d}${r}`;return a.default.createElement("div",{ref:e=>{this.ref=e},className:t.BB_EDITOR_CONTAINER_CLASSNAME},a.default.createElement(o.BbEditor,Object.assign({},b,{ariaDescribedBy:_,bbml:f,editorId:_,isToolbarHidden:this.isToolbarHidden(),onBlur:this.onEditorBlur,onChange:this.onTextChange,onFocus:this.onEditorFocus,plugins:g,rootContentId:c.contentId,ally:m})))}}c.propTypes={activeEditorId:n.default.string,babelfishInstance:n.default.object.isRequired,babelfishFormatInstance:n.default.object.isRequired,currentLocale:n.default.string.isRequired,id:n.default.string.isRequired,bbml:n.default.string.isRequired,courseId:n.default.string,isReadOnly:n.default.bool.isRequired,keepToolbarVisible:n.default.bool,localize:n.default.object.isRequired,onChange:n.default.func,onFocus:n.default.func,onBlur:n.default.func,plugins:n.default.array,pluginsConfig:n.default.shape({contentMarket:n.default.shape({}),insertCloudStorageIntegrationFile:n.default.shape({}),insertYoutubeVideo:n.default.shape({})}),refreshBbml:n.default.bool,setActiveEditorId:n.default.func,toolbarSet:n.default.string,context:n.default.object},c.defaultProps={plugins:[],keepToolbarVisible:!1,toolbarSet:"default",context:null},t.RawBbEditorWrapper=c,t.default=u.withAssessmentPanelContext(r.localizedComponentWrapper(c))},QJmz:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("nsO7"),a=new Map;t.setToggle=function(e,t){if(!i.isString(e)||!i.isBoolean(t))throw new Error("Toggle name must be String type, toggle value must be Boolean type");a.set(e,t)},t.getToggle=function(e){return a.get(e)},t.getToggles=function(){const e={};return a.forEach((t,s)=>{e[s]=t}),e},t.clearToggles=function(){a.clear()}},QpzK:function(e,t,s){"use strict";s.r(t)},R6T4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("MC1S"),r=s("8unJ"),l=i.__importDefault(s("gTAB")),u=i.__importDefault(s("Pfoe")),d=s("2yjE"),c=s("0x+l");s("Ggyl");class p extends a.Component{constructor(){super(...arguments),this.onAnswerChange=e=>{const{answer:t}=this.props,s={...t,answerText:{rawText:e.toBbML()}};this.props.onAnswerChange(s)},this.onDelete=()=>{this.props.onDistractorDeletion(this.props.answer.ui.id)}}render(){const{answer:e,canDeleteDistractor:t,editMode:s,hasRemoveAnswerPermissions:i,index:n,localize:r,question:p,questionTitle:m}=this.props,f=l.default.isInactive(s),h=n+1,g=`distractor-header-${p.id}-${n}`,b=`${d.QUESTION_TITLE_ID_PREFIX}${p.id} ${g}`,_=r.translate("assessments.canvas.question.matching.deleteDistractorAriaLabel",{questionTitle:m,distractorNumber:h});return a.default.createElement("div",{className:`matching-distractor\n                ${f?"matching-distractor--read":"matching-distractor--edit"}`},a.default.createElement("div",{className:"matching-distractor__answer"},a.default.createElement("div",{className:"matching-distractor__text"},a.default.createElement("div",{id:g,className:"sr-only"},r.translate("assessments.canvas.question.matching.headers.distractor",{distractorNumber:h})),a.default.createElement(u.default,Object.assign({},this.props,{ariaLabelledBy:b,bbml:e.answerText.rawText,id:`distractor-${e.ui.id}`,isReadOnly:f,onChange:this.onAnswerChange,placeholder:r.translate("assessments.canvas.question.matching.placeholders.distractor",{distractorNumber:h}),toolbarSet:"minimal",ariaRequired:!0})))),!f&&i&&a.default.createElement("div",{className:"matching-distractor__delete"},a.default.createElement(o.IconButton,{icon:a.default.createElement(c.Trash,null),onClick:this.onDelete,className:"matching-distractor__delete-button",disabled:!t(),ariaLabel:_,"aria-describedby":`bb-editor${e.id}`,analyticsId:"assessments.canvas.question.matching.deleteDistractor"})))}}p.propTypes={answer:n.default.object.isRequired,canDeleteDistractor:n.default.func.isRequired,editMode:n.default.number.isRequired,hasRemoveAnswerPermissions:n.default.bool.isRequired,index:n.default.number.isRequired,localize:n.default.object.isRequired,onAnswerChange:n.default.func.isRequired,onDistractorDeletion:n.default.func.isRequired,question:n.default.object.isRequired,questionTitle:n.default.string.isRequired},t.UnwrappedMatchingDistractor=p,t.default=r.localizedComponentWrapper(p)},"RW+D":function(e,t,s){"use strict";s.r(t)},RtIR:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("kBJj"),a=s("JfV0"),n=s("aPd7"),o=s("zGdY");t.default=function(e,t,s,r="assessments.canvas"){const l=`${r}.${e}.button${{FILE:"File",TEXT:"Text",default:"Question"}[t.subType||"default"]}${a.Questions.isQuestionBlock(t)?"Block":""}`;let u=s;if(!s&&t.questionText){const e=t.questionText.rawText,s=n.getPlainTextFromBbML(e).substring(0,180);if(t.subType===o.QuestionSubType.File){const t=n.parseFilesFromBbML(e)[0];if(t){const e=t.bbfile;u=i.getFileNameWithTypeExtension(e.linkName,e.mimeType)}else u=s}else u=s}return{string:l,relation:u}}},S0GT:function(e,t,s){"use strict";s.r(t)},S9Gz:function(e,t,s){"use strict";s.r(t)},SIAs:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=i.__importDefault(s("Pfoe"));s("fTte");const r=e=>{const{localize:t,question:s,questionTextClassName:i}=e;return a.default.createElement("div",{className:"readonly-essay-question"},a.default.createElement("div",{className:i},a.default.createElement(o.default,{id:s.id,bbml:s.questionText.rawText,isReadOnly:!0,refreshBbml:!0})),a.default.createElement("div",{className:"readonly-answer__container"},a.default.createElement("div",{className:"readonly-essay-question__instructions readonly-answer__instructions readonly-answer__main"},t.translate("assessments.canvas.question.essay.instructions"))))};r.propTypes={localize:n.default.object.isRequired,question:n.default.object.isRequired,questionTextClassName:n.default.string.isRequired},t.default=r},Sa8I:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Sf9Z");t.TimeLimitOverriddenByDueDateBanner=i.TimeLimitOverriddenByDueDateBanner},Sf9Z:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importStar(s("ERkP")),a=s("zTL+"),n=s("IVC4"),o=s("8unJ"),r=s("U9G1");t.TimeLimitOverriddenByDueDateBanner=o.localizedComponentWrapper(({localize:e})=>{const[t,s]=i.useState(!0),{bannerClass:o,iconWrapperClass:l,iconClass:u}=r.useStyles();if(!t)return null;const d=e.translate("banners.autoSubmissionAssessments.timeLimitOverriddenByDueDate.notice"),c=e.translate("banners.autoSubmissionAssessments.timeLimitOverriddenByDueDate.dismissButton");return i.createElement(a.AnalyticsBanner,{severity:"warning",icon:i.createElement(n.Attention,{className:u}),classes:{root:o,icon:l,action:l},onClose:()=>s(!1),closeText:c},i.createElement("span",{className:"js-banner-contents"},d))})},Syma:function(e,t,s){"use strict";s.r(t)},TAB1:function(e,t,s){"use strict";s.r(t)},TIvv:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("vN+o");t.default=i.default,t.getPluggableQuestionHeaderProps=i.getPluggableQuestionHeaderProps},Tibe:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=i.__importDefault(s("Ag5V")),r=i.__importDefault(s("VlbA")),l=s("Vng8"),u=i.__importDefault(s("PCGI")),d=i.__importDefault(s("gTAB")),c=i.__importStar(s("TIvv")),p=i.__importDefault(s("ZfLe")),m=i.__importStar(s("AiU9")),f=s("o7ef");s("hp7Q"),t.QuestionBlock=e=>{const t=t=>{e.onQuestionChange(t,l.hasQuestionBlockQuestionChanged)},s={...e,onQuestionChange:t},i=d.default.isActive(e.editMode),n=e.localize.translate(`${f.LOCALE_KEY_BASE}.editTitle`),p={...c.getPluggableQuestionHeaderProps(e,t),...i&&{questionTitle:n},hideFullCreditCheckbox:!0,points:e.question.pointsPerQuestion};return a.default.createElement(a.default.Fragment,null,a.default.createElement(u.default,{editMode:e.editMode,question:e.question},a.default.createElement(c.default,Object.assign({},p)),a.default.createElement(m.default,Object.assign({},m.getQuestionControlProps(e)))),i?a.default.createElement(o.default,Object.assign({},s)):a.default.createElement(r.default,Object.assign({},s)))},t.QuestionBlock.propTypes={editMode:n.default.number.isRequired,localize:n.default.object.isRequired,onQuestionChange:n.default.func.isRequired,openPoolQuestionPanel:n.default.func.isRequired,question:n.default.object.isRequired,addQuestionsToEmptyPool:n.default.func.isRequired};const h=p.default(t.QuestionBlock);t.default=h},TrYj:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=i.__importDefault(s("cFZT"));s("h2mW");const l=i.__importDefault(s("VE9O")),u=({localize:e})=>a.default.createElement("div",{className:"question-pools-empty-state"},a.default.createElement(r.default,{image:l.default,passedClass:"question-pools-empty-state__image",presentationOnly:!0}),a.default.createElement("h3",{className:"question-pools-empty-state__title"},e.translate("questionPools.emptyState.dueToDeletion.header")),a.default.createElement("div",{className:"question-pools-empty-state__message"},e.translate("questionPools.emptyState.dueToDeletion.message")));u.propTypes={localize:n.default.object.isRequired},t.default=o.localizedComponentWrapper(u)},U9G1:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("Agfx");t.useStyles=i.makeStyles(e=>i.createStyles({bannerClass:{display:"flex",flexWrap:"wrap",marginInlineStart:"-12px",marginInlineEnd:"-12px",[e.breakpoints.up("sm")]:{marginInlineStart:"-30px",marginInlineEnd:"-30px"}},iconWrapperClass:{alignSelf:"flex-start"},iconClass:{color:e.palette.primary.main},actionClass:{flexBasis:"100%",justifyContent:"flex-end"},buttonClass:{flexBasis:"initial"}}))},Ucbz:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("MC1S"),l=i.__importDefault(s("fCe2")),u=s("1OFS"),d=s("0x+l");s("cTTT"),t.KEYWORD_BLOCK_ID="keyword";class c extends a.Component{constructor(e){super(e),this.mainHeading=null,this.focusPanelHeader=()=>{this.mainHeading.focus()},this.keywordPickerOnRenderItem=e=>a.default.createElement(r.TagItem,Object.assign({},e),e.item.name),this.keywordPickerOnChange=e=>{this.props.criteriaConfig.onSetKeywords(e.map(e=>e.key))},this.toggleBlockContentVisibility=e=>{const{blockStateMap:t}=this.state,s=t[e];s.expanded=!s.expanded,this.setState(()=>({blockStateMap:t}))},this.keywordPickerRemoveButtonAriaLabel=e=>this.props.localize.translate("questionPicker.filterPanel.keywordSearch.removeButtonAriaLabel",{item:e.name}),this.getItemAddedStatusMessage=e=>this.props.localize.translate("questionPicker.filterPanel.keywordSearch.addedToList",{text:e}),this.renderFilterPanel=()=>{const{criteriaConfig:e,localize:s,onPanelClose:i,onClearCriteria:n}=this.props,{blockStateMap:o}=this.state,u=e.selectedKeywords&&e.selectedKeywords.length,c=0===l.default(e).length&&!u,p=s.translate("questionPicker.filterPanel.keywordSearch.heading"),m=u?e.selectedKeywords.map(e=>({key:e,name:e})):[],f=o[t.KEYWORD_BLOCK_ID]&&o[t.KEYWORD_BLOCK_ID].expanded,h=f?"open":"close";return a.default.createElement("div",{className:"filter-panel__container"},a.default.createElement("div",{className:"filter-panel__header"},a.default.createElement("div",{className:"filter-panel__title-wrapper"},a.default.createElement("h2",{className:"filter-panel__title",ref:e=>{this.mainHeading=e}},s.translate("questionPicker.filterPanel.header")),a.default.createElement(r.IconButton,{className:"filter-panel__close-button js-close-filter",onClick:i,ariaLabel:s.translate("questionPicker.filterPanel.closeLabel"),"data-is-visible":!0,icon:a.default.createElement(d.Close,null),analyticsId:"questionPicker.filterPanel.closeLabel"})),a.default.createElement(r.Link,{className:"filter-panel__clear-all",disabled:c,onClick:n,analyticsId:"questionPicker.filterPanel.clearAll.link"},s.translate("questionPicker.filterPanel.clearAll"))),e&&e.onSetKeywords&&a.default.createElement("div",{className:"filter-panel__block",id:`${t.KEYWORD_BLOCK_ID}-block`},a.default.createElement("div",{className:"filter-panel__block-header"},a.default.createElement("h2",{className:"filter-panel__block-title"},p),a.default.createElement(r.IconButton,{className:`filter-panel__block-toggle js-block-toggle\n                                filter-panel__block-toggle--${h}`,onClick:()=>this.toggleBlockContentVisibility(t.KEYWORD_BLOCK_ID),ariaLabel:p,"aria-expanded":f,"data-is-visible":!0,icon:a.default.createElement(d.ArrowDown,null),analyticsId:"questionPicker.filterPanel.blockToggle"})),o[t.KEYWORD_BLOCK_ID]&&o[t.KEYWORD_BLOCK_ID].expanded&&a.default.createElement(r.KeywordPicker,{selectedItems:m,onChange:this.keywordPickerOnChange,removeButtonAriaLabel:this.keywordPickerRemoveButtonAriaLabel,inputLabel:s.translate("questionPicker.filterPanel.keywordSearch.placeholderText"),onRenderItem:this.keywordPickerOnRenderItem,getItemAddedStatusMessage:this.getItemAddedStatusMessage,analyticsId:"questionPicker.filterPanel.keywordPicker"})),e&&e.blocks&&e.blocks.map(e=>{const t=o[e.id]&&o[e.id].expanded,s=t?"open":"close";return a.default.createElement("div",{key:e.id,className:"filter-panel__block",id:`${e.id}-block`},a.default.createElement("div",{className:"filter-panel__block-header"},e.name&&a.default.createElement("h2",{className:"filter-panel__block-title"},e.name),a.default.createElement(r.IconButton,{className:`filter-panel__block-toggle js-block-toggle\n                                        filter-panel__block-toggle--${s}`,onClick:()=>this.toggleBlockContentVisibility(e.id),ariaLabel:e.name,"aria-expanded":t,"data-is-visible":!0,icon:a.default.createElement(d.ArrowDown,null),analyticsId:`quesitonPicker.filterPanel.${t?"collapse":"expand"}`})),o[e.id]&&o[e.id].expanded&&a.default.createElement("div",{className:"filter-panel__groups"},e.groups.map(e=>a.default.createElement("fieldset",{key:e.id,className:"filter-panel__group"},a.default.createElement("legend",{className:"filter-panel__group-title"},e.name||""),e.items.map(t=>a.default.createElement("div",{key:t.id,className:"filter-panel__item"},a.default.createElement(r.Checkbox,{id:t.id,className:"filter-panel__item-checkbox",checked:t.selected,onChange:(s,i)=>e.onSelect(t.id,i),label:t.name,analyticsId:"questionPicker.filterPanel"})))))))}))},this.state={blockStateMap:null}}componentDidUpdate(e){!e.isOpen&&this.props.isOpen&&this.focusPanelHeader()}static getDerivedStateFromProps(e,t){const{criteriaConfig:s}=e,{blockStateMap:i}=t;return c.shouldUpdateBlockStateMap(s,i)?c.initBlockStateMap(s):null}render(){return this.props.isOpen?this.renderFilterPanel():null}}t.FilterPanelPure=c,c.propTypes={criteriaConfig:u.CriteriaConfigPropTypes,onClearCriteria:n.default.func.isRequired,onPanelClose:n.default.func.isRequired,localize:n.default.object.isRequired,isOpen:n.default.bool.isRequired},c.shouldUpdateBlockStateMap=(e,s)=>{if(null===s)return!0;const i=e.blocks.map(e=>e.id),a=Object.keys(s).filter(e=>e!==t.KEYWORD_BLOCK_ID);return i.length!==a.length},c.initBlockStateMap=e=>{const s=Object.create({});return e.blocks.forEach(e=>{const t=e.expanded,i=e.id;s[i]={expanded:t}}),s[t.KEYWORD_BLOCK_ID]={expanded:e.isKeywordExpanded},{blockStateMap:s}},t.default=o.localizedComponentWrapper(c)},Udwz:function(e,t,s){"use strict";s.r(t)},UunF:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("E1pj"),r=i.__importDefault(s("Pfoe")),l=i.__importStar(s("jPx/")),u=s("2yjE"),d=s("1Xy2"),c=s("3ZJq");s("OIpQ"),t.ReadonlyMatchingQuestionBase=e=>{const{answersInfo:t,answersInfoLabel:s,hideDistractors:i,localize:n,question:o,UltraWindowSize:p,questionTextClassName:m}=e,f=d.getSelectedScoringOption(o),h=n.translate(`assessments.canvas.question.matching.scoringOptions.${f.key}`),g=n.translate("assessments.canvas.question.matching.scoringOptions.readPlaceholder",{scoringOption:h}),b=o.answers.filter(e=>e.isDistractor);return a.default.createElement("div",{className:"readonly-matching__container"},a.default.createElement("div",{className:m},a.default.createElement(r.default,{id:o.id,bbml:o.questionText.rawText,isReadOnly:!0,refreshBbml:!0})),a.default.createElement("div",{className:"readonly-matching__pairs"},a.default.createElement("div",{className:"readonly-answer__container"},a.default.createElement("div",{className:"readonly-multiple-answer-question__instructions readonly-answer__main readonly-answer__instructions"},!p.isSmallBreakpoint()&&a.default.createElement("div",{className:"readonly-matching__column-titles-container"},a.default.createElement("div",{className:"readonly-matching__column-title"},n.translate("assessments.canvas.question.matching.headers.prompts")),a.default.createElement("div",{className:"readonly-matching__column-title"},n.translate("assessments.canvas.question.matching.headers.answers")))),t&&a.default.createElement("span",{className:"readonly-answer__info-label readonly-answer__info"},s)),a.default.createElement("ol",{className:"readonly-matching__list"},o.prompts.map((e,s)=>((e,s)=>{const i=s+1,d=`answer-header-${o.id}-${i}`,c=`prompt-header-${o.id}-${s}`,m=`${u.QUESTION_TITLE_ID_PREFIX}${o.id} ${c}`,f=p.isSmallBreakpoint()?n.translate("assessments.canvas.question.matching.indexMobile",{pairNumber:i}):n.translate("assessments.canvas.question.matching.index",{pairNumber:i});return a.default.createElement("li",{key:e.id,className:"readonly-matching__list-item readonly-answer__container"},a.default.createElement("div",{className:"readonly-matching-prompt-answer-pair__container readonly-answer__main"},a.default.createElement("div",{className:"readonly-matching-prompt-answer-pair__element readonly-matching-prompt-answer-pair__element-index"},f),a.default.createElement("div",{className:"readonly-matching-prompt-answer-pair__element readonly-matching-prompt-answer-pair__element-prompt"},a.default.createElement("div",{className:"readonly-matching-prompt-answer-pair__text"},a.default.createElement("div",{id:c,className:"sr-only"},n.translate("assessments.canvas.question.matching.headers.prompt",{pairNumber:i})),a.default.createElement(r.default,{ariaLabelledBy:m,bbml:e.promptText.rawText,id:`prompt-${e.id}`,isReadOnly:!0,ariaRequired:!0}))),p.isSmallBreakpoint()&&a.default.createElement("div",{className:"\n                        readonly-matching-prompt-answer-pair__element\n                        readonly-matching-prompt-answer-pair__element-answer-label\n                    "},n.translate("assessments.canvas.question.matching.answerLabel")),a.default.createElement("div",{className:"readonly-matching-answer"},a.default.createElement("div",{className:"readonly-matching-answer__text"},a.default.createElement("div",{id:d,className:"sr-only"},n.translate("assessments.canvas.question.matching.headers.answer",{pairNumber:i})),a.default.createElement(r.default,{ariaLabelledBy:m,bbml:o.answers[e.matchingAnswerIndex].answerText.rawText,id:l.getAnswerEditorId(e.id),isReadOnly:!0,ariaRequired:!0})))),t&&a.default.createElement("div",{className:"readonly-matching-question__answers-info readonly-answer__info"},t[s]))})(e,s))),!i&&b.length>0&&a.default.createElement("div",{className:"readonly-matching__distractors"},a.default.createElement("div",{className:"readonly-matching__distractors-list"},a.default.createElement("div",{className:"readonly-matching__distractors-list-label"},a.default.createElement("span",null,n.translate("assessments.canvas.question.matching.additionalAnswers"))),a.default.createElement("ol",{className:"readonly-matching__list matching__distractors-list-items"},b.map((e,t)=>((e,t)=>{const s=t+1,i=`distractor-header-${o.id}-${t}`,l=`${u.QUESTION_TITLE_ID_PREFIX}${o.id} ${i}`;return a.default.createElement("li",{className:"readonly-matching__distractors-list-items-item",key:e.ui.id},a.default.createElement("div",{className:"readonly-matching-distractor"},a.default.createElement("div",{className:"readonly-matching-distractor__answer"},a.default.createElement("div",{className:"readonly-matching-distractor__text"},a.default.createElement("div",{id:i,className:"sr-only"},n.translate("assessments.canvas.question.matching.headers.distractor",{distractorNumber:s})),a.default.createElement(r.default,{ariaLabelledBy:l,bbml:e.answerText.rawText,id:`distractor-${e.ui.id}`,isReadOnly:!0,ariaRequired:!0})))))})(e,t))))),a.default.createElement("div",{className:"readonly-matching-question-scoring-options__text"},g)),a.default.createElement(c.AutomatedQuestionFeedbackRead,{question:o}))},t.ReadonlyMatchingQuestionBase.propTypes={answersInfo:n.default.array,answersInfoLabel:n.default.string,hideDistractors:n.default.bool,question:n.default.object.isRequired,questionTextClassName:n.default.string.isRequired,localize:n.default.object.isRequired,UltraWindowSize:n.default.object.isRequired},t.default=o.windowResizingResponsiveComponentWrapper(t.ReadonlyMatchingQuestionBase)},UyCi:function(e,t,s){"use strict";s.r(t)},VE9O:function(e,t){e.exports='<svg viewBox="0 0 200 200" enable-background="new 0 0 220 200" xml:space="preserve" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><rect id="path-1" x="38" y="45" width="123" height="98"></rect><filter x="-0.4%" y="-0.5%" width="100.8%" height="101.0%" filterUnits="objectBoundingBox" id="filter-2"><feOffset dx="-1" dy="1" in="SourceAlpha" result="shadowOffsetInner1"></feOffset><feComposite in="shadowOffsetInner1" in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowInnerInner1"></feComposite><feColorMatrix values="0 0 0 0 1 0 0 0 0 0.619607843 0 0 0 0 0.37254902 0 0 0 1 0" type="matrix" in="shadowInnerInner1"></feColorMatrix></filter><rect id="path-3" x="49" y="51" width="101" height="54"></rect><rect id="path-4" x="4.36879433" y="0.4" width="51.6312057" height="5.6"></rect><filter x="-1.0%" y="-8.9%" width="101.9%" height="117.9%" filterUnits="objectBoundingBox" id="filter-5"><feOffset dx="-1" dy="1" in="SourceAlpha" result="shadowOffsetInner1"></feOffset><feComposite in="shadowOffsetInner1" in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowInnerInner1"></feComposite><feColorMatrix values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0" type="matrix" in="shadowInnerInner1"></feColorMatrix></filter><path d="M1.3624191,8.8830687 C19.7046892,31.039105 47.4182328,45.1543624 78.4285714,45.1543624 C109.43891,45.1543624 137.152454,31.039105 155.494724,8.8830687 L1.3624191,8.8830687 Z" id="path-6"></path><filter x="-0.3%" y="-1.4%" width="100.6%" height="102.8%" filterUnits="objectBoundingBox" id="filter-7"><feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetInner1"></feOffset><feComposite in="shadowOffsetInner1" in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowInnerInner1"></feComposite><feColorMatrix values="0 0 0 0 0.850980392 0 0 0 0 0.639215686 0 0 0 0 0.247058824 0 0 0 1 0" type="matrix" in="shadowInnerInner1"></feColorMatrix></filter><path d="M2.7181596,9.45633792 C20.6841572,26.6893216 45.0713141,37.2796421 71.9319728,37.2796421 C98.7926315,37.2796421 123.179788,26.6893216 141.145786,9.45633792 L2.7181596,9.45633792 Z" id="path-8"></path><filter x="-0.4%" y="-1.8%" width="100.7%" height="103.6%" filterUnits="objectBoundingBox" id="filter-9"><feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetInner1"></feOffset><feComposite in="shadowOffsetInner1" in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowInnerInner1"></feComposite><feColorMatrix values="0 0 0 0 0.850127551 0 0 0 0 0.639317415 0 0 0 0 0.246075431 0 0 0 1 0" type="matrix" in="shadowInnerInner1"></feColorMatrix></filter><path d="M33.4617406,174.651613 L166.538259,174.651613 C148.861813,190.418044 125.549899,200 100,200 C74.4501008,200 51.1381873,190.418044 33.4617406,174.651613 Z" id="path-10"></path><filter x="-0.4%" y="-2.0%" width="100.8%" height="103.9%" filterUnits="objectBoundingBox" id="filter-11"><feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetInner1"></feOffset><feComposite in="shadowOffsetInner1" in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowInnerInner1"></feComposite><feColorMatrix values="0 0 0 0 1 0 0 0 0 0.619607843 0 0 0 0 0.37254902 0 0 0 1 0" type="matrix" in="shadowInnerInner1"></feColorMatrix></filter><rect id="path-12" x="1.58222222" y="8" width="87.4177778" height="8"></rect><filter x="-0.3%" y="-3.1%" width="100.6%" height="106.2%" filterUnits="objectBoundingBox" id="filter-13"><feOffset dx="-0.5" dy="0.5" in="SourceAlpha" result="shadowOffsetInner1"></feOffset><feComposite in="shadowOffsetInner1" in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowInnerInner1"></feComposite><feColorMatrix values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0" type="matrix" in="shadowInnerInner1"></feColorMatrix></filter></defs><g id="200x200-version" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Banks_zeroState_illustration"><circle id="Oval" fill="#B3D0DD" fill-rule="evenodd" cx="100" cy="100" r="100"></circle><path d="M6.38116309,135.22687 L193.618837,135.22687 C179.370645,173.074325 142.829737,200 100,200 C57.1702633,200 20.6293549,173.074325 6.38116947,135.226871 Z" id="Combined-Shape" fill="#E3F4FC" fill-rule="evenodd"></path><path d="M87.6394813,36.5113231 L119.013431,5.23090674 L144.05857,33.0338491 L114.130903,63.0027453 L87.6394813,36.5113231 Z" id="Combined-Shape" fill="#758D97" fill-rule="evenodd" opacity="0.435858243"></path><path d="M83.2289256,198.599786 C35.9850833,190.622173 0,149.51347 0,100 C0,93.9801676 0.531917883,88.0845712 1.55131686,82.3576477 L38.5807712,45.3281933 L42.3262652,46.3136685 L63.8023454,24.8375884 L121.615072,141.047971 L83.2289256,198.599786 Z" id="Combined-Shape" fill="#758D97" fill-rule="evenodd" opacity="0.435858243"></path><g id="Rectangle-10"><use fill="#FF7E28" fill-rule="evenodd" xlink:href="#path-1"></use><use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use></g><path d="M37.1751185,177.805593 C28.6169015,170.886524 21.2232713,162.58412 15.3342549,153.238407 L49.4261366,107.649685 L150.723208,107.649685 L184.730334,153.135769 C178.830824,162.523339 171.414416,170.861205 162.824881,177.805593 L37.1751185,177.805593 Z" id="Combined-Shape" fill="#7F7C76" fill-rule="evenodd"></path><path d="M37.3983851,177.805593 C35.3109986,176.123665 33.2926439,174.359517 31.3482404,172.51807 C30.7255385,165.551358 30.2772573,159.31888 30.0033969,153.820638 C29.6620075,146.966628 28.6097964,141.640924 26.8467634,137.843524 L49.4261366,107.649685 L150.723208,107.649685 L184.704685,153.101462 C178.784816,162.507874 171.340408,170.858153 162.718166,177.805593 L37.3983851,177.805593 Z" id="Combined-Shape" fill="#434240" fill-rule="evenodd"></path><rect id="Rectangle-2" fill="#302F2F" fill-rule="evenodd" x="50" y="108" width="101" height="49"></rect><polygon id="Rectangle-2-Copy" fill="#000000" fill-rule="evenodd" points="49.7917276 107.62955 150.323803 107.62955 148.541037 109.410225 101.379737 156.516231 49.7917276 156.516231"></polygon><path d="M184.759762,153.088913 C184.524409,153.463878 184.286636,153.83717 184.046466,154.208768 L150.324823,107.62955 L150.71433,107.62955 L184.759762,153.088913 Z" id="Combined-Shape" fill="#8C8C8C" fill-rule="evenodd"></path><path d="M15.9992386,154.279419 C15.7585584,153.907717 15.5202781,153.534316 15.2844199,153.159238 L49.3825216,107.62955 L49.7720285,107.62955 L15.9992386,154.279419 Z" id="Combined-Shape" fill="#8C8C8C" fill-rule="evenodd"></path><g id="Rectangle-2"><use fill="#FF7E28" fill-rule="evenodd" xlink:href="#path-3"></use><rect stroke="#C16325" stroke-width="1" x="49.5" y="51.5" width="100" height="53"></rect></g><g id="upper-handle" stroke-width="1" fill-rule="evenodd" transform="translate(70.000000, 56.000000)"><polygon id="Rectangle-11" fill="#B95C1E" points="4.44634238 0.389483548 8.16723703 6 7.3370641 7.27588099 48.4081565 7.27588099 49.4510337 6 56 6 51.0396861 12 0.0547627027 12 0.0547627027 7.27588099"></polygon><g id="Rectangle-3"><use fill="#E5E5E5" fill-rule="evenodd" xlink:href="#path-4"></use><use fill="black" fill-opacity="1" filter="url(#filter-5)" xlink:href="#path-4"></use></g></g><g id="Folders" stroke-width="1" fill-rule="evenodd" transform="translate(5.000000, 32.000000)"><g id="back" transform="translate(25.646259, 77.172260)"><g id="Folder-Copy" transform="translate(14.993197, 0.000000)"><path d="M6.141666,4.19374233 L73.9348081,4.19374233 L76.9538761,0 L93.367799,0 L96.049429,4.19374233 L104.3683,4.19374233 L104.3683,4.19374233 C106.577439,4.19374233 108.3683,5.98460333 108.3683,8.19374233 L108.3683,28.9858588 L108.3683,28.9858588 C108.3683,36.7178453 102.100286,42.9858588 94.3682998,42.9858588 L16.141666,42.9858588 L16.141666,42.9858588 C8.40967951,42.9858588 2.141666,36.7178453 2.141666,28.9858588 L2.141666,8.19374233 L2.141666,8.19374233 C2.141666,5.98460333 3.93252701,4.19374233 6.141666,4.19374233 Z" id="Rectangle-5" fill="#FECA69"></path><rect id="Rectangle-5-Copy" fill="#FCD59D" x="0" y="6.01802024" width="110.081633" height="40.8365659" rx="4"></rect></g><g id="Folder-Copy" transform="translate(11.047619, 3.149888)"><path d="M6.13899479,5.25202123 L65.4482227,5.25202123 L68.6580607,0.787472036 L86.1091531,0.787472036 L88.960231,5.25202123 L111.07792,5.25202123 L111.07792,5.25202123 C113.287059,5.25202123 115.07792,7.04288223 115.07792,9.25202123 L115.07792,32.5491013 L115.07792,32.5491013 C115.07792,40.2810878 108.809906,46.5491013 101.07792,46.5491013 L16.1389948,46.5491013 L16.1389948,46.5491013 C8.40700829,46.5491013 2.13899479,40.2810878 2.13899479,32.5491013 L2.13899479,9.25202123 L2.13899479,9.25202123 C2.13899479,7.04288223 3.92985579,5.25202123 6.13899479,5.25202123 Z" id="Rectangle-5" fill="#F5C05E"></path><rect id="Rectangle-5-Copy" fill="#FCD59D" x="0" y="7.20265371" width="116.789116" height="43.1955566" rx="4"></rect></g><g id="Folder-Copy" transform="translate(0.000000, 7.480984)"><path d="M13.2431566,5.5550545 L91.1473497,5.5550545 L94.5916107,0.787472036 L113.317203,0.787472036 L116.376503,5.5550545 L126.430313,5.5550545 L126.430313,5.5550545 C128.639452,5.5550545 130.430313,7.3459155 130.430313,9.5550545 L130.430313,35.6551923 L130.430313,35.6551923 C130.430313,43.3871788 124.162299,49.6551923 116.430313,49.6551923 L23.2431566,49.6551923 L23.2431566,49.6551923 C15.5111702,49.6551923 9.24315665,43.3871788 9.24315665,35.6551923 L9.24315665,9.5550545 L9.24315665,9.5550545 C9.24315665,7.3459155 11.0340176,5.5550545 13.2431566,5.5550545 Z" id="Rectangle-5" fill="#FECA69"></path><path d="M10.4779277,7.64609944 L129.195542,7.64609944 L129.195542,7.64609944 C131.145334,7.64609944 132.811052,9.051918 133.138671,10.973989 L139.666219,49.269724 L139.666219,49.269724 C140.037415,51.4474541 138.57293,53.5137672 136.3952,53.8849636 C136.173164,53.9228099 135.948328,53.9418345 135.72309,53.9418345 L3.95037962,53.9418345 L3.95037962,53.9418345 C1.74124062,53.9418345 -0.0496203762,52.1509735 -0.0496203762,49.9418345 C-0.0496203762,49.716596 -0.0305958044,49.49176 0.00725047406,49.269724 L6.53479857,10.973989 L6.53479857,10.973989 C6.86241757,9.051918 8.52813517,7.64609944 10.4779277,7.64609944 Z" id="Rectangle-5-Copy" fill="#FCD59D"></path><path d="M10.4779277,7.64609944 L21.6946064,7.64609944 L114.766727,15.0787427 L127.63098,28.6501595 L101.663719,53.9418345 L26.1395302,53.9418345 L3.44005511,29.1301899 L6.53479857,10.973989 L6.53479857,10.973989 C6.86241757,9.051918 8.52813517,7.64609944 10.4779277,7.64609944 Z" id="Rectangle-5-Copy" fill="#B99F79"></path></g></g><g id="Test" transform="translate(86.462186, 87.850523) rotate(-9.000000) translate(-86.462186, -87.850523) translate(11.298920, 10.875132)"><path d="M30.3749999,29.265316 L134.376712,42.7601392 L134.376712,42.7601392 C134.924406,42.8312056 135.310788,43.3328095 135.239722,43.8805028 C135.235518,43.9129032 135.229728,43.945078 135.222374,43.9769115 L116.836359,123.565288 L116.836359,123.565288 C116.71787,124.078196 116.22203,124.41142 115.702365,124.327375 L15.7571488,108.163277 L15.7571488,108.163277 C15.2119482,108.075102 14.8414559,107.56165 14.9296309,107.016449 C14.9308997,107.008604 14.932262,107.000774 14.9337174,106.992962 L29.2632364,30.0738601 L29.2632364,30.0738601 C29.3604612,29.5519696 29.8485439,29.1970053 30.3749999,29.265316 Z" id="paper" fill="#FFFFFF" transform="translate(75.108415, 76.810134) rotate(51.000000) translate(-75.108415, -76.810134) "></path><g id="Group" transform="translate(29.683845, 27.770642)"><path d="M0.176045371,27.9329124 L50.5250214,0.175678694" id="Line-3" stroke="#979797" stroke-width="4" stroke-linecap="round"></path><path d="M2.9927713,33.5546306 L45.9478417,10.0136856" id="Line-3-Copy" stroke="#979797" stroke-width="4" stroke-linecap="round"></path><path d="M15.1225911,38.2155336 L33.8132743,27.9786468" id="Line-3-Copy-2" stroke="#D8D8D8" stroke-width="4" stroke-linecap="round"></path><path d="M19.072245,45.6942831 L47.9042026,29.8071381" id="Line-3-Copy-3" stroke="#D8D8D8" stroke-width="4" stroke-linecap="round"></path><path d="M23.0407997,53.5179277 L45.9266979,40.8690617" id="Line-3-Copy-4" stroke="#D8D8D8" stroke-width="4" stroke-linecap="round"></path><ellipse id="Oval-7" fill="#D8D8D8" cx="9.39562494" cy="41.7494817" rx="2.96838452" ry="2.96220182"></ellipse><ellipse id="Oval-7-Copy" fill="#D8D8D8" cx="13.4158984" cy="49.2331732" rx="2.96838452" ry="2.96220182"></ellipse><ellipse id="Oval-7-Copy-2" fill="#44E17D" cx="17.86183" cy="56.6193476" rx="2.96838452" ry="2.96220182"></ellipse></g><g id="Group-Copy" transform="translate(53.430921, 68.130642)"><path d="M0.176045371,27.9329124 L50.5250214,0.175678694" id="Line-3" stroke="#979797" stroke-width="4" stroke-linecap="round"></path><path d="M2.9927713,33.5546306 L20.3432082,23.7227132" id="Line-3-Copy" stroke="#979797" stroke-width="4" stroke-linecap="round"></path><path d="M15.1225911,38.2155336 L34.5180908,27.3613388" id="Line-3-Copy-2" stroke="#D8D8D8" stroke-width="4" stroke-linecap="round"></path><path d="M19.072245,45.6942831 L41.9581432,33.0454171" id="Line-3-Copy-3" stroke="#D8D8D8" stroke-width="4" stroke-linecap="round"></path><path d="M23.0407997,53.5179277 L43.7208325,42.3697695" id="Line-3-Copy-4" stroke="#D8D8D8" stroke-width="4" stroke-linecap="round"></path><ellipse id="Oval-7" fill="#44E17D" cx="9.39562494" cy="41.7494817" rx="2.96838452" ry="2.96220182"></ellipse><ellipse id="Oval-7-Copy" fill="#D8D8D8" cx="13.4158984" cy="49.2331732" rx="2.96838452" ry="2.96220182"></ellipse><ellipse id="Oval-7-Copy-2" fill="#44E17D" cx="17.86183" cy="56.6193476" rx="2.96838452" ry="2.96220182"></ellipse></g></g><g id="Front" transform="translate(16.571429, 122.845638)"><g id="Folder-Copy"><path d="M0.261615564,7.5296394 C18.5856032,30.4626702 46.791373,45.1543624 78.4285714,45.1543624 C110.167108,45.1543624 138.452199,30.3684002 156.771306,7.30901233 C155.898331,7.13859589 154.996331,7.04930351 154.073476,7.04930351 L154.073476,7.04930351 L123.738863,7.04930351 L119.241248,0 L91.7119047,0 L86.6483403,7.04930351 L3.91073846,7.04930351 L3.91073846,7.04930351 C2.64836982,7.04930351 1.42502442,7.21638184 0.261609274,7.5296315 Z" id="Combined-Shape" fill="#F5C05E"></path><g id="Combined-Shape"><use fill="#FCD59D" fill-rule="evenodd" xlink:href="#path-6"></use><use fill="black" fill-opacity="1" filter="url(#filter-7)" xlink:href="#path-6"></use></g></g><g id="Folder" transform="translate(6.496599, 7.874720)"><path d="M3.26727841,9.97909478 C21.1795376,26.9032425 45.3439862,37.2796421 71.9319728,37.2796421 C99.0958095,37.2796421 123.729992,26.4489051 141.751676,8.8702754 L137.6229,2.36241611 L108.045341,2.36241611 L102.605041,9.97909478 L3.26727841,9.97909478 Z" id="Combined-Shape" fill-opacity="0.208956069" fill="#000000"></path><path d="M0.849604979,7.61667867 C18.9746354,25.9325672 44.1281784,37.2796421 71.9319728,37.2796421 C100.670794,37.2796421 126.578113,25.1565422 144.818933,5.74534076 L141.173921,0 L111.596361,0 L106.156061,7.61667867 L0.849604979,7.61667867 Z" id="Combined-Shape" fill="#FECA69"></path><g id="Combined-Shape"><use fill="#FCD59D" fill-rule="evenodd" xlink:href="#path-8"></use><use fill="black" fill-opacity="1" filter="url(#filter-9)" xlink:href="#path-8"></use></g></g></g></g><g id="Combined-Shape"><use fill="#FF7E28" fill-rule="evenodd" xlink:href="#path-10"></use><use fill="black" fill-opacity="1" filter="url(#filter-11)" xlink:href="#path-10"></use></g><g id="handle" stroke-width="1" fill-rule="evenodd" transform="translate(55.000000, 184.000000)"><polygon id="Rectangle-4-Copy-4" fill="#B95C1E" points="77.9014241 0 77.9014241 4.00181792 73.9688889 4.00181792"></polygon><path d="M3.14475113,6.8194886 C2.15747396,6.36166751 1.17881745,5.88811086 0.209095539,5.3991361 L5.51475745,0 L5.51475745,6.8194886 L3.14475113,6.8194886 Z" id="Combined-Shape" fill="#B95C1E"></path><path d="M10.6816022,4 L12.6311403,0 L5.51114032,0 L3.5616022,4 L1.58222222,8 L89,8 L87.0222222,4 L86.9939826,4 L85.0444444,0 L77.9244444,0 L79.8739826,4 L10.6816022,4 Z" id="Combined-Shape" fill="#F8F8F8"></path><polygon id="Rectangle-4-Copy-2" fill="#E5E5E5" points="12.6311403 0 12.6577778 4.00328734 10.68 4.00328734"></polygon><polygon id="Rectangle-4-Copy-3" fill="#666666" transform="translate(78.913333, 2.003913) scale(-1, 1) translate(-78.913333, -2.003913) " points="79.9022222 0.00453802282 79.9022222 4.00328734 77.9244444 4.00328734"></polygon><g id="Rectangle-3-Copy-2"><use fill="#E5E5E5" fill-rule="evenodd" xlink:href="#path-12"></use><use fill="black" fill-opacity="1" filter="url(#filter-13)" xlink:href="#path-12"></use></g></g><g id="books" stroke-width="1" fill-rule="evenodd" transform="translate(58.000000, 25.000000)"><g id="green-book" transform="translate(0.000000, 7.058824)" fill-rule="nonzero"><path d="M0.626017821,5.18805021e-07 L53.8375326,5.18805021e-07 L53.8375326,12.9411765 L0.626017821,12.9411765 C0.280277725,12.9411765 0,12.6498396 0,12.2904574 L0,0.618183657 C0.0166935654,0.271567171 0.292141551,-0.000433552274 0.626017821,5.18805021e-07 Z" id="Shape" fill="#44E17D"></path><path d="M0.617701159,5.18805021e-07 L10.655345,5.18805021e-07 L10.655345,12.9411765 L0.617701159,12.9411765 C0.276554229,12.9411765 0,12.6498396 0,12.2904574 L0,0.618183657 C0.016471791,0.271567171 0.288260443,-0.000433552274 0.617701159,5.18805021e-07 L0.617701159,5.18805021e-07 Z" id="Shape" fill="#2BAF56"></path><rect id="Rectangle-path" fill="#F7EDDD" x="12.3377679" y="1.68797954" width="42.0605724" height="9.00255754"></rect><rect id="Rectangle-path" fill="#2BAF56" x="12.3377679" y="1.68797954" width="42.0605724" height="1.68797954"></rect><rect id="Rectangle-path" fill="#FFFFFF" x="12.3377679" y="5.62659847" width="42.0605724" height="1.68797954"></rect><rect id="Rectangle-path" fill="#FFFFFF" x="12.3377679" y="9.00255754" width="42.0605724" height="1.68797954"></rect></g><g id="yellowBook" transform="translate(5.124481, 0.000000)" fill-rule="nonzero"><path d="M0.637581271,0 L40.2074689,0 L40.2074689,7.05882353 L0.637581271,7.05882353 C0.285454858,7.05882353 0,6.78068554 0,6.43758493 L0,0.613473112 C0.00436296596,0.273408952 0.28854391,-2.65706133e-05 0.637581271,0 Z" id="Shape" fill="#FDE000"></path><path d="M0.623753345,0 L10.7597452,0 L10.7597452,7.05882353 L0.623753345,7.05882353 C0.279263885,7.05882353 0,6.78068554 0,6.43758493 L0,0.613473112 C0.00426834152,0.273408952 0.282285941,-2.65706133e-05 0.623753345,0 Z" id="Shape" fill="#D1AB2A"></path><rect id="Rectangle-path" fill="#F7EDDD" x="13.0249547" y="1.62895928" width="27.1825142" height="3.80090498"></rect><rect id="Rectangle-path" fill="#D1AB2A" x="13.0249547" y="1.62895928" width="27.1825142" height="1.62895928"></rect><rect id="Rectangle-path" fill="#FFFFFF" x="13.0249547" y="3.80090498" width="27.1825142" height="1.62895928"></rect></g></g><g id="Globe" stroke-width="1" fill-rule="evenodd" transform="translate(113.000000, 0.000000)"><g id="Base" transform="translate(13.658537, 39.911290)"><rect id="Rectangle-7-Copy-2" fill="#D8A448" transform="translate(5.853659, 2.740074) rotate(90.000000) translate(-5.853659, -2.740074) " x="3.51219512" y="1.95719603" width="4.68292683" height="1.56575682"></rect><path d="M5.13442926,-0.0614461616 L6.30516097,-0.0614461616 C6.48364553,0.199513309 6.57288781,0.46047278 6.57288781,0.72143225 C6.57288781,0.982391721 6.48364553,1.24335119 6.30516097,1.50431066 L5.13442926,1.50431066 L5.13442926,-0.0614461616 Z" id="Rectangle-7-Copy-2" fill="#BF903D" transform="translate(5.853659, 0.721432) rotate(90.000000) translate(-5.853659, -0.721432) "></path><path d="M11.7073171,5.08870968 C9.96013561,3.00103391 8.0089161,1.95719603 5.85365854,1.95719603 C3.69840098,1.95719603 1.74718146,3.00103391 0,5.08870968 L11.7073171,5.08870968 Z" id="Oval-3" fill="#D8A448"></path><path d="M11.7073171,5.08870968 C10.7805559,3.95036984 9.76011348,3.11897262 8.64598975,2.59451801 C8.02474978,2.77793081 6.9512694,3.60932803 5.4255486,5.08870968 L11.7073171,5.08870968 Z" id="Oval-3" fill="#FCD590"></path></g><g><path d="M15.3683249,5.02459565 C27.1831523,5.02459565 36.8432686,15.0767798 36.8432686,26.4995393 C36.8432686,37.9222989 28.0529154,47.5550604 16.2380881,47.5550604" id="Shape" stroke="#FCD590" stroke-width="2" transform="translate(26.105797, 26.289828) rotate(45.000000) translate(-26.105797, -26.289828) "></path><path d="M22.8424361,31.8791457 C19.3246145,37.9638962 12.8714252,42.1159933 5.1145692,42.1159933" id="Shape" stroke="#D8A448" stroke-width="2" stroke-linecap="round" transform="translate(13.978503, 36.997570) rotate(45.000000) translate(-13.978503, -36.997570) "></path><rect id="Rectangle-7" fill="#FEC34C" transform="translate(33.036821, 3.420854) rotate(-45.000000) translate(-33.036821, -3.420854) " x="30.6953578" y="2.63053111" width="4.68292683" height="1.58064516"></rect><ellipse id="Oval-2" fill="#1987D1" cx="18.5365854" cy="18.7701613" rx="18.5365854" ry="18.7701613"></ellipse><path d="M21.940874,0.315853866 C30.552379,1.93448527 37.0731707,9.58122143 37.0731707,18.7701613 C37.0731707,24.0954191 34.8831371,28.9027217 31.3653276,32.3189462 C27.0577344,32.1759401 22.2742677,30.3799897 22.0050856,26.3225796 C21.4083893,17.3285149 30.0945807,20.7164023 30.0945807,13.7428542 C30.0945807,7.40346882 21.2924932,6.16135566 21.940874,0.315853866 Z" id="Combined-Shape" fill="#4DC238"></path><path d="M26.6800113,1.90360471 C32.8350308,4.95643965 37.0731707,11.3621286 37.0731707,18.7701613 C37.0731707,22.0580902 36.2383094,25.1485698 34.7715336,27.8360958 C30.320313,29.7262261 24.8191964,30.7072708 25.5172807,26.3225796 C26.2631933,21.6374771 32.8795186,22.8220661 32.8795186,15.848518 C32.8795186,10.2426835 27.3095472,6.91525857 26.6800113,1.90360471 Z" id="Combined-Shape" fill="#80F56B"></path><path d="M10.7009387,35.7858177 C4.37986867,32.79606 0,26.3010423 0,18.7701613 C0,12.6295624 2.91199729,7.17766722 7.41394341,3.75318298 C8.65639587,8.42183806 11.1760551,8.15049147 12.2231651,11.4044184 C14.1952377,17.5326958 6.51207906,15.9751035 6.17764843,19.5029994 C5.65616587,25.0040987 16.5766242,23.7121363 13.3586473,29.7898801 C11.5836257,33.1423364 11.0058718,34.5416992 10.7009387,35.7858177 Z" id="Combined-Shape" fill="#4DC238"></path><path d="M6.66716147,33.1882189 C2.59259074,29.7450988 0,24.5642111 0,18.7701613 C0,13.8852639 1.84280933,9.43620122 4.8628767,6.09691103 C5.8767908,9.18759001 7.01470396,10.3066871 6.55287047,13.3749904 C6.10280034,16.3651409 2.54323845,17.9783532 2.35205238,20.1502551 C1.94051061,24.8254302 4.88977056,28.7334917 6.55287047,30.6402329 C7.26426623,31.4558469 7.12571,32.2439863 6.66716147,33.1882189 Z" id="Combined-Shape-Copy" fill="#80F56B"></path><path d="M19.3536108,13.5546529 C20.6467653,13.5546529 20.2926829,11.3595851 20.2926829,9.28629032 C20.2926829,7.21299556 17.3068229,5.25190993 16.0136684,5.25190993 C14.7205139,5.25190993 16.0136684,7.32998666 16.0136684,9.40328142 C16.0136684,11.4765762 18.0604563,13.5546529 19.3536108,13.5546529 Z" id="Oval-6" fill="#4DC238"></path><path d="M18.7186398,11.7561157 C19.451549,11.7561157 19.250869,10.5120375 19.250869,9.33697546 C19.250869,8.16191347 17.9137169,6.8962069 17.1808077,6.8962069 C16.4478985,6.8962069 17.4573775,8.16191347 17.4573775,9.33697546 C17.4573775,10.5120375 17.9857307,11.7561157 18.7186398,11.7561157 Z" id="Oval-6" fill="#80F56B"></path><path d="M7.75148879,3.50238961 C10.7898509,1.29775236 14.5135509,0 18.5365854,0 C28.7740588,0 37.0731707,8.40368746 37.0731707,18.7701613 C37.0731707,22.8438892 35.7915676,26.6145109 33.6143649,29.6911588 C30.5760028,31.895796 26.8523028,33.1935484 22.8292683,33.1935484 C12.5917949,33.1935484 4.29268293,24.7898609 4.29268293,14.4233871 C4.29268293,10.3496591 5.57428606,6.57903748 7.75148879,3.50238961 Z" id="Combined-Shape" fill="#FFFFFF" opacity="0.248584692"></path><rect id="Rectangle-7-Copy" fill="#BF903D" transform="translate(3.768528, 33.848273) rotate(-45.000000) translate(-3.768528, -33.848273) " x="1.42706507" y="33.0579505" width="4.68292683" height="1.58064516"></rect></g></g></g></g></svg>'},VPjn:function(e,t,s){"use strict";s.r(t)},VQXm:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("MC1S"),r=s("nBlB"),l=i.__importDefault(s("gTAB")),u=i.__importDefault(s("Pfoe")),d=s("2yjE"),c=i.__importDefault(s("o8si")),p=s("0x+l");s("/zhm");class m extends a.Component{constructor(e){super(e),this.translationKeyPrefix="assessments.canvas.question.multipleAnswer",this.handleEditorFocus=()=>{this.setState({editorFocused:!0})},this.handleEditorBlur=()=>{this.setState({editorFocused:!1})},this.onTextChange=e=>{const{answer:t,onAnswerChange:s}=this.props;s({...t,answerText:{rawText:e.toBbML()}})},this.onCorrectAnswerChange=(e,t)=>{const{answer:s,onAnswerChange:i}=this.props;i({...s,correctAnswer:t})},this.onDelete=()=>{const{onAnswerDeletion:e,answer:t}=this.props;e(t.id)},this.state={editorFocused:!1}}getChoiceTextClassName(){const{answer:e,activeEditorId:t,canEnterEditMode:s}=this.props;let i="multiple-answer-li__text";return!(e.id===t)&&s&&(i+=" -is-clickable"),i}render(){const{answer:e,canDeleteAnswer:t,dragButtonAriaLabel:s,dragPointRef:i,editMode:n,hasAddOrRemoveAnswerPermissions:r,hasReorderAnswersPermissions:m,hasSubmissions:f,index:h,localize:g,question:b,questionTitle:_}=this.props,y=l.default.isInactive(n),E=h+1,C=`answer-header-${b.id}-${h}`,w=`${d.QUESTION_TITLE_ID_PREFIX}${b.id} ${C}`,S=g.translate(`${this.translationKeyPrefix}.answerPlaceholder`,{answerNumber:E}),P=g.translate(`${this.translationKeyPrefix}.checkboxAriaLabel`,{questionTitle:_,answerNumber:E}),A=g.translate(`${this.translationKeyPrefix}.trashButtonAriaLabel`,{questionTitle:_,answerNumber:E}),R=g.translate("assessments.canvas.drag.instructions"),v=g.translate(`${this.translationKeyPrefix}.correctAnswer`);let q="multiple-answer-li__delete";this.state.editorFocused&&(q+=" multiple-answer-li--editor-focused");let T="multiple-answer-li__dnd";return this.state.editorFocused&&(T+=" multiple-answer-li--editor-focused"),a.default.createElement("div",{className:"multiple-answer-li"},a.default.createElement("div",{className:"multiple-answer-li__answer"},!y&&a.default.createElement(o.Checkbox,{checked:e.correctAnswer,onChange:this.onCorrectAnswerChange,ariaLabel:P,ariaDescribedBy:`bb-editor${e.id}`,analyticsId:"assessments.canvas.question.multipleAnswer.correctAnswerChange"}),a.default.createElement("div",{className:this.getChoiceTextClassName()},a.default.createElement("div",{id:C,className:"sr-only"},g.translate("assessments.canvas.question.multipleAnswer.answerHeader",{answerNumber:E})),a.default.createElement(u.default,Object.assign({},this.props,{ariaLabelledBy:w,bbml:e.answerText.rawText,id:e.id,isReadOnly:y,onChange:this.onTextChange,onFocus:this.handleEditorFocus,onBlur:this.handleEditorBlur,placeholder:S,toolbarSet:"minimal"}))),y&&e.correctAnswer&&a.default.createElement("span",{className:"multiple-answer-li__correct"},v),!y&&!f&&a.default.createElement("div",null,m&&a.default.createElement(c.default,{className:T,dragPointRef:i,title:R,ariaLabel:s,ariaDescribedBy:`bb-editor${e.id}`,analyticsId:"assessments.canvas.question.reorderAnswers.dragAndDrop"}),r&&a.default.createElement(o.IconButton,{icon:a.default.createElement(p.Trash,null),onClick:this.onDelete,className:q,disabled:!t(e),ariaLabel:A,"aria-describedby":`bb-editor${e.id}`,analyticsId:"assessments.canvas.question.deleteAnswer"}))))}}t.MultipleAnswerChoice=m,m.propTypes={answer:n.default.object.isRequired,canEnterEditMode:n.default.bool.isRequired,dragButtonAriaLabel:n.default.string,index:n.default.number.isRequired,question:n.default.object.isRequired,questionTitle:n.default.string.isRequired,onAnswerChange:n.default.func.isRequired,onAnswerDeletion:n.default.func.isRequired,editMode:n.default.number.isRequired,hasAddOrRemoveAnswerPermissions:n.default.bool.isRequired,hasReorderAnswersPermissions:n.default.bool.isRequired,hasSubmissions:n.default.bool.isRequired,localize:n.default.object.isRequired,startEditMode:n.default.func.isRequired,canDeleteAnswer:n.default.func.isRequired,dragPointRef:n.default.func,activeEditorId:n.default.string,pluginsConfig:n.default.object.isRequired},t.DndMultipleAnswerChoice=r.DragNDropItem(m)},VlbA:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("uxze"),r=s("pNgc"),l=s("o7ef");t.onDescriptionLinkClick=({question:e,openPoolQuestionPanel:t,addQuestionsToEmptyPool:s})=>{e.numOfAvailableQuestions>0?t(e.id):s(e.id)};const u=e=>a.default.createElement("div",{className:`${l.CLASS_BASE} ${l.CLASS_BASE}--read`},a.default.createElement("div",{className:`${l.CLASS_BASE}__content`},a.default.createElement(r.ContentCollection,{className:`${l.CLASS_BASE}__icon`,color:"primary"}),a.default.createElement("div",{className:`${l.CLASS_BASE}__content-description-wrapper`},a.default.createElement("div",{className:`${l.CLASS_BASE}__content-description`},e.localize.translate(`${l.LOCALE_KEY_BASE}.description.read.plural`,{questionsDisplayed:e.question.numOfQuestionsToChoose,questionsTotal:e.question.numOfAvailableQuestions})),a.default.createElement(o.Link,{className:`${l.CLASS_BASE}__view-questions-link`,disabled:null!=e.questionBeingEditedId,onClick:()=>t.onDescriptionLinkClick(e)},e.localize.translate(`${l.LOCALE_KEY_BASE}.viewQuestions`,{questionsTotal:e.question.numOfAvailableQuestions})))));u.propTypes={addQuestionsToEmptyPool:n.default.func.isRequired,localize:n.default.object.isRequired,openPoolQuestionPanel:n.default.func.isRequired,question:n.default.object.isRequired,questionBeingEditedId:n.default.string},t.default=u},Vng8:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importStar(s("nsO7")),a=s("JfV0"),n=s("zGdY"),o=e=>!!e.questionText.rawText&&-1!==Math.sign(e.points);t.havePointsChangedToPositive=(e,t)=>e!==t&&-1!==Math.sign(t),t.hasFullCreditFlagChanged=(e,t)=>i.isUndefined(e.fullCredit)?!0===t.fullCredit:e.fullCredit!==t.fullCredit;t.hasScoringOptionsChanged=(e,t)=>e.allowPartialCredit!==t.allowPartialCredit||e.allowNegativeScoreForIncorrectAnswers!==t.allowNegativeScoreForIncorrectAnswers||e.allowNegativeOverallScore!==t.allowNegativeOverallScore;const r=(e,t)=>e.partialCreditTolerance&&t.partialCreditTolerance&&(e.partialCreditTolerance.type!==t.partialCreditTolerance.type||e.partialCreditTolerance.value!==t.partialCreditTolerance.value),l=(e,t)=>e.correctAnswerTolerance&&t.correctAnswerTolerance&&(e.correctAnswerTolerance.type!==t.correctAnswerTolerance.type||e.correctAnswerTolerance.value!==t.correctAnswerTolerance.value),u=(e,t)=>e.units!==t.units&&(e.units.unitPointsPercent!==t.units.unitPointsPercent||e.units.unitsCaseSensitive!==t.units.unitsCaseSensitive||e.units.unitsRequired!==t.units.unitsRequired||e.units.unitValue!==t.units.unitValue);t.hasRegradingCalculatedFormulaQuestionFieldChanged=(e,t)=>e.answerFormula!==t.answerFormula||e.allowPartialCredit!==t.allowPartialCredit||e.partialCreditPointsPercent!==t.partialCreditPointsPercent||r(e,t)||l(e,t)||u(e,t),t.shouldShowRegradingWarning=(e,s)=>{let a=!1;const{questionType:o}=e;if(a=e.points!==s.points||e.pointsPerQuestion!==s.pointsPerQuestion||t.hasFullCreditFlagChanged(e,s))return!0;if(n.QuestionType.Multiple!==o&&n.QuestionType.Matching!==o||(a=t.hasScoringOptionsChanged(e,s)),a)return!0;switch(o){case n.QuestionType.FIMB:a=i.some(s.answers,(t,s)=>{const a=e.answers[s];return!i.isEqual(t.answerValues,a.answerValues)});break;case n.QuestionType.Multiple:a=i.some(s.answers,(t,s)=>{const i=e.answers[s];return t.id!==i.id||t.correctAnswer!==i.correctAnswer});break;case n.QuestionType.Either:a=!i.isEqual(e.answer,s.answer);break;case n.QuestionType.CalculatedFormula:a=t.hasRegradingCalculatedFormulaQuestionFieldChanged(e,s)}return a},t.hasBaseQuestionChanged=(e,s)=>{const i=e.questionText.rawText!==s.questionText.rawText,a=t.havePointsChangedToPositive(e.points,s.points),n=t.hasFullCreditFlagChanged(e,s),o=((e,t)=>((e,t)=>e.correctResponseFeedback&&t.correctResponseFeedback&&e.correctResponseFeedback.rawText!==t.correctResponseFeedback.rawText)(e,t)||((e,t)=>e.incorrectResponseFeedback&&t.incorrectResponseFeedback&&e.incorrectResponseFeedback.rawText!==t.incorrectResponseFeedback.rawText)(e,t))(e,s);return i||a||n||o},t.hasUsageCountChanged=(e,t)=>e.usageCount!==t.usageCount,t.hasAutomatedFeedbackChanged=(e,t)=>e.correctResponseFeedback.rawText!==t.correctResponseFeedback.rawText||e.incorrectResponseFeedback.rawText!==t.incorrectResponseFeedback.rawText,t.hasCalculatedFormulaQuestionChanged=(e,s)=>!(s.points<0)&&(!(e.answerFormula===s.answerFormula&&e.allowPartialCredit===s.allowPartialCredit&&e.answerScale===s.answerScale&&e.correctAnswerFormat===s.correctAnswerFormat&&e.correctAnswerPrecision===s.correctAnswerPrecision&&e.displayFormulaToStudent===s.displayFormulaToStudent&&e.displayRoundingSettingsToStudent===s.displayRoundingSettingsToStudent&&e.partialCreditPointsPercent===s.partialCreditPointsPercent&&i.isEqual(e.variableDefinitions,s.variableDefinitions)&&i.isEqual(e.variableSets,s.variableSets)&&e.variableSetCount===s.variableSetCount&&e.mathMLImageURL===s.mathMLImageURL&&e.mathMLImageAltText===s.mathMLImageAltText&&!r(e,s)&&!l(e,s)&&!u(e,s)&&!t.hasAutomatedFeedbackChanged(e,s))||t.hasBaseQuestionChanged(e,s)),t.hasEssayQuestionChanged=(e,s)=>!!o(s)&&t.hasBaseQuestionChanged(e,s),t.hasFIMBQuestionChanged=(e,t)=>{if(!e.answers||!t.answers||e.answers.length!==t.answers.length)return!0;let s=!1;const a=i.keyBy(e.answers,e=>e.ident);return t.answers.forEach(e=>{if(s)return;if(!a[e.ident]||e.answerValues.length!==a[e.ident].answerValues.length)return void(s=!0);const t=e.answerValues.map(e=>e.value),n=a[e.ident].answerValues.map(e=>e.value);s=0!==i.difference(t,n).length}),s},t.hasMatchingQuestionChanged=(e,s)=>{if(!o(s))return!1;if(t.hasBaseQuestionChanged(e,s))return!0;if(e.allowPartialCredit!==s.allowPartialCredit||e.allowNegativeScoreForIncorrectAnswers!==s.allowNegativeScoreForIncorrectAnswers||e.allowNegativeOverallScore!==s.allowNegativeOverallScore)return!0;if(e.prompts.length!==s.prompts.length)return!0;if(e.answers.length!==s.answers.length)return!0;const a=e.prompts.map(e=>e.id);if(s.prompts.map(e=>e.id).some(e=>!a.includes(e)))return!0;const n=e.answers.map(e=>e.ui.id);if(s.answers.map(e=>e.ui.id).some(e=>!n.includes(e)))return!0;const r=e.prompts.map(e=>e.promptText.rawText),l=s.prompts.map(e=>e.promptText.rawText);if(!i.isEqual(r,l))return!0;const u=e.answers.map(e=>e.answerText.rawText),d=s.answers.map(e=>e.answerText.rawText);return!i.isEqual(u,d)},t.hasMultipleAnswerQuestionChanged=(e,s)=>{if(!o(s))return!1;if(t.hasBaseQuestionChanged(e,s))return!0;if(e.answers.length!==s.answers.length)return!0;const a=e.answers.map(e=>e.id);if(s.answers.map(e=>e.id).some(e=>!a.includes(e)))return!0;const n=e.answers.map(e=>e.answerText.rawText),r=s.answers.map(e=>e.answerText.rawText);if(!i.isEqual(n,r))return!0;if(e.answers.some(e=>s.answers.find(t=>t.id===e.id).correctAnswer!==e.correctAnswer))return!0;if(t.hasScoringOptionsChanged(e,s))return!0;let l=!1;for(let t=0;t<e.answers.length;t++)if(s.answers[t].id!==e.answers[t].id){l=!0;break}return l},t.hasPresentationQuestionChanged=(e,t)=>{if(!o(t))return!1;return e.questionText.rawText!==t.questionText.rawText},t.hasTrueFalseQuestionChanged=(e,s)=>{if(!o(s))return!1;if(t.hasBaseQuestionChanged(e,s))return!0;return e.answer!==s.answer},t.hasQuestionBlockQuestionChanged=(e,t)=>!(t.pointsPerQuestion<0||t.numOfQuestionsToChoose<0)&&((e.pointsPerQuestion!==t.pointsPerQuestion||e.numOfQuestionsToChoose!==t.numOfQuestionsToChoose||e.numOfAvailableQuestions!==t.numOfAvailableQuestions)&&!(t.numOfQuestionsToChoose>t.numOfAvailableQuestions)),t.questionChangedFuncs={hasBaseQuestionChanged:t.hasBaseQuestionChanged,hasCalculatedFormulaQuestionChanged:t.hasCalculatedFormulaQuestionChanged,hasEssayQuestionChanged:t.hasEssayQuestionChanged,hasFIMBQuestionChanged:t.hasFIMBQuestionChanged,hasPresentationQuestionChanged:t.hasPresentationQuestionChanged,hasQuestionBlockQuestionChanged:t.hasQuestionBlockQuestionChanged,hasMatchingQuestionChanged:t.hasMatchingQuestionChanged,hasMultipleAnswerQuestionChanged:t.hasMultipleAnswerQuestionChanged,hasTrueFalseQuestionChanged:t.hasTrueFalseQuestionChanged},t.hasQuestionChanged=(e,s)=>{const{questionType:i}=e;switch(i){case n.QuestionType.CalculatedFormula:return t.questionChangedFuncs.hasCalculatedFormulaQuestionChanged(e,s);case n.QuestionType.Either:return t.questionChangedFuncs.hasTrueFalseQuestionChanged(e,s);case n.QuestionType.Essay:return t.questionChangedFuncs.hasEssayQuestionChanged(e,s);case n.QuestionType.FIMB:return t.questionChangedFuncs.hasFIMBQuestionChanged(e,s);case n.QuestionType.PresentationOnly:return t.questionChangedFuncs.hasPresentationQuestionChanged(e,s);case n.QuestionType.Matching:return t.questionChangedFuncs.hasMatchingQuestionChanged(e,s);case n.QuestionType.Multiple:return t.questionChangedFuncs.hasMultipleAnswerQuestionChanged(e,s);case n.QuestionType.QuestionBlock:return t.questionChangedFuncs.hasQuestionBlockQuestionChanged(e,s);default:throw new Error(`No corresponding has-changed method specified for the given question type: ${i}`)}},t.isValidOnCreate=e=>{const{questionType:t}=e;switch(t){case n.QuestionType.QuestionBlock:return!0;case n.QuestionType.PresentationOnly:return a.Questions.isFileAttachment(e);default:return!1}},t.isNewQuestion=e=>i.startsWith(e.id,a.NEW_ENTITY_ID_PREFIX),t.hasLinkedQuestion=e=>e.usageCount>=1},VsDy:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=s("zGdY"),o=s("JfV0"),r=i.__importDefault(s("aWzz")),l=s("uDfI"),u=s("9OUN"),d=s("MC1S"),c=s("8jBL"),p=s("0x+l"),m=s("myse"),f=s("8unJ"),h=i.__importDefault(s("kPPX")),g=s("5rx+");s("wXu7");class b extends a.Component{constructor(e){super(e),this.loadedColumnSummary=!1,this.loadedGradebookColumn=!1,this.loadedContent=!1,this.assessmentHasResponses=()=>{const{assessment:e}=this.props;return e&&e.hasResponses},this.contentHasMultipleAttempts=()=>{const{content:e}=this.props;return e&&e.deploymentSettings&&1!==e.deploymentSettings.attemptCount},this.contentHasTimeLimit=()=>{const{content:e}=this.props;return e&&e.deploymentSettings&&null!=e.deploymentSettings.timeLimit},this.contentHasGroups=()=>{const{content:e}=this.props;return e&&e.isGroupContent},this.columnHasPostedGrades=()=>{const{columnSummary:e}=this.props;return e&&(e.numGroupsPosted||e.numPosted)},this.canEditSettings=()=>{const{assessment:e}=this.props;return e&&e.permissions.modify&&e.permissions.deploy},this.canEditDueDate=()=>{const{assessment:e}=this.props;if(!e)return!1;const t=e.permissions;return t.modify&&t.deploy&&t.modifyDueDate},this.canOpenGroups=()=>this.canEditSettings()&&!this.contentHasMultipleAttempts()&&!this.contentHasTimeLimit(),this.persist=()=>{const{content:e,gradebookColumn:t,persistContent:s,persistGradebookColumn:i}=this.props,a={...e},n={...t};null!==this.state.allowConversations&&(this.state.allowConversations?a.forumAttacherAction=o.ForumAttacherAction.ADD.toString():(a.forumAttacherAction=o.ForumAttacherAction.DELETE.toString(),a.attachedForumLink=null));const r=null!==this.state.randomizeQuestions,l=null!==this.state.randomizeAnswers;return(r||l)&&(a.deploymentSettings={...e.deploymentSettings},r&&(a.deploymentSettings.isRandomizationOfQuestionsRequired=this.state.randomizeQuestions),l&&(a.deploymentSettings.isRandomizationOfAnswersRequired=this.state.randomizeAnswers)),null!==this.state.dueDate&&(n.dueDate=this.state.dueDate),null!==this.state.anonymousGrading&&(n.anonymousGrading=this.state.anonymousGrading),s(e,a).then(()=>{i(t,n).then(()=>{this.setState({allowConversations:null,randomizeQuestions:null,randomizeAnswers:null,dueDate:null,anonymousGrading:null})})})},this.onAllowConversationToggle=(e,t)=>{this.setState({allowConversations:t})},this.onRandomizeQuestionsToggle=(e,t)=>{this.setState({randomizeQuestions:t})},this.onRandomizeAnswersToggle=(e,t)=>{this.setState({randomizeAnswers:t?"ALWAYS":"NEVER"})},this.onAnonymousGradingToggle=(e,t)=>{this.setState({anonymousGrading:t})},this.onDueDateChange=e=>{this.setState(()=>({dueDate:e}))},this.onGroupsDelete=()=>{this.setState(()=>({showDeleteGroupsDialog:!0}))},this.onGroupsDeleteCancel=()=>{this.setState(()=>({showDeleteGroupsDialog:!1}))},this.onGroupsDeleteConfirm=()=>{const{content:e,deleteGroups:t}=this.props;t(e.id),this.setState(()=>({showDeleteGroupsDialog:!1}))},this.getGroupsSubTitle=()=>{const{content:e,localizationPrefix:t}=this.props,s=this.props.localize.translate;let i="";if(this.canEditSettings())if(this.contentHasMultipleAttempts()||this.contentHasTimeLimit())this.contentHasMultipleAttempts()&&this.contentHasTimeLimit()?i=s(`${t}.settings.groups.subtitle.restrictions.attemptsAndTimeLimit`):this.contentHasTimeLimit()?i=s(`${t}.settings.groups.subtitle.restrictions.timeLimit`):this.contentHasMultipleAttempts()&&(i=s(`${t}.settings.groups.subtitle.restrictions.attempts`));else if(this.contentHasGroups())i=s(`${t}.settings.groups.subtitle.numberOfGroups.plural`,{count:e.assignedGroups.length});else{if(!this.assessmentHasResponses()&&!this.columnHasPostedGrades())return null;{const e=this.props.gradebookColumn.gradebookCategory,a=e.isUserDefined?"custom":e.title;this.columnHasPostedGrades()?i=s(`${t}.settings.groups.subtitle.restrictions.studentAttempts.${a}`,{title:a}):this.assessmentHasResponses()&&(i=s(`${t}.settings.groups.subtitle.restrictions.postedGrades.${a}`,{title:a}))}}else i=s(`${t}.settings.groups.subtitle.restrictions.insufficientPrivileges`);return a.default.createElement("div",null,i)},this.state={allowConversations:null,anonymousGrading:null,randomizeQuestions:null,randomizeAnswers:null,dueDate:null,showDeleteGroupsDialog:!1}}componentDidUpdate(e){const{gradebookColumn:t,content:s,courseId:i,contentId:a,loadColumnSummary:n,loadContents:o,loadGradebookColumn:r}=this.props;t||this.loadedGradebookColumn||!s||(r({courseId:i,columnId:s.gradingColumn.id}),this.loadedGradebookColumn=!0),this.loadedColumnSummary||e.gradebookColumn||!t||(n({courseId:t.courseId,columnId:t.id}),this.loadedColumnSummary=!0),s||this.loadedContent||(o({courseId:i,contentId:a}),this.loadedContent=!0)}render(){const{content:e,gradebookColumn:t,localizationPrefix:s,analyticsEventAugmentor:i}=this.props,{showDeleteGroupsDialog:o}=this.state,r=this.props.localize.translate,l=i(m.AnalyticsEventTypes.CLICK_EVENT,()=>{},"assessmentSettings.settings.groups.title.link");return a.default.createElement("div",{className:"assessment-settings"},e&&t&&a.default.createElement("div",null,a.default.createElement(d.TextField,{className:"dueDate",label:r(`${s}.settings.dueDate`),defaultValue:t.dueDate,disabled:!this.canEditDueDate(),onChanged:this.onDueDateChange,analyticsId:"assessmentSettings.editDueDate"}),a.default.createElement(d.Checkbox,{label:r(`${s}.settings.allowClassConversations`),defaultChecked:!!e.attachedForumLink,disabled:!this.canEditSettings(),onChange:this.onAllowConversationToggle,analyticsId:"assessmentSettings.allowClassConversation"}),a.default.createElement(d.Checkbox,{label:r(`${s}.settings.randomizeQuestions`),defaultChecked:e.deploymentSettings.isRandomizationOfQuestionsRequired,disabled:!this.canEditSettings(),onChange:this.onRandomizeQuestionsToggle,analyticsId:"assessmentSettings.randomizeQuestions"}),a.default.createElement(d.Checkbox,{label:r(`${s}.settings.randomizeAnswers`),defaultChecked:e.deploymentSettings.isRandomizationOfAnswersRequired===n.RandomizeAnswers.Always,disabled:!this.canEditSettings(),onChange:this.onRandomizeAnswersToggle,analyticsId:"assessmentSettings.randomizeAnswers"}),a.default.createElement("h3",{className:"assessment-settings__subheader"},r(`${s}.settings.anonymousGrading`)),a.default.createElement(d.Checkbox,{label:r(`${s}.settings.hideStudentNames`),defaultChecked:t.anonymousGrading,onChange:this.onAnonymousGradingToggle,analyticsId:"assessmentSettings.hideStudentNames"}),a.default.createElement(d.PrimaryButton,{className:"submitButton",onClick:this.persist,text:r(`${s}.settings.submitButton`),analyticsId:"assessmentSettings.submit"})),a.default.createElement("div",null,this.canOpenGroups()?a.default.createElement("a",{"data-analytics-id":"assessmentSettings.settings.groups.title.link",href:this.props.routes.getGroupsHref(),onClick:l},a.default.createElement(c.Groups,null),a.default.createElement("div",null,r(`${s}.settings.groups.title`)),this.getGroupsSubTitle()):a.default.createElement("div",null,a.default.createElement(c.Groups,null),a.default.createElement("div",null,r(`${s}.settings.groups.title`)),this.getGroupsSubTitle()),this.contentHasGroups()&&this.canEditSettings()?a.default.createElement(d.IconButton,{className:"delete-groups",onClick:this.onGroupsDelete,icon:a.default.createElement(p.Trash,null),disabled:this.assessmentHasResponses()||this.columnHasPostedGrades(),ariaLabel:r(`${s}.settings.groups.delete.label`),analyticsId:"assessmentSettings.groups.delete"}):null),a.default.createElement(h.default,{hidden:!o,onCancel:this.onGroupsDeleteCancel,onContinue:this.onGroupsDeleteConfirm,titleKey:`${s}.settings.groups.delete.dialog.title`,textKey:`${s}.settings.groups.delete.dialog.text`,cancelKey:"assessments.global.cancel",continueKey:"assessments.global.yes",analyticsId:"assessment.settings.groups.delete.dialog"}))}}t.AssessmentSettingsPure=b,b.propTypes={assessment:r.default.object,columnSummary:r.default.object,content:r.default.object,contentId:r.default.string.isRequired,courseId:r.default.string.isRequired,deleteGroups:r.default.func.isRequired,gradebookColumn:r.default.object,loadColumnSummary:r.default.func.isRequired,loadGradebookColumn:r.default.func.isRequired,loadContents:r.default.func.isRequired,localize:r.default.object.isRequired,persistContent:r.default.func.isRequired,persistGradebookColumn:r.default.func.isRequired,routes:r.default.object.isRequired,localizationPrefix:r.default.string.isRequired,...g.withAnalyticsProps};const _=l.connect((e,t)=>({assessment:o.select.assessment.getAssessmentByContentId(e,t.contentId),columnSummary:o.select.columnSummary.getColumnSummaryByColumnId(e,t.gradebookColumn&&t.gradebookColumn.id),content:o.select.content.getContentById(e,t.contentId),gradebookColumn:o.select.gradebookColumn.getGradebookColumnByContentId(e,t.contentId)}),e=>u.bindActionCreators({loadColumnSummary:o.actions.columnSummary.loadColumnSummary,deleteGroups:o.actions.group.deleteByContentId,loadGradebookColumn:o.actions.gradebookColumn.loadGradebookColumn,loadContents:o.actions.content.loadContents,persistGradebookColumn:o.actions.gradebookColumn.persistGradebookColumn,persistContent:o.actions.content.persistContent},e))(f.localizedComponentWrapper(b));t.default=m.withAnalytics(_)},W2w9:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("np6O"),l=s("M0dR"),u=s("ks7T"),d=s("5HEc");s("S9Gz"),t.CLASS_PREFIX="calculated-formula-question__step-button";const c="assessments.canvas.question.calculatedFormula";t.BaseStepButtons=({analyticsId:e,localize:s,showBack:i,onBackClick:n,showNext:o,isNextDisabled:p,onNextClick:m})=>a.default.createElement("div",{className:t.CLASS_PREFIX},i&&a.default.createElement(r.AnalyticsIconButton,{analyticsId:`${e}.back.iconButton`,"aria-label":s.translate(`${c}.backAriaLabel`),className:`${t.CLASS_PREFIX}--back`,onClick:n},a.default.createElement(u.ChevronLeft,null),a.default.createElement(l.AnalyticsTypography,{component:"span",variant:"inherit"},s.translate(`${c}.back`))),o&&a.default.createElement(r.AnalyticsIconButton,{analyticsId:`${e}.next.iconButton`,"aria-label":s.translate(`${c}.nextAriaLabel`),className:`${t.CLASS_PREFIX}--next`,disabled:p,onClick:m},a.default.createElement(l.AnalyticsTypography,{component:"span",variant:"inherit"},s.translate(`${c}.next`)),a.default.createElement(d.ChevronRight,null))),t.BaseStepButtons.propTypes={analyticsId:n.default.string.isRequired,localize:n.default.object,showBack:n.default.bool.isRequired,onBackClick:n.default.func,showNext:n.default.bool.isRequired,isNextDisabled:n.default.bool,onNextClick:n.default.func},t.default=o.localizedComponentWrapper(t.BaseStepButtons)},WARa:function(e,t,s){"use strict";s.r(t)},WGaE:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("LeqM");t.LinkedQuestionNotification=i.default;var a=s("2xrW");t.copyQuestionsResultNotification=a.default;var n=s("AV37");t.processingStageNotification=n.default},Waue:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("Begd"),l=i.__importDefault(s("2kfE"));s("76BM");class u extends a.Component{constructor(e){super(e),this.isAnyQuestionDirty=()=>this.state.questionBeingEditedIsDirty,this.onQuestionEdit=e=>{this.setState(()=>({questionBeingEditedId:e,questionBeingEditedIsDirty:!1}))},this.onQuestionMadeDirty=e=>{e!==this.state.questionBeingEditedIsDirty&&(this.props.setIsAnyQuestionDirty(e),this.setState(()=>({questionBeingEditedIsDirty:e})))},this.state={questionBeingEditedId:null,questionBeingEditedIsDirty:!1}}render(){const{courseId:e,questions:t,hasSubmissions:s,deleteQuestion:i,isLoading:n,firstNewQuestionBankId:o,persistQuestion:u,hasAssessmentModifyPermissions:d,questionPoolId:c,assessmentId:p,localizationPrefix:m}=this.props;return a.default.createElement("div",{className:"question-pool-question-list assessment-canvas-react"},t&&t.map(t=>a.default.createElement(l.default,{key:t.id,courseId:e,question:t,hasSubmissions:s,hasAssessmentModifyPermissions:d,deleteQuestion:()=>i(t,{courseId:e,assessmentId:p,questionBlockId:c}),focusTitle:o===t.id,onQuestionEdit:this.onQuestionEdit,onQuestionMadeDirty:this.onQuestionMadeDirty,questionBeingEditedId:this.state.questionBeingEditedId,isAnyQuestionDirty:this.isAnyQuestionDirty(),persistQuestion:u,localizationPrefix:m})),(!t||n)&&a.default.createElement(r.Spinner,{size:r.SpinnerSize.large}))}}t.QuestionPoolQuestionList=u,u.propTypes={courseId:n.default.string.isRequired,assessmentId:n.default.string.isRequired,questionPoolId:n.default.string.isRequired,questions:n.default.array,hasSubmissions:n.default.bool.isRequired,hasAssessmentModifyPermissions:n.default.bool.isRequired,deleteQuestion:n.default.func.isRequired,isLoading:n.default.bool,firstNewQuestionBankId:n.default.string,setIsAnyQuestionDirty:n.default.func.isRequired,persistQuestion:n.default.func.isRequired,localizationPrefix:n.default.string.isRequired},t.default=o.localizedComponentWrapper(u)},X3OV:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz"));t.DEFAULT_VALUE={panelHeightOffset:0},t.AssessmentCommonContext=a.createContext(t.DEFAULT_VALUE),t.withAssessmentCommonContext=e=>s=>a.createElement(t.AssessmentCommonContext.Consumer,null,t=>a.createElement(e,Object.assign({},s,{commonContext:t}))),t.AssessmentsCommonContextWrapper=({usePanelHeightOffset:e,children:s})=>{const i=e();return a.createElement(t.AssessmentCommonContext.Provider,{value:{panelHeightOffset:i}},s)},t.AssessmentsCommonContextWrapper.propTypes={children:n.default.node,usePanelHeightOffset:n.default.func.isRequired}},XeRt:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importStar(s("nsO7")),o=i.__importDefault(s("aWzz")),r=s("MC1S"),l=s("3ZJq"),u=i.__importDefault(s("PCGI")),d=i.__importDefault(s("7//j")),c=i.__importDefault(s("gTAB")),p=s("Vng8"),m=s("WGaE"),f=s("VQXm"),h=i.__importStar(s("TIvv")),g=i.__importStar(s("AiU9")),b=i.__importStar(s("OPED")),_=s("1Xy2");s("AFzv");const y=i.__importDefault(s("7LMM")),E=e=>a.default.createElement("ol",{className:"multiple-answer__list"},e.question.answers.map((t,s)=>a.default.createElement("li",{key:t.id,className:"multiple-answer__dnd-item"},a.default.createElement(f.MultipleAnswerChoice,Object.assign({},e,{answer:t,index:s}))))),C=e=>{const{editMode:t,hasSubmissions:s,localize:i,onAnswerAddition:o,onQuestionChange:f,onReorder:C,question:w,questionTitle:S,setActiveEditorId:P,showScoringOptions:A,pluginsConfig:R}=e,v=c.default.isInactive(t),q=!v&&p.hasLinkedQuestion(w),T=i.translate("assessments.canvas.question.multipleAnswer.answerInstructions"),I=i.translate("assessments.canvas.question.multipleAnswer.addChoice"),D=p.isNewQuestion(e.question),Q=[{key:_.noPartialCredit},{key:_.partialCreditNoPenalty},{key:_.partialCreditWithPenalty}],F=()=>!0===n.get(e,"question.permissions.addOrRemoveAnswer")||D,x=()=>!0===n.get(e,"question.permissions.reorderAnswers")||D,k=e=>{e.preventDefault()};return a.default.createElement("div",{className:`multiple-answer ${v?"multiple-answer--read":"multiple-answer--edit"}`},a.default.createElement(u.default,{editMode:t,question:w},a.default.createElement(m.LinkedQuestionNotification,{show:q,usageCount:w.usageCount}),a.default.createElement(h.default,Object.assign({},h.getPluggableQuestionHeaderProps(e,f))),a.default.createElement(g.default,Object.assign({},g.getQuestionControlProps(e))),a.default.createElement(b.default,Object.assign({},b.getQuestionTextProps(e,f)))),a.default.createElement("div",{className:(()=>{let e="multiple-answer__container";return!s&&F||(e+=" -cannot-add-more"),e})()},a.default.createElement("div",{className:"multiple-answer__instructions"},T),v?(()=>a.default.createElement(E,Object.assign({},e,{hasAddOrRemoveAnswerPermissions:F(),hasReorderAnswersPermissions:x()})))():(()=>a.default.createElement(a.default.Fragment,null,a.default.createElement(d.default,Object.assign({},e,{items:w.answers,question:w,questionTitle:S,onReorderItem:C,boundingElementId:"gradebook-item-panel-content",scrollContainerId:"multiple-answer-dnd",hasAddOrRemoveAnswerPermissions:F(),hasReorderAnswersPermissions:x()})),!s&&F()&&a.default.createElement(r.Link,{className:"multiple-answer__add-choice",onClick:o,onMouseDown:k,type:"button"},I)))()),A&&a.default.createElement(y.default,{question:e.question,onScoringOptionsChange:e.onScoringOptionsChange,editMode:e.editMode,localize:e.localize,isAnswersEditMode:!0,options:Q,translationKeyPrefix:"assessments.canvas.question.multipleAnswer.scoringOptions"}),a.default.createElement(l.AutomatedQuestionFeedback,{editMode:t,onQuestionChange:f,question:w,setActiveEditorId:P,pluginsConfig:R}))};C.propTypes={question:o.default.object.isRequired,questionTitle:o.default.string.isRequired,editMode:o.default.number.isRequired,hasSubmissions:o.default.bool.isRequired,localize:o.default.object.isRequired,onQuestionChange:o.default.func.isRequired,onAnswerAddition:o.default.func.isRequired,showScoringOptions:o.default.bool,onReorder:o.default.func,pluginsConfig:o.default.object.isRequired,showFeatureAnnouncement:o.default.object},C.defaultProps={showScoringOptions:!1},t.default=C},"YE/5":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("MC1S"),r=s("8unJ"),l=s("caKH"),u=s("5rx+"),d=e=>{const{localize:t,onCancel:s,onDismiss:i,onOk:n,show:r,subText:u,title:d,showCloseButton:c,okButtonLocaleKey:p,cancelButtonLocaleKey:m,analyticsId:f}=e;return a.default.createElement(l.UltraModalDialog,{hidden:!r,onDismiss:i,dialogContentProps:{type:o.DialogType.normal,showCloseButton:c,title:d,subText:u,isAlert:!0},modalProps:{isBlocking:!0}},a.default.createElement(o.DialogFooter,null,a.default.createElement(o.DefaultButton,{onClick:s,text:t.translate(m),analyticsId:`${f}.warningDialog.cancel.button`}),a.default.createElement(o.PrimaryButton,{onClick:n,text:t.translate(p),analyticsId:`${f}.warningDialog.ok.button`})))};d.propTypes={localize:n.default.object.isRequired,onCancel:n.default.func,onDismiss:n.default.func,onOk:n.default.func,show:n.default.bool,subText:n.default.string,title:n.default.string,showCloseButton:n.default.bool,cancelButtonLocaleKey:n.default.string,okButtonLocaleKey:n.default.string,...u.addAnalyticsProps},d.defaultProps={showCloseButton:!0,cancelButtonLocaleKey:"assessments.canvas.warningDialogs.cancel",okButtonLocaleKey:"assessments.canvas.warningDialogs.ok"},t.default=r.localizedComponentWrapper(d)},YqWx:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("t9Ny"),r=s("JfV0"),l=s("8unJ"),u=s("b0Dq");s("6iVS");const d=e=>{return a.default.createElement("div",{className:"dnd-question-preview"},(()=>{const{question:t,questionTitle:s,localize:i}=e,n=r.Questions.isFileAttachment(t),l=r.Questions.isQuestionBlock(t),d=l?t.pointsPerQuestion:t.points,c=`assessments.canvas.question.header.${l?"pointsEach":"points"}`;return n?a.default.createElement("div",{className:"dnd-question-preview__file"},a.default.createElement(o.FileViewer,Object.assign({},u.getFileViewerPropsArray(t)[0]))):a.default.createElement("div",{className:"dnd-question-preview__question"},a.default.createElement("div",{className:"dnd-question-preview__question-header"},s&&a.default.createElement("div",{className:"dnd-question-preview__question-header-inner"},a.default.createElement("h3",{className:"dnd-question-preview__title"},s),a.default.createElement("div",{className:"dnd-question-preview__pill"},i.translate(c,{points:d}))),t.questionText&&a.default.createElement("div",{className:"dnd-question-preview__question-text",dangerouslySetInnerHTML:{__html:t.questionText.rawText}})))})())};d.propTypes={question:n.default.object.isRequired,questionTitle:n.default.string,localize:n.default.object.isRequired},t.default=l.localizedComponentWrapper(d)},ZfLe:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("nsO7")),n=i.__importStar(s("ERkP")),o=i.__importDefault(s("aWzz")),r=s("MC1S"),l=s("8unJ"),u=i.__importDefault(s("YE/5")),d=i.__importDefault(s("gTAB")),c=i.__importDefault(s("ZzTI")),p=s("Pfoe"),m=s("Vng8");s("/Lwm");const f=s("JfV0");t.default=e=>{class t extends n.Component{constructor(e){super(e),this.originalQuestion=this.props.question,this.containerRef=null,this.isNewQuestion=()=>m.isNewQuestion(this.props.question),this.hasQuestionDeletePermissions=()=>{const e=a.get(this.props,"question.permissions.delete");return null==e?this.isNewQuestion():e},this.hasQuestionEditPermissions=()=>{const e=a.get(this.props,"question.permissions.edit");return null==e?this.isNewQuestion():e},this.getEditMode=()=>this.editModeIsActive()?d.default.ACTIVE:d.default.INACTIVE,this.editModeIsActive=()=>this.props.question.id===this.props.questionBeingEditedId,this.refreshBbml=()=>{this.setState({refreshBbml:!0},()=>this.setState({refreshBbml:!1}))},this.handleQuestionRevert=(e=null)=>{this.isNewQuestion()||this.resetQuestionFromProps(e)},this.resetQuestionFromProps=(e=null)=>{const t=this.props.question;this.originalQuestion=t,this.setState(()=>({question:t}),()=>{this.refreshBbml(),e&&e()})},this.setQuestionValid=()=>{this.setState({isValid:!0})},this.onQuestionChange=(e,t,s=null,i=!0)=>{this.setState(s=>{const i=t(this.originalQuestion,e,s.question,s.isValid);return{question:{...s.question,...e},isValid:i}},()=>{i&&this.props.onQuestionMadeDirty(!0),s&&s()})},this.openGoals=()=>{const{openGoals:e,question:t}=this.props;e(t)},this.onSaveButtonClick=()=>{const{question:e}=this.state,{checkAndDisableAssessmentSettings:t,hasSubmissions:s}=this.props,i=m.hasLinkedQuestion(e);let a=!1;s&&(a=m.shouldShowRegradingWarning(this.originalQuestion,e)),a&&i?this.showCombinedRegradingLinkedQuestionDialog():a?this.showRegradingDialog():i?this.showLinkedQuestionDialog():!f.Questions.isPresentationOnly(e)&&t?t(this.onQuestionSave):this.onQuestionSave()},this.onQuestionDelete=()=>{const{deleteQuestion:e,question:t}=this.props;e(t)},this.onQuestionSave=()=>{const e=this.stopEditMode;(0,this.props.persistQuestion)(this.props.question,this.state.question,this.props.question.sourceInfo?this.props.question.sourceInfo.id:this.props.question.assessmentId).then(({question:e})=>{this.originalQuestion=e}),e()},this.onQuestionCancel=()=>{const{onQuestionEditCancel:e}=this.props;if(this.isNewQuestion()){const{deleteQuestion:e,question:t}=this.props;this.stopEditMode(),e(t)}else this.handleQuestionRevert(this.stopEditMode);e&&e()},this.startEditMode=(e=null)=>{this.props.isAnyQuestionDirty||this.props.questionBeingEditedId===this.props.question.id||(this.props.onQuestionEdit(this.props.question.id),e&&e())},this.stopEditMode=()=>{const{onQuestionEdit:e,onQuestionMadeDirty:t}=this.props;e(null),t(!1),this.containerRef&&this.containerRef.querySelector(`.${p.BB_EDITOR_CONTAINER_CLASSNAME}`)&&this.containerRef.querySelector(`.${p.BB_EDITOR_CONTAINER_CLASSNAME}`).focus(),this.setActiveEditorId(null),this.setState(()=>({isValid:!1,showRegradingDialog:!1,showLinkedQuestionDialog:!1,showCombinedRegradingLinkedQuestionDialog:!1}))},this.setActiveEditorId=e=>{this.setState(()=>({activeEditorId:e}))},this.showQuestionControls=()=>{if(!1===this.props.showQuestionControls)return!1;return null===this.props.questionBeingEditedId},this.showCombinedRegradingLinkedQuestionDialog=()=>{this.setState(()=>({showCombinedRegradingLinkedQuestionDialog:!0}))},this.dismissCombinedRegradingLinkedQuestionDialog=()=>{this.setState(()=>({showCombinedRegradingLinkedQuestionDialog:!1}))},this.showLinkedQuestionDialog=()=>{this.setState(()=>({showLinkedQuestionDialog:!0}))},this.dismissLinkedQuestionDialog=()=>{this.setState(()=>({showLinkedQuestionDialog:!1}))},this.showRegradingDialog=()=>{this.setState(()=>({showRegradingDialog:!0}))},this.dismissRegradingDialog=()=>{this.setState(()=>({showRegradingDialog:!1}))},this.onSaveCancelMouseDown=e=>{e.preventDefault()},this.setContainerRef=e=>{this.containerRef=e},this.state={question:e.question,refreshBbml:!1,activeEditorId:null,isValid:!1,showRegradingDialog:!1,showLinkedQuestionDialog:!1,showCombinedRegradingLinkedQuestionDialog:!1}}componentDidMount(){const{onQuestionMadeDirty:e,question:t,questionBeingEditedId:s}=this.props;this.isNewQuestion()&&!s&&(this.startEditMode(),e(!0)),this.isNewQuestion()&&m.isValidOnCreate(t)&&this.setQuestionValid()}componentDidUpdate(e){const{question:t}=e,{question:s}=this.props,i=!this.editModeIsActive(),a=m.hasUsageCountChanged(t,s),n=m.hasQuestionChanged(t,s);i&&(n||a)&&this.resetQuestionFromProps()}render(){const{onQuestionEdit:t,onQuestionMadeDirty:s,isAnyQuestionDirty:i,persistQuestion:a,localizationPrefix:o,...l}=this.props,{question:c,refreshBbml:p,activeEditorId:m,showRegradingDialog:f,showLinkedQuestionDialog:h,showCombinedRegradingLinkedQuestionDialog:g}=this.state,b=this.getEditMode(),_=d.default.isActive(b),y=this.hasQuestionEditPermissions()&&!i,E=this.props.localize.translate(`${o}.canvas.question.cancel`),C=`${o}.canvas.warningDialogs.questionRegrading.cancel`,w=`${o}.canvas.warningDialogs.questionRegrading.ok`;return n.default.createElement("div",{className:"question-container",ref:this.setContainerRef},n.default.createElement(e,Object.assign({},l,{showQuestionControls:this.showQuestionControls(),editMode:b,onQuestionChange:this.onQuestionChange,onQuestionRevert:this.handleQuestionRevert,onQuestionSave:this.onQuestionSave,question:c,refreshBbml:p,startEditMode:this.startEditMode,setActiveEditorId:this.setActiveEditorId,activeEditorId:m,deleteQuestion:this.onQuestionDelete,hasQuestionDeletePermissions:this.hasQuestionDeletePermissions(),hasQuestionEditPermissions:this.hasQuestionEditPermissions(),openGoals:this.openGoals,canEnterEditMode:y,localizationPrefix:o})),_&&n.default.createElement("div",{className:"question-container__buttons"},n.default.createElement(r.DefaultButton,{type:"button",text:E,onClick:this.onQuestionCancel,onMouseDown:this.onSaveCancelMouseDown,analyticsId:"assessments.canvas.editMode.question.cancel"}),n.default.createElement(r.PrimaryButton,{disabled:!this.state.isValid,type:"button",text:this.props.localize.translate(`${o}.canvas.question.save`),onClick:this.onSaveButtonClick,onMouseDown:this.onSaveCancelMouseDown,analyticsId:"assessments.canvas.editMode.question.save"})),g&&n.default.createElement(u.default,{show:!0,onCancel:this.dismissCombinedRegradingLinkedQuestionDialog,onDismiss:this.dismissCombinedRegradingLinkedQuestionDialog,onOk:this.onQuestionSave,cancelButtonLocaleKey:"assessments.canvas.warningDialogs.combinedRegradingLinkedQuestion.cancel",okButtonLocaleKey:"assessments.canvas.warningDialogs.combinedRegradingLinkedQuestion.ok",title:this.props.localize.translate("assessments.canvas.warningDialogs.combinedRegradingLinkedQuestion.title"),subText:this.props.localize.translate("assessments.canvas.warningDialogs.combinedRegradingLinkedQuestion.subText"),showCloseButton:!1,analyticsId:"assessments.canvas.warningDialogs.combinedRegradingLinkedQuestion"}),f&&n.default.createElement(u.default,{show:!0,onCancel:this.dismissRegradingDialog,onDismiss:this.dismissRegradingDialog,onOk:this.onQuestionSave,cancelButtonLocaleKey:C,okButtonLocaleKey:w,title:this.props.localize.translate(`${o}.canvas.warningDialogs.questionRegrading.title`),subText:this.props.localize.translate(`${o}.canvas.warningDialogs.questionRegrading.subText`),showCloseButton:!1,analyticsId:"assessments.canvas.warningDialogs.questionRegrading"}),h&&n.default.createElement(u.default,{show:!0,onCancel:this.dismissLinkedQuestionDialog,onDismiss:this.dismissLinkedQuestionDialog,onOk:this.onQuestionSave,cancelButtonLocaleKey:"assessments.canvas.warningDialogs.linkedQuestion.cancel",okButtonLocaleKey:"assessments.canvas.warningDialogs.linkedQuestion.ok",title:this.props.localize.translate("assessments.canvas.warningDialogs.linkedQuestion.title"),subText:this.props.localize.translate("assessments.canvas.warningDialogs.linkedQuestion.subText"),showCloseButton:!1,analyticsId:"assessments.canvas.warningDialogs.linkedQuestion."}))}}return t.propTypes={checkAndDisableAssessmentSettings:o.default.func,questionBeingEditedId:o.default.string,isAnyQuestionDirty:o.default.bool.isRequired,onQuestionEdit:o.default.func.isRequired,onQuestionMadeDirty:o.default.func.isRequired,deleteQuestion:o.default.func.isRequired,localize:o.default.object.isRequired,persistQuestion:o.default.func.isRequired,question:o.default.object.isRequired,questionTitle:o.default.string,hasSubmissions:o.default.bool.isRequired,openGoals:o.default.func.isRequired,onQuestionEditCancel:o.default.func,showQuestionControls:o.default.bool,localizationPrefix:o.default.string.isRequired},t.displayName=`WithSubscription(${c.default(e)})`,l.localizedComponentWrapper(t)}},ZnFM:function(e,t,s){"use strict";s.r(t)},ZzTI:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.displayName||e.name||"Component"}},a6r6:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s("2cC3");const i=s("DjPm"),a=s("lqf4");var n=s("DjPm");t.MathEditor=n.MathEditor;var o=s("mzw0");t.useWirisEditor=o.useWirisEditor,t.WirisEditorInstanceUtils=a,t.default=i.MathEditor},aNN5:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=s("0x+l"),o=s("8unJ"),r=i.__importDefault(s("Pfoe")),l=s("2yjE"),u=i.__importDefault(s("391C")),d=i.__importStar(s("jPx/"));s("B8lv");class c extends a.default.Component{constructor(e){super(e),this.onBlur=()=>{this.setState({editorFocused:!1})},this.onFocus=()=>{this.setState({editorFocused:!0})},this.state={editorFocused:!1}}render(){const{isReadOnly:e,localize:t,onEditorTextChange:s,onRemoveReusedAnswer:i,pairNumber:o,prompt:c,question:p,reusedElsewherePair:m,text:f}=this.props,h=`answer-header-${p.id}-${o}`,g=`${l.QUESTION_TITLE_ID_PREFIX}${p.id} ${h}`;return a.default.createElement("div",{className:`matching-answer ${e?"matching-answer--read-only":""}`},c.reusesAnswer?a.default.createElement(u.default,{isReadOnly:e,pairNumber:o,onRemove:i}):a.default.createElement("div",{className:"matching-answer__text"},a.default.createElement("div",{id:h,className:"sr-only"},t.translate("assessments.canvas.question.matching.headers.answer",{pairNumber:o})),a.default.createElement(r.default,Object.assign({},this.props,{ariaLabelledBy:g,bbml:f,id:d.getAnswerEditorId(this.props.prompt.id),isReadOnly:e,onBlur:this.onBlur,onChange:s,onFocus:this.onFocus,placeholder:t.translate("assessments.canvas.question.matching.placeholders.answer",{pairNumber:o}),toolbarSet:"minimal",ariaRequired:!0}))),m&&this.state.editorFocused&&a.default.createElement("div",{className:"matching-answer-notice",role:"alert"},a.default.createElement(n.Attention,{className:"matching-answer-notice__icon"}),a.default.createElement("span",{className:"matching-answer-notice__text"},t.translate("assessments.canvas.question.matching.editingReusedAnswerNotice"))))}}t.UnwrappedMatchingAnswer=c,t.default=o.localizedComponentWrapper(c)},aPd7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseFilesFromBbML=function(e){const t=[],s=document.createElement("div");return s.innerHTML=e,s.querySelectorAll("a[data-bbfile]").forEach(e=>{const s=e.href,i=JSON.parse(e.getAttribute("data-bbfile"));t.push({node:e,href:s,bbfile:i})}),t},t.createFileLink=function(e){const t=JSON.parse(e.bbfile),s=e.href,i=e.bbtype,a=e.bbfile.replace(/&/g,"&amp;").replace(/"/g,"&quot;");return`<a href="${s}" data-bbtype="${i}" data-bbfile="${a}">${t.linkName||a.alternativeText}</a> \n`},t.getPlainTextFromBbML=function(e){const t=document.createElement("div");return t.innerHTML=e,(t.textContent||t.innerText).trim()}},afDw:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("nsO7")),n=i.__importStar(s("ERkP")),o=s("9OUN"),r=s("uDfI"),l=i.__importDefault(s("aWzz")),u=s("8unJ"),d=s("MC1S"),c=s("JfV0"),p=s("zGdY"),m=s("0x+l"),f=i.__importDefault(s("3ANQ")),h=i.__importDefault(s("cFZT")),g=i.__importDefault(s("EC4L")),b=i.__importDefault(s("6TGb")),_=i.__importDefault(s("scU2")),y=i.__importDefault(s("hQsI")),E=s("WGaE"),C=i.__importDefault(s("6rK7")),w=i.__importDefault(s("GD/5")),S=i.__importDefault(s("YE/5")),P=s("aPd7"),A=s("gk+Q");s("vu2V");const R=s("tN4z"),v="course.content.assessment.AllowStudentSubmission.switch",q=e=>{return`assessmentCopyQuestionsTaskId${a.replace(e,/_/g,".")}`};class T extends n.Component{constructor(e){super(e),this.AddButton=e=>n.default.createElement(f.default,{index:e.index,show:!this.state.questionBeingEditedId,onToggleAddMenu:this.onToggleAddMenu,onDismissAddMenu:this.onDismissAddMenu,isMenuOpen:this.state.openAddMenuIndex===e.index,isBlankCanvas:!this.state.questions.length,buttonAriaLabel:e.buttonAriaLabel,removedFromTabOrder:this.state.isCopyingQuestions,analyticsId:"assessmentCanvas.addQuestionButton"}),this.initCopyQuestionsStatusDisplay=e=>{const{loadCoursePreference:t}=this.props;t({key:q(e.id),courseId:e.courseId}).then(()=>{const e=this.props.copyQuestionTaskPref;if(e){const t="start",s=e.taskId,i=e.questionCount;this.getAndDisplayUpdatedCopyQuestionsTaskStatus(s,t,i),this.setPeriodicCheckOnCopyQuestionsTaskStatus(s,t,i)}})},this.isAnyQuestionDirty=()=>this.state.questionBeingEditedIsDirty,this.areQuestionsRandomized=()=>{const{content:e}=this.props;return e&&e.deploymentSettings&&e.deploymentSettings.isRandomizationOfQuestionsRequired},this.isCollectExternalSubmissions=()=>{const{content:e}=this.props;return e&&e.deploymentSettings&&e.deploymentSettings.isCollectExternalSubmissions},this.sortByPosition=e=>a.sortBy(e,"position"),this.hasSettingsEnabledBlockingAddOfNonPOQuestions=()=>this.hasAnonymousGrading()||this.hasRubricAssociations()||this.isCollectExternalSubmissions()||this.hasDelegatedGrading()||this.hasPeerGrading(),this.checkAndDisableAssessmentSettings=e=>{this.hasSettingsEnabledBlockingAddOfNonPOQuestions()?this.displayWarningDialog(()=>this.checkAndDisableAssessmentSettings(e)):e&&e()},this.displayWarningDialog=e=>{this.hasRubricAssociations()?this.showRubricAssociationsDialog(e):this.hasAnonymousGrading()?this.showAnonymousGradingDialog(e):this.isCollectExternalSubmissions()?this.showExternalSubmissionsDialog(e):this.hasDelegatedGrading()?this.showDelegatedGradingDialog(e):this.hasPeerGrading()&&this.showPeerGradingDialog(e)},this.addQuestion=e=>{this.checkAndDisableAssessmentSettings(()=>this.createQuestion(e))},this.addQuestionPool=()=>{this.checkAndDisableAssessmentSettings(this.openQuestionPoolQuestionPicker)},this.reuseQuestions=()=>{this.checkAndDisableAssessmentSettings(this.openReuseQuestionPicker)},this.createQuestion=e=>{const{assessment:t,createQuestion:s}=this.props,i=this.calculateQuestionPositionAfter();s(t.id,i,e)},this.hideWarningDialog=()=>{this.setState({isShowingWarningDialog:!1})},this.showAnonymousGradingDialog=e=>{this.showWarningDialog("anonymousGrading",this.removeAnonymousGrading,e)},this.showPeerGradingDialog=e=>{this.showWarningDialog("peerGrading",this.removePeerGrading,e)},this.showRubricAssociationsDialog=e=>{this.showWarningDialog("rubricAssociations",this.removeRubricAssociations,e)},this.showDelegatedGradingDialog=e=>{this.showWarningDialog("delegatedGrading",this.removeDelegatedGrading,e)},this.removeAnonymousGrading=()=>{const{gradebookColumn:e,persistGradebookColumn:t}=this.props;t(e,{...e,anonymousGrading:!1}).then(()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()}).catch(this.hideWarningDialog)},this.removeRubricAssociations=()=>{const{gradebookColumn:e,removeRubricAssociations:t}=this.props;t(e.id).then(()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()}).catch(this.hideWarningDialog)},this.removeDelegatedGrading=()=>{const{gradebookColumn:e,persistGradebookColumn:t}=this.props;t(e,{...e,delegatedGrading:!1}).then(()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()}).catch(this.hideWarningDialog)},this.removePeerGrading=()=>{const{content:e,persistContent:t}=this.props;t(e,{...e,contentDetail:{[c.ContentHandler.TestLink.handle]:{test:{deployedAssessmentType:p.DeployedAssessmentType.Test,gradingColumn:{peerGrading:!1,delegatedGrading:!1},peerSettings:{peerReviewDueDate:null,peerReviewsPerStudent:null,allowLatePeerReviews:null,evaluationColumnName:null}}}}}).then(()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()}).catch(this.hideWarningDialog)},this.showRandomizeDialog=(e=a.noop)=>{this.showWarningDialog("randomize",this.disableRandomization,e)},this.disableRandomization=()=>{const{content:e,persistContent:t}=this.props,s=e,i={...e,deploymentSettings:{...e.deploymentSettings,isRandomizationOfQuestionsRequired:!1}};this.hideWarningDialog(),t(s,i),this.state.disableAssessmentSettingCallback()},this.showExternalSubmissionsDialog=(e=a.noop)=>{this.showWarningDialog("externalSubmissions",this.disableExternalSubmissions,e)},this.disableExternalSubmissions=()=>{const{content:e,persistContent:t}=this.props;t(e,{...e,deploymentSettings:{...e.deploymentSettings,isCollectExternalSubmissions:!1}}).then(()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()})},this.addPresentationOnlyQuestion=(e,t=!0)=>{if(t&&this.areQuestionsRandomized()){const t=()=>this.addPresentationOnlyQuestion(e,!1);this.showRandomizeDialog(t)}else switch(e){case p.QuestionSubType.CloudFile:this.addFiles({openCloudStorageIntegrationModal:this.props.pluginsConfig.insertCloudStorageIntegrationFile.openCloudStorageIntegrationModal});break;case p.QuestionSubType.File:this.addFiles({multiple:!0});break;default:this.addText()}},this.addText=()=>{const{assessment:e,createQuestion:t}=this.props,s=this.calculateQuestionPositionAfter();t(e.id,s,p.QuestionType.PresentationOnly,{subType:p.QuestionSubType.Text})},this.addFiles=e=>{const{assessment:t,createQuestion:s,localize:i}=this.props,a=e=>{let t="";return e.forEach(e=>{t+=P.createFileLink(e)}),t};A.uploadFiles({localeProps:i.getLocalePropsForClone(),...e}).then(e=>{const i=this.calculateQuestionPositionAfter();s(t.id,i,p.QuestionType.PresentationOnly,{subType:p.QuestionSubType.File,questionText:{rawText:a(e)}})})},this.calculateQuestionPositionAfter=()=>{const e=this.state.addMenuTarget?this.state.addMenuTarget.props.index:0;return 0===e?"start":this.state.questions[e-1].id},this.openPoolQuestionPanel=e=>{this.props.applyAccessibilityHandling&&this.props.applyAccessibilityHandling(),this.setState({activeQuestionPoolId:e,isShowingQuestionPoolPanel:!0})},this.closeQuestionPoolPanel=(e=!1)=>{this.setState({isShowingQuestionPoolPanel:!1,...!e&&{activeQuestionPoolId:null}})},this.openReuseQuestionPicker=()=>{this.props.applyAccessibilityHandling&&this.props.applyAccessibilityHandling(),this.setState({isShowingReuseQuestionPicker:!0}),this.dismissCopyQuestionsStatusBanner()},this.openQuestionPoolQuestionPicker=()=>{this.props.applyAccessibilityHandling&&this.props.applyAccessibilityHandling(),this.setState({isShowingQuestionPoolQuestionPicker:!0}),this.dismissCopyQuestionsStatusBanner()},this.addQuestionsToEmptyPoolFromAssessmentCanvas=e=>{this.setState({activeQuestionPoolId:e},()=>this.openQuestionPoolQuestionPicker())},this.closeQuestionPoolQuestionPicker=(e=null,t)=>{const{revertAccessibilityHandling:s}=this.props,{activeQuestionPoolId:i}=this.state;e?this.setState(()=>({isShowingQuestionPoolQuestionPicker:!1}),()=>{s&&s(),i?this.addQuestionsToPool(e):this.createQuestionPool(e,t)}):this.setState(()=>({isShowingQuestionPoolQuestionPicker:!1}),()=>s&&s())},this.closeReuseQuestionPanel=(e=null,t)=>{const{revertAccessibilityHandling:s}=this.props;e?this.setState(()=>({isShowingReuseQuestionPicker:!1}),()=>{s&&s(),this.copyQuestions(e,t)}):this.setState(()=>({isShowingReuseQuestionPicker:!1}),()=>s&&s())},this.addQuestionsToPool=e=>{const{assessmentId:t,questionIds:s,selectAll:i,searchCriteria:a,excludeIds:n}=e,{addQuestionsToPool:o,courseId:r}=this.props;o(r,t,this.state.activeQuestionPoolId,{questionIds:s,selectAll:i,searchCriteria:a,excludeIds:n})},this.createQuestionPool=(e,t)=>{const{assessmentId:s,positionAfter:i,questionIds:a,selectAll:n,searchCriteria:o,excludeIds:r}=e,{createQuestion:l}=this.props;l(s,i,p.QuestionType.QuestionBlock,{questionIds:a,selectAll:n,searchCriteria:o,excludeIds:r,questionCount:t})},this.copyQuestions=(e,t)=>{T.shouldCallCopyQuestionsQueued(t)?(this.displayCopyQuestionsInProgress(e.positionAfter,t),this.copyQuestionsQueued(e,t)):(this.displayCopyQuestionsInProgress(e.positionAfter,t),this.copyQuestionsDirect(e))},this.copyQuestionsQueued=(e,t)=>{c.copyQuestionsQueued(e).then(s=>{this.updateCopyQuestionsTaskPref(s.taskId,t),this.displayAndUpdateCopyQuestionsStatusInfo(s,e.positionAfter,t)},e=>{this.props.setError(e.error)})},this.persistAllowStudentSubmission=e=>{const{content:t,persistContent:s}=this.props;s(t,{...t,deploymentSettings:{allowStudentSubmission:e,id:t.deploymentSettings.id}})},this.handleAllowStudentSubmissionChange=()=>{const{assessment:e,content:t}=this.props,s=null==e?void 0:e.hasAnswerableQuestions,i=this.hasSubmissions();s&&!i&&this.persistAllowStudentSubmission(!t.deploymentSettings.allowStudentSubmission)},this.checkAllowStudentSubmission=()=>{const{content:e,assessment:t}=this.props,s=null==t?void 0:t.hasAnswerableQuestions;return!1===s&&!1===e.deploymentSettings.allowStudentSubmission?(this.persistAllowStudentSubmission(!0),!0):!s},this.copyQuestionsDirect=e=>{c.copyQuestions(e).then(t=>{this.displayCopyQuestionsComplete(e.positionAfter,t.status),this.loadQuestions()},e=>{this.props.setError(e.error)})},this.loadQuestions=()=>{const{assessment:e,loadQuestions:t}=this.props;this.setState(()=>({isLoadingInProgress:!0})),t({courseId:e.courseId,assessmentId:e.id,refreshState:!0}).then(()=>{this.setState(()=>({isLoadingInProgress:!1}))})},this.updateCopyQuestionsTaskPref=(e,t)=>{const{assessment:s,saveCoursePreference:i}=this.props,a={taskId:e,questionCount:t};i(q(s.id),JSON.stringify(a),s.courseId)},this.deleteCopyQuestionsTaskPref=()=>{const{assessment:e,copyQuestionTaskPref:t,deleteCoursePreference:s}=this.props;if(t){s({key:q(e.id),courseId:e.courseId})}},this.displayAndUpdateCopyQuestionsStatusInfo=(e,t,s)=>{this.displayCopyQuestionsStatusInfo(e,t,s),this.setPeriodicCheckOnCopyQuestionsTaskStatus(e.taskId,t,s)},this.displayCopyQuestionsStatusInfo=(e,t,s)=>{if(T.hasCopyQuestionsTaskFinishedProcessing(e.taskStatus)){const{results:s}=e;this.displayCopyQuestionsComplete(t,s&&s.status,!1,this.dismissCopyQuestionsStatusBanner.bind(this))}else this.displayCopyQuestionsInProgress(t,s)},this.displayCopyQuestionsComplete=(e,t,s,i)=>{if(!this.state.notification||this.state.notification.type===d.NotificationType.Processing){const a=E.copyQuestionsResultNotification({positionAfter:e,copyStatus:t,autoDismiss:s,dismissNotification:i});this.setState(()=>({isCopyingQuestions:!1,notification:a}))}},this.displayCopyQuestionsInProgress=(e,t)=>{if(!this.state.notification||this.state.notification.type!==d.NotificationType.Processing){const s=E.processingStageNotification(e,t);this.setState(()=>({isCopyingQuestions:!0,notification:s}))}},this.setPeriodicCheckOnCopyQuestionsTaskStatus=(e,t,s)=>{this.copyQuestionsStatusInterval=setInterval(()=>{this.getAndDisplayUpdatedCopyQuestionsTaskStatus(e,t,s)},this.getCopyQuestionsStatusCheckIntervalDelay())},this.getCopyQuestionsStatusCheckIntervalDelay=()=>{const{features:e}=this.props;return e&&!e.isProduction?T.COPY_QUESTIONS_STATUS_CHECK_INTERVAL:T.PROD_COPY_QUESTIONS_STATUS_CHECK_INTERVAL},this.getAndDisplayUpdatedCopyQuestionsTaskStatus=(e,t,s)=>{c.getScheduledTask(e).then(e=>{T.hasCopyQuestionsTaskFinishedProcessing(e.taskStatus)&&(this.cancelCheckCopyQuestionsStatusInterval(),this.loadQuestions()),this.displayCopyQuestionsStatusInfo(e,t,s)})},this.cancelCheckCopyQuestionsStatusInterval=()=>{clearInterval(this.copyQuestionsStatusInterval)},this.getAddMenuOptions=()=>{const{localize:e,features:t,localizationPrefix:s}=this.props;return[{key:"newQuestionPool",icon:n.default.createElement(m.Add,null),name:e.translate("assessments.canvas.add.questionPool"),onClick:()=>this.addQuestionPool()},{key:"newCalculatedFormulaQuestion",icon:n.default.createElement(m.Add,null),name:e.translate(`${s}.canvas.add.calculatedFormula`),onClick:()=>this.addQuestion(p.QuestionType.CalculatedFormula)},{key:"newEssayQuestion",icon:n.default.createElement(m.Add,null),name:e.translate(`${s}.canvas.add.essay`),onClick:()=>this.addQuestion(p.QuestionType.Essay)},{key:"newFIMBQuestion",icon:n.default.createElement(m.Add,null),name:e.translate(`${s}.canvas.add.fimb`),onClick:()=>this.addQuestion(p.QuestionType.FIMB)},{key:"newMatchingQuestion",icon:n.default.createElement(m.Add,null),name:e.translate(`${s}.canvas.add.matching`),onClick:()=>this.addQuestion(p.QuestionType.Matching)},{key:"newMultipleAnswerQuestion",icon:n.default.createElement(m.Add,null),name:e.translate(`${s}.canvas.add.multipleAnswer`),onClick:()=>this.addQuestion(p.QuestionType.Multiple)},{key:"newTrueFalseQuestion",icon:n.default.createElement(m.Add,null),name:e.translate(`${s}.canvas.add.trueFalse`),onClick:()=>this.addQuestion(p.QuestionType.Either)},{key:"newReuseQuestion",icon:n.default.createElement(m.Add,null),name:e.translate(`${s}.canvas.add.reuseQuestions`),onClick:()=>this.reuseQuestions()},{key:"newText",icon:n.default.createElement(m.Text,null),name:e.translate(`${s}.canvas.add.text`),onClick:()=>this.addPresentationOnlyQuestion(p.QuestionSubType.Text)},{key:"newFile",icon:n.default.createElement(m.UploadFile,null),name:e.translate(`${s}.canvas.add.localFile`),onClick:()=>this.addPresentationOnlyQuestion(p.QuestionSubType.File)},{enabled:t&&t.cloudStorageIntegration,key:"newCloudFile",icon:n.default.createElement(m.UploadCloud,null),name:e.translate(`${s}.canvas.add.cloudFile`),onClick:()=>this.addPresentationOnlyQuestion(p.QuestionSubType.CloudFile)}].filter(e=>!{}.hasOwnProperty.call(e,"enabled")||!0===e.enabled)},this.hasSubmissions=()=>!0===a.get(this.props,"assessment.hasResponses"),this.hasAssessmentModifyPermissions=()=>!0===a.get(this.props,"assessment.permissions.modify"),this.hasRubricAssociations=()=>{const e=this.props.gradebookColumn;return!!e&&!!e.rubricAssociations&&!!e.rubricAssociations.length},this.hasAnonymousGrading=()=>{const e=this.props.gradebookColumn;return!!e&&!!e.anonymousGrading},this.hasPeerGrading=()=>{const e=this.props.gradebookColumn;return!!e&&!!e.peerGrading&&!!e.delegatedGrading},this.hasDelegatedGrading=()=>{const e=this.props.gradebookColumn;return!!e&&!!e.delegatedGrading&&!e.peerGrading},this.onToggleAddMenu=(e,t)=>{this.setState({addMenuTarget:e,openAddMenuIndex:t})},this.onDismissAddMenu=()=>{const{addMenuTarget:e,isShowingReuseQuestionPicker:t,openAddMenuIndex:s}=this.state;-1!==s&&(this.setState({openAddMenuIndex:-1}),e&&!t&&e.focus())},this.onReorder=(e,t)=>{const s=a.findIndex(e,e=>e.id===t.id),i={...t,positionAfter:0===s?"start":e[s-1].id};this.persistQuestion(t,i,this.props.assessment.id)},this.onQuestionEdit=e=>{this.setState(()=>({questionBeingEditedId:e}))},this.onQuestionMadeDirty=e=>{e!==this.state.questionBeingEditedIsDirty&&(this.props.setIsAnyQuestionDirty(e),this.setState(()=>({questionBeingEditedIsDirty:e})))},this.deleteQuestion=e=>{const{deleteQuestion:t}=this.props;t(e)},this.persistQuestion=(e,t,s)=>{const{persistQuestion:i}=this.props;return Promise.resolve(i(e,t,{assessmentId:s,expand:"alignedGoals,usageCount"}))},this.state={activeQuestionPoolId:null,addMenuTarget:null,disableAssessmentSettingCallback:null,hasCopyQuestionsStatusInitialized:!1,isCopyingQuestions:!1,isLoadingInProgress:!0,isShowingQuestionPoolPanel:!1,isShowingWarningDialog:!1,openAddMenuIndex:-1,questions:[],questionBeingEditedId:null,questionBeingEditedIsDirty:!1,isShowingQuestionPoolQuestionPicker:!1,isShowingReuseQuestionPicker:!1,notification:null,warningDialogSubText:null,warningDialogTitle:null,warningDialogOnOK:null}}UNSAFE_componentWillReceiveProps(e){const{assessment:t,isLoadingInProgress:s,questions:i}=e,{hasCopyQuestionsStatusInitialized:a,isLoadingInProgress:n}=this.state;this.setState(()=>({questions:this.sortByPosition(i)})),n&&this.setState(()=>({isLoadingInProgress:s||!t||t.questionCount>0&&0===i.length})),!a&&!!t&&this.setState(()=>({hasCopyQuestionsStatusInitialized:!0}),()=>this.initCopyQuestionsStatusDisplay(t))}componentWillUnmount(){this.cancelCheckCopyQuestionsStatusInterval()}shouldInsertWarningDialog(){return this.areQuestionsRandomized()||this.hasAnonymousGrading()||this.hasRubricAssociations()||this.isCollectExternalSubmissions()||this.hasDelegatedGrading()||this.hasPeerGrading()}showWarningDialog(e,t,s){const{localizationPrefix:i}=this.props;this.setState(()=>({isShowingWarningDialog:!0,warningDialogSubText:`${i}.canvas.warningDialogs.${e}.subText`,warningDialogTitle:`${i}.canvas.warningDialogs.${e}.title`,warningDialogOnOK:t,disableAssessmentSettingCallback:s}))}dismissCopyQuestionsStatusBanner(){this.setState(()=>({notification:null})),this.deleteCopyQuestionsTaskPref(),this.cancelCheckCopyQuestionsStatusInterval()}renderReuseQuestionPicker(){const{assessment:e,courseId:t,features:s,localizationPrefix:i}=this.props;if(!(!!e&&this.state.isShowingReuseQuestionPicker))return null;const a={assessmentId:e.id,assessmentTitle:e.title,questionPositionAfter:this.calculateQuestionPositionAfter(),showRandomizeDialog:this.areQuestionsRandomized()&&this.showRandomizeDialog};return n.default.createElement(C.default,{courseId:t,destination:a,closePanel:this.closeReuseQuestionPanel,features:s,localizationPrefix:i})}renderQuestionPoolQuestionPicker(){const{assessment:e,courseId:t,features:s,localizationPrefix:i}=this.props;if(!(!!e&&this.state.isShowingQuestionPoolQuestionPicker))return null;const a={assessmentId:e.id,assessmentTitle:e.title,questionPositionAfter:this.calculateQuestionPositionAfter()};return n.default.createElement(w.default,{courseId:t,destination:a,closePanel:this.closeQuestionPoolQuestionPicker,features:s,localizationPrefix:i})}renderPoolQuestionPanel(){const{activeQuestionPoolId:e,isShowingQuestionPoolPanel:t}=this.state;return!!this.props.assessment&&!!e&&t?n.default.createElement(y.default,{questionPoolId:e,assessmentId:this.props.assessment.id,assessmentTitle:this.props.assessment.title,closePanel:this.closeQuestionPoolPanel,courseId:this.props.courseId,hasSubmissions:this.hasSubmissions(),hasAssessmentModifyPermissions:this.hasAssessmentModifyPermissions(),openQuestionPicker:this.openQuestionPoolQuestionPicker,persistQuestion:this.persistQuestion,localizationPrefix:this.props.localizationPrefix}):null}render(){const{assessment:e,content:t,courseId:s,localize:i,gradebookColumn:a,localizationPrefix:o}=this.props,r=this.hasSubmissions(),l=this.hasAssessmentModifyPermissions(),u=this.getAddMenuOptions(),c=!this.state.isLoadingInProgress&&0===this.state.questions.length,p=null==t?void 0:t.deploymentSettings.allowStudentSubmission,m=null==e?void 0:e.hasAnswerableQuestions,f=m?"AdditionalContentTitle":"SubmissionTitle";let y,E;return a&&a.gradebookCategory&&(E=a.gradebookCategory.title,y=a.gradebookCategory.isUserDefined?"custom":E),n.default.createElement("div",{className:"assessment-canvas-react"},c&&!this.isCollectExternalSubmissions()&&n.default.createElement("div",{className:"assessment-canvas-react assessment-canvas-react--blank"},n.default.createElement(h.default,{image:b.default,passedClass:"assessment-canvas-react--blank__image"}),n.default.createElement("h3",{className:"assessment-canvas-react--blank__title"},i.translate(`${o}.canvas.emptyState.header.${y}`,{categoryTitle:E})),n.default.createElement("div",null,i.translate(`${o}.canvas.emptyState.saving`)),n.default.createElement("div",null,i.translate(`${o}.canvas.emptyState.closeToSave.${y}`,{categoryTitle:E}))),this.state.isLoadingInProgress&&n.default.createElement(d.Spinner,{size:d.SpinnerSize.large}),-1!==this.state.openAddMenuIndex&&n.default.createElement(d.ContextualMenu,{items:u,gapSpace:10,onDismiss:this.onDismissAddMenu,target:this.state.addMenuTarget.inlineAddButton,shouldFocusOnMount:!0,directionalHint:5,id:"assessment-canvas-add-content-menu",menuAriaLabel:i.translate(`${o}.canvas.add.menu`)}),!this.state.isLoadingInProgress&&n.default.createElement("div",{className:"assessment-canvas-react__question-list"},0===this.state.questions.length||null==t?null:n.default.createElement("div",null,n.default.createElement("h2",{className:"assessment-canvas-react__heading"},i.translate(`${o}.canvas.content.${y}`,{categoryTitle:E})),n.default.createElement(_.default,{assessment:e,content:t,localize:i,localizationPrefix:this.props.localizationPrefix})),n.default.createElement(g.default,{courseId:s,items:this.state.questions,boundingElementId:"gradebook-item-panel-content",onReorderItem:this.onReorder,scrollContainerId:"basic-container",checkAndDisableAssessmentSettings:this.checkAndDisableAssessmentSettings,persistQuestion:this.persistQuestion,deleteQuestion:this.deleteQuestion,AddButton:this.AddButton,onQuestionEdit:this.onQuestionEdit,onQuestionMadeDirty:this.onQuestionMadeDirty,questionBeingEditedId:this.state.questionBeingEditedId,isAnyQuestionDirty:this.isAnyQuestionDirty(),hasSubmissions:r,localize:i,isLoadingInProgress:this.state.isLoadingInProgress,hasAssessmentModifyPermissions:l,openGoals:this.props.routes.openGoals,pluginsConfig:this.props.pluginsConfig,notification:this.state.notification,babelfishInstance:this.props.babelfishInstance,currentLocale:this.props.currentLocale,disableInteraction:this.state.isCopyingQuestions,openPoolQuestionPanel:this.openPoolQuestionPanel,addQuestionsToEmptyPool:this.addQuestionsToEmptyPoolFromAssessmentCanvas,localizationPrefix:this.props.localizationPrefix})),this.state.isCopyingQuestions&&n.default.createElement("div",{className:"assessment-canvas-react__questions-overlay"}),!this.state.isLoadingInProgress&&!this.isCollectExternalSubmissions()&&n.default.createElement("div",{className:"assessment-canvas-react__student-submission"},n.default.createElement("div",{className:"assessment-canvas-react__student-submission-switch"},n.default.createElement("div",{className:"assessment-canvas-react__student-submission-switch__container"},n.default.createElement(R.AnalyticsTooltip,{classes:{tooltip:"add-additional-content-tooltip"},title:i.translate(`${o}.canvas.studentSubmission.SwitchTooltip`),analyticsId:"course.content.assessment.AllowStudentSubmission.switchTooltip",placement:"top-start",disableFocusListener:m,disableHoverListener:m},n.default.createElement(R.AnalyticsFormControlLabel,{classes:{root:"switch-root"},htmlFor:"student-submission-display-selector",onClick:()=>this.handleAllowStudentSubmissionChange(),checked:p,disabled:this.checkAllowStudentSubmission()||r,"aria-label":i.translate(`${o}.canvas.studentSubmission.switchLabel`),control:n.default.createElement(R.AnalyticsSwitch,{id:"student-submission-display-switch",className:"assessment-canvas-react_student-submission-switch"}),"data-analytics-id":v})),n.default.createElement("span",{className:"assessment-canvas-react__student-submission-switch__label"},i.translate(`${o}.canvas.studentSubmission.switchLabel`))),m&&!p&&!r&&n.default.createElement("div",{className:"assessment-canvas-react__student-submission-switch__note"},i.translate(`${o}.canvas.studentSubmission.switchNote`))),p&&n.default.createElement("div",{className:"assessment-canvas-react__student-submission-section"},!c&&n.default.createElement("div",{className:"assessment-canvas-react__student-submission__additional-content"},i.translate(`${o}.canvas.studentSubmission.${f}`)),n.default.createElement("div",{className:"assessment-canvas-react__student-submission__student-submission-info"},i.translate(`${o}.canvas.studentSubmission.AdditionalContentSubtext`)))),this.shouldInsertWarningDialog()&&n.default.createElement(S.default,{show:this.state.isShowingWarningDialog,onCancel:this.hideWarningDialog,onDismiss:this.hideWarningDialog,onOk:this.state.warningDialogOnOK,subText:i.translate(this.state.warningDialogSubText),title:i.translate(this.state.warningDialogTitle),key:this.state.warningDialogTitle,analyticsId:"assessmentCanvas.insertWarning"}),this.renderReuseQuestionPicker(),this.renderQuestionPoolQuestionPicker(),this.renderPoolQuestionPanel())}}T.SYNC_QUESTION_COPY_LIMIT=50,T.PROD_COPY_QUESTIONS_STATUS_CHECK_INTERVAL=3e4,T.COPY_QUESTIONS_STATUS_CHECK_INTERVAL=8e3,T.propTypes={addQuestionsToPool:l.default.func.isRequired,applyAccessibilityHandling:l.default.func,assessment:l.default.object,questions:l.default.array.isRequired,content:l.default.object,courseId:l.default.string.isRequired,gradebookColumn:l.default.object,createQuestion:l.default.func.isRequired,deleteQuestion:l.default.func.isRequired,isLoadingInProgress:l.default.bool,persistQuestion:l.default.func.isRequired,persistContent:l.default.func.isRequired,persistGradebookColumn:l.default.func.isRequired,removeRubricAssociations:l.default.func.isRequired,localize:l.default.object.isRequired,currentLocale:l.default.string.isRequired,features:l.default.shape({isProduction:l.default.bool,cloudStorageIntegration:l.default.bool}),pluginsConfig:l.default.object.isRequired,revertAccessibilityHandling:l.default.func,routes:l.default.object.isRequired,setIsAnyQuestionDirty:l.default.func.isRequired,babelfishInstance:l.default.object.isRequired,loadQuestions:l.default.func.isRequired,setError:l.default.func.isRequired,copyQuestionTaskPref:l.default.object,deleteCoursePreference:l.default.func.isRequired,loadCoursePreference:l.default.func.isRequired,saveCoursePreference:l.default.func.isRequired,localizationPrefix:l.default.string.isRequired},T.shouldCallCopyQuestionsQueued=e=>e>T.SYNC_QUESTION_COPY_LIMIT,T.hasCopyQuestionsTaskFinishedProcessing=e=>"COMPLETE"===e||"COMPLETE_ERRORS"===e||"INCOMPLETE"===e,t.parseCopyQuestionTaskObjFromPref=e=>{const t=e&&e.value&&JSON.parse(e.value);return a.isEmpty(t)?null:t};const I=r.connect((e,s)=>{const i=a.get(s,"assessment.courseId"),n=a.get(s,"assessment.id"),o=q(n),r=c.select.coursePreference.getCoursePreferenceByKeyAndCourseId(e,o,i);return{copyQuestionTaskPref:t.parseCopyQuestionTaskObjFromPref(r)}},e=>o.bindActionCreators({addQuestionsToPool:c.actions.question.updateQuestionsInQuestionBlock,deleteCoursePreference:c.actions.coursePreference.deleteCoursePreference,loadCoursePreference:c.actions.coursePreference.loadCoursePreference,saveCoursePreference:(e,t,s)=>{const i={key:e,value:t,visibleToStudents:!1};return c.actions.coursePreference.persistCoursePreference(i,s)},setError:c.actions.app.setError},e))(T);t.UnwrappedAssessmentCanvas=T,t.default=u.localizedComponentWrapper(I)},anH7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("Agfx");t.useStyles=i.makeStyles(()=>i.createStyles({progressBarClass:{height:10}}))},axjr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("kBJj"),r=i.__importDefault(s("Pfoe")),l=s("p1hm"),u=s("3ZJq");s("10dR");const d=e=>{const{question:t,answersInfo:s,answersInfoLabel:i,localize:n,questionTextClassName:d}=e,c={},p=e=>{const t=c[e];if(t)return t;const s=e.split("-")[1],i=n.translate("assessments.canvas.question.fimb.blank",{count:s});return c[e]=i,i};return a.default.createElement("div",{className:"readonly-fimb-question"},a.default.createElement("div",{className:d},a.default.createElement(r.default,{id:t.id,plugins:[o.customClass()],bbml:(e=>{let t=e.questionText.rawText;return e.answers.forEach(e=>{const{ident:s}=e,i=c[s];if(i)t=t.replace(s,i);else{const e=p(s);t=t.replace(s,e),c[s]=e}}),t})(t),isReadOnly:!0,refreshBbml:!0})),a.default.createElement("div",{className:"readonly-fimb-question"},a.default.createElement("div",{className:"readonly-answer__container"},a.default.createElement("span",{className:"readonly-fimb-question__instructions readonly-answer__instructions readonly-answer__main"}),s&&a.default.createElement("span",{className:"readonly-answer__info-label readonly-answer__info"},i)),t.answers.map((e,t)=>{const i=e.answerValues[0],o=l.EvaluationTypeEnum[i.evaluationType].locKey,r=n.translate(`${o}.${i.caseSensitive?"readOnlyCaseSensitive":"readOnly"}`);return a.default.createElement("div",{key:e.ident,className:"readonly-fimb-question-answer"},a.default.createElement("div",{className:"readonly-answer__container"},a.default.createElement("div",{className:"readonly-answer__main readonly-fimb-question-answer-input"},a.default.createElement("div",{className:"readonly-fimb-question-answer-input__label"},p(e.ident)),a.default.createElement("div",{className:"readonly-fimb-question-answer-input__input-wrapper"},a.default.createElement("div",{className:"readonly-fimb-question-answer-input__answer"},e.answerValues.map(e=>e.value).join(";")))),s&&a.default.createElement("div",{className:"readonly-answer__info"},s[t])),a.default.createElement("div",{className:"readonly-fimb-question-answer__description"},r))}),a.default.createElement(u.AutomatedQuestionFeedbackRead,{question:t})))};d.propTypes={question:n.default.object.isRequired,answersInfo:n.default.array,answersInfoLabel:n.default.string,localize:n.default.object.isRequired,questionTextClassName:n.default.string.isRequired},t.default=d},b0Dq:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("kBJj"),a=s("aPd7");t.getFileViewerPropsArray=function(e){return a.parseFilesFromBbML(e.questionText.rawText).map(e=>{const{bbfile:t,href:s}=e;return{file:{resourceUrl:s,fileName:i.getFileNameWithTypeExtension(t.linkName,t.mimeType),render:t.render,alternativeText:t.alternativeText||t.linkName,displayInline:"inline"===t.render,displayName:t.linkName,mimeType:t.mimeType,isDecorative:t.isDecorative||!1},readOnly:!0,showContextMenu:!1}})}},bNEL:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("7Eh6")),o=i.__importDefault(s("M+qG")),r=s("leLK"),l=s("H9Ny"),u=s("GIU+");t.default=({accessCode:e,onAccessCodeChanged:t})=>{const[s,i]=a.useState(e),[d,c]=a.useState(!1),{containerClass:p}=l.useStyles(),m=a.useCallback(()=>{const e=r.generateAccessCode();i(e),t(e),c(!0),setTimeout(()=>c(!1),1500)},[t]),f=a.useCallback(()=>{u.writeText(e)},[e]);return s||m(),a.createElement("div",{className:p},a.createElement(n.default,{code:s,isNew:d}),a.createElement(o.default,{onCodeCopy:f,onCodeRefresh:m}))}},cFZT:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz"));s("5NQ0");const o=({image:e,passedClass:t,presentationOnly:s})=>{const i=["svg-image"];return t&&i.push(t),a.default.createElement("div",{className:i.join(" "),dangerouslySetInnerHTML:{__html:e},"aria-hidden":s})};o.propTypes={image:n.default.string.isRequired,passedClass:n.default.string,presentationOnly:n.default.bool},t.default=o},cTTT:function(e,t,s){"use strict";s.r(t)},d6RO:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz"));s("0JkB");const o=e=>{const{text:t}=e;return a.default.createElement("div",{className:"divider-text-container"},a.default.createElement("span",null,t))};o.propTypes={text:n.default.string.isRequired},t.default=o},dn4g:function(e,t,s){"use strict";s.r(t)},eecw:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=s("JfV0"),o=s("HYHd"),r=s("uDfI"),l=i.__importDefault(s("aWzz")),u=i.__importDefault(s("3Md0")),d=e=>{return a.default.createElement(u.default,Object.assign({},e,{noResultsKeys:{title:"questionPools.emptyState.dueToFilter.header",message:"questionPools.emptyState.dueToFilter.message"},noSourcesKeys:{title:"questionPools.emptyState.dueToSource.header",message:"questionPools.emptyState.dueToSource.message"},headerKeys:{title:"questionPools.questionPickerHeader"},footerKeys:{primaryButton:"questionPools.footer.primaryButtonText",selectedCount:"questionPools.footer.selectedCount"},pageHelpKey:"questionPools.pageHelpUrl",cancelModalKeys:{title:"questionPools.cancelDialog.title",message:"questionPools.cancelDialog.subText"},searchQuestions:t=>{const s={...t,...!t.questionTypes&&{questionTypes:o.QUESTION_POOL_SUPPORTED_QUESTION_TYPES_AS_STRINGS},...!t.assessmentIds&&{excludeAssessmentIds:[e.destination.assessmentId]}};return n.searchQuestions(s)}}))};t.mapStateToProps=(e,t)=>{const s=n.select.assessment.getAssessmentsByCourseId(e,t.courseId),i=n.select.questionType.getQuestionTypesByCourseId(e,t.courseId);return{sources:_.filter(s,e=>e.id!==t.destination.assessmentId),questionTypes:o.getSupportedQuestionPoolQuestionTypes(i)}};const c=r.connect(t.mapStateToProps)(d);d.propTypes={closePanel:l.default.func.isRequired,courseId:l.default.string.isRequired,destination:l.default.object.isRequired,localizationPrefix:l.default.string.isRequired,questionTypes:l.default.array,sources:l.default.array},t.default=c},eoCN:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("JfV0"),r=s("Vng8"),l=i.__importDefault(s("XeRt")),u=i.__importDefault(s("ZfLe"));class d extends a.Component{constructor(e){super(e),this.validate=(e,t)=>{const s=t.answers.some(e=>""===e.answerText.rawText),i=t.answers.some(e=>e.correctAnswer);return!s&&i&&r.hasMultipleAnswerQuestionChanged(e,t)},this.onQuestionChange=e=>{const t=e.allowPartialCredit?{...e,answers:this.calculateAnswersPartialCreditPercentage(e.answers,e.allowNegativeScoreForIncorrectAnswers)}:{...e};this.props.onQuestionChange(t,this.validate)},this.onAnswerChange=e=>{const{question:t,hasSubmissions:s}=this.props,i=t.answers.map(t=>t.id===e.id?e:t),a=1===this.countCorrectAnswers(i),n={...t,answers:i,singleCorrectAnswer:a};s&&a&&Object.assign(n,{allowNegativeOverallScore:!1,allowNegativeScoreForIncorrectAnswers:!1,allowPartialCredit:!1}),this.onQuestionChange(n,this.validate)},this.onAnswerAddition=()=>{const{question:e,setActiveEditorId:t}=this.props,s=o.Questions.createMultipleAnswerAnswer(!1),i={...e,answers:[...e.answers,s]};this.onQuestionChange(i,r.hasMultipleAnswerQuestionChanged,()=>t(s.id))},this.onAnswerDeletion=e=>{const{question:t}=this.props,s={...t,answers:t.answers.filter(t=>t.id!==e)};this.onQuestionChange(s,r.hasMultipleAnswerQuestionChanged)},this.onScoringOptionsChange=e=>{const{question:t}=this.props,s={...t,...e};this.onQuestionChange(s,r.hasMultipleAnswerQuestionChanged)},this.calculateAnswersPartialCreditPercentage=(e,t)=>{const s=e.filter(e=>e.correctAnswer).length,i=parseFloat((-100/e.length).toFixed(8)),a=parseFloat((100/s).toFixed(8)),n=parseFloat((100-a*s).toFixed(8));let o=0;return e.map(e=>{let r;if(e.correctAnswer)return r=(o+=1)===s?a+n:a,{...e,partialCredit:r.toFixed(8)};if(t)return r=i,{...e,partialCredit:r.toFixed(8)};if(!t){const t={...e};return t.partialCredit&&delete t.partialCredit,{...t}}return e})},this.canDeleteAnswer=e=>{const{correctAnswerCount:t}=this.state,{question:s}=this.props;return!(s.answers.length===o.MULTIPLE_ANSWER_MINIMUM_REQUIRED_AMOUNT_OF_ANSWERS||1===t&&e.correctAnswer)},this.onReorder=e=>{const{onQuestionChange:t,question:s}=this.props;t({...s,answers:e},r.hasMultipleAnswerQuestionChanged)},this.state={correctAnswerCount:this.countCorrectAnswers(e.question.answers)}}countCorrectAnswers(e){return e.filter(e=>e.correctAnswer).length}UNSAFE_componentWillReceiveProps(e){this.setState(()=>({correctAnswerCount:this.countCorrectAnswers(e.question.answers)}))}render(){return a.default.createElement(l.default,Object.assign({},this.props,{onReorder:this.onReorder,onQuestionChange:this.onQuestionChange,onAnswerChange:this.onAnswerChange,onAnswerAddition:this.onAnswerAddition,onAnswerDeletion:this.onAnswerDeletion,onScoringOptionsChange:this.onScoringOptionsChange,showScoringOptions:this.state.correctAnswerCount>1,canDeleteAnswer:this.canDeleteAnswer}))}}t.MultipleAnswerContainer=d,d.propTypes={question:n.default.object.isRequired,onQuestionChange:n.default.func.isRequired,setActiveEditorId:n.default.func.isRequired,pluginsConfig:n.default.object.isRequired,hasSubmissions:n.default.bool.isRequired},t.default=u.default(d)},f6u1:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=e=>a.default.createElement("p",null,"readonly essay presentation-only content: ",e.question.id);o.propTypes={question:n.default.object.isRequired},t.default=o},fCe2:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importStar(s("nsO7")),a=i.memoize(e=>{const t=i.transform(e.blocks,(e=[],t)=>(i.each(t.groups,t=>{const s=i.filter(t.items,e=>e.selected);e.push(s)}),e));return i.flatten(t)},e=>JSON.stringify(e));t.default=a},fSUK:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("M0dR"),l=s("j92x"),u=s("JfV0"),d=s("a6r6"),c=s("/R3Y"),p=i.__importDefault(s("Pfoe")),m=s("2yjE"),f=i.__importDefault(s("W2w9"));s("umMl");const h=s("t6ux"),g=s("wMBS");function b(e){return null==e.answerFormulaErrorKey}function y(e){return null==e.questionTextErrorKey}function E(e){return y(e)&&b(e)}t.EMPTY_QUESTION_TEXT="questionTextEmpty",t.INVALID_VARIABLE_ERROR_KEY="questionTextInvalidVariableNameError",t.RESERVED_VARIABLE_ERROR_KEY="questionTextReservedVariableNameError",t.UNCLOSED_BRACKET_ERROR_KEY="questionTextUnclosedBracketError",t.VARIABLES_UNEDITABLE_ERROR_KEY="questionTextVariablesUneditableError",t.CLASS_PREFIX="calculated-formula-question__step-1";class C extends a.default.Component{constructor(e){super(e),this.wirisEditorInstance=null,this.originalAnswerFormula="",this.getFullLocalizationKey=e=>`assessments.canvas.question.calculatedFormula.stepOne.${e}`,this.getQuestionTextErrorKey=()=>{const e=this.props.question.questionText.rawText;if(!e)return this.getFullLocalizationKey(t.EMPTY_QUESTION_TEXT);if(h.questionTextHasUnclosedBrackets(e))return this.getFullLocalizationKey(t.UNCLOSED_BRACKET_ERROR_KEY);const s=h.extractVariableCandidatesFromQuestionText(e);if(s.some(e=>h.isVariableAWirisEditorReservedWord(e)))return this.getFullLocalizationKey(t.RESERVED_VARIABLE_ERROR_KEY);if(s.some(e=>h.variableNameContainsNonLetterCharacters(e)))return this.getFullLocalizationKey(t.INVALID_VARIABLE_ERROR_KEY);const i=h.extractVariableCandidatesFromQuestionText(this.originalQuestionText);return this.props.hasSubmissions&&!_.isEqual(i,s)?this.getFullLocalizationKey(t.VARIABLES_UNEDITABLE_ERROR_KEY):null},this.handleNextStepClick=()=>{const e=this.getQuestionTextErrorKey();y({questionTextErrorKey:e})?this.doesAnswerFormulaHaveVariablesWithoutDefinitions()?this.setUnrecognizedVariablesInAnswerFormulaState():this.isAnswerFormulaValidPromise().then(e=>{e?(this.setAnswerFormulaValidState(),this.setVariableSetCountIfNoVariables(),this.handleGoToNextStep()):this.setAnswerFormulaInvalidState()}):this.setState({questionTextErrorKey:e})},this.doesAnswerFormulaHaveVariablesWithoutDefinitions=()=>{const{question:e}=this.props;return h.getUnrecognizedVariablesInAnswerFormula(e.answerFormula,e.variableDefinitions).length>0},this.setUnrecognizedVariablesInAnswerFormulaState=()=>{const{question:e}=this.props,t=h.getUnrecognizedVariablesInAnswerFormula(e.answerFormula,e.variableDefinitions);this.setState({answerFormulaErrorKey:this.getFullLocalizationKey("unrecognizedVariablesInFormula"),answerFormulaErrorKeyParams:{variablesCount:t.length,variables:t}})},this.setVariableSetCountIfNoVariables=()=>{h.doesQuestionHaveVariables(this.props.question)||this.props.onQuestionChange({variableSetCount:u.CALCULATED_FORMULA_ANSWER_SET_COUNT_WITH_NO_VARIABLES})},this.setAnswerFormulaValidState=()=>{this.setState({answerFormulaErrorKey:null,answerFormulaErrorKeyParams:null})},this.setAnswerFormulaInvalidState=()=>{this.setState({answerFormulaErrorKey:this.getFullLocalizationKey("invalidFormula"),answerFormulaErrorKeyParams:{}})},this.isAnswerFormulaValidPromise=()=>{const{courseId:e,question:t}=this.props,s=h.doesQuestionHaveVariables(t)?h.generateVariableValues(t.variableDefinitions):{};return u.evaluateMathML(e,t.answerFormula,s).then(()=>!0,()=>!1)},this.handleGoToNextStep=()=>{this.generateNewMathMLImage(),this.props.onGoToNextStep()},this.generateNewMathMLImage=()=>{const{courseId:e,onQuestionChange:t,question:s}=this.props;null!=s.mathMLImageURL&&s.answerFormula===this.originalAnswerFormula||(this.originalAnswerFormula=s.answerFormula,u.getMathMLToImageURL(s.answerFormula,{courseId:e,expand:"mathMLImageAltText"}).then(e=>{t({mathMLImageURL:e.mathMLImageURL,mathMLImageAltText:e.mathMLImageAltText})}))},this.handleQuestionTextChange=e=>{this.props.onQuestionChange({questionText:{rawText:e.toBbML()}})},this.handleQuestionTextBlur=()=>{const e=this.getQuestionTextErrorKey();this.setState({questionTextErrorKey:e}),y({questionTextErrorKey:e})&&this.updateVariableDefinitionsFromQuestionText()},this.updateVariableDefinitionsFromQuestionText=()=>{const{onQuestionChange:e,question:t}=this.props;e({variableDefinitions:h.extractVariableCandidatesFromQuestionText(t.questionText.rawText).map(e=>{const s=t.variableDefinitions.findIndex(t=>t.name===e);return s>-1?{...t.variableDefinitions[s]}:h.getVariableDefinitionFromCandidate(e)})})},this.handleMathEditorLoad=e=>{this.wirisEditorInstance=e,d.WirisEditorInstanceUtils.attachContentChangeListener(e,this.handleMathEditorChange),d.WirisEditorInstanceUtils.enableReservedWords(e),this.updateReservedWordsInMathEditor()},this.handleMathEditorChange=e=>{!this.hasMathEditorSetInitialValue&&this.originalAnswerFormula||this.props.onQuestionChange({answerFormula:e}),e===this.originalAnswerFormula&&(this.hasMathEditorSetInitialValue=!0)},this.updateReservedWordsInMathEditor=()=>{const{question:e}=this.props;d.WirisEditorInstanceUtils.setReservedWords(this.wirisEditorInstance,h.getVariablesFromVariableDefinitions(e.variableDefinitions))},this.handleMathEditorError=e=>{console.error(e)},this.toggleDisplayFormulaToStudent=e=>{this.props.onQuestionChange({displayFormulaToStudent:e.target.checked})},this.originalAnswerFormula=e.question.answerFormula,this.originalQuestionText=e.question.questionText.rawText,this.hasMathEditorSetInitialValue=!1,this.state={answerFormulaDirty:!1,answerFormulaErrorKey:null,answerFormulaErrorKeyParams:null,questionTextDirty:!1,questionTextErrorKey:null}}componentDidMount(){this.props.onValidate(E(this.state))}componentDidUpdate(e,t){const{question:s}=e,{question:i}=this.props;if(this.wirisEditorInstance&&h.haveVariablesChanged(s.variableDefinitions,i.variableDefinitions)&&(this.updateReservedWordsInMathEditor(),this.setState({questionTextDirty:!0})),s.questionText.rawText!==i.questionText.rawText){y({questionTextErrorKey:this.getQuestionTextErrorKey()})||this.setState({questionTextDirty:!0})}s.answerFormula!==i.answerFormula&&this.setState({answerFormulaDirty:i.answerFormula!==this.originalAnswerFormula}),t.answerFormulaDirty===this.state.answerFormulaDirty&&t.questionTextDirty===this.state.questionTextDirty||this.props.onAnswerSetsRelatedFieldDirty(this.state.answerFormulaDirty||this.state.questionTextDirty),E(t)!==E(this.state)&&this.props.onValidate(E(this.state))}render(){const{activeEditorId:e,currentLocale:s,disableFocus:i,editorPlugins:n,localize:o,pluginsConfig:_,question:E,questionTitle:C,refreshBbml:w,setActiveEditorId:S}=this.props,{answerFormulaErrorKey:P,answerFormulaErrorKeyParams:A,questionTextErrorKey:R}=this.state,v=o.translate("assessments.canvas.question.placeholder.question",{questionTitle:C||""}),q=`${m.QUESTION_TITLE_ID_PREFIX}${E.id}`,T=`math-editor${E.id}`;return a.default.createElement("div",{className:`${t.CLASS_PREFIX}`},a.default.createElement("div",{className:`${t.CLASS_PREFIX}__question-text-heading`},a.default.createElement(r.AnalyticsTypography,{component:"label",variant:"h4",htmlFor:`bb-editor${E.id}`,required:!0},o.translate("assessments.canvas.question.calculatedFormula.stepOne.questionTextTitle")),a.default.createElement(r.AnalyticsTypography,{component:"div",variant:"body1",className:`${t.CLASS_PREFIX}__question-field-instructions`},o.translate("assessments.canvas.question.calculatedFormula.stepOne.questionTextInstructions"))),a.default.createElement("div",{className:`${t.CLASS_PREFIX}__question-text-container`},a.default.createElement(p.default,{activeEditorId:e,ariaLabelledBy:q,ariaRequired:!0,bbml:E.questionText.rawText,disableFocus:i,id:E.id,isReadOnly:!1,keepToolbarVisible:!1,onChange:this.handleQuestionTextChange,placeholder:v,plugins:n,pluginsConfig:_,refreshBbml:w,setActiveEditorId:S,onBlur:this.handleQuestionTextBlur,errorMessage:o.translate(R)})),a.default.createElement("div",{className:`${t.CLASS_PREFIX}__question-formula-heading`},a.default.createElement(r.AnalyticsTypography,{component:"label",variant:"h4",htmlFor:T,required:!0},o.translate("assessments.canvas.question.calculatedFormula.stepOne.questionFormulaTitle")),a.default.createElement(r.AnalyticsTypography,{component:"div",variant:"body1",className:`${t.CLASS_PREFIX}__question-field-instructions`},o.translate("assessments.canvas.question.calculatedFormula.stepOne.questionFormulaInstructions"))),a.default.createElement("div",{className:`${t.CLASS_PREFIX}__formula-editor-container`,id:T},a.default.createElement(d.MathEditor,{apiBasePath:u.getAbsoluteApiBaseURL(),className:c.removeExtraWhitespace(`\n                            ${t.CLASS_PREFIX}__formula-editor\n                            ${b(this.state)?"":`${t.CLASS_PREFIX}__formula-editor--error`}\n                        `),initialMathML:E.answerFormula,locale:s,isRtl:o.isRtl(),onLoad:this.handleMathEditorLoad,onError:this.handleMathEditorError}),!b(this.state)&&a.default.createElement("span",{className:`${t.CLASS_PREFIX}__formula-error`},o.translate(P,A,{noWrap:!0}))),a.default.createElement(l.Checkbox,{analyticsId:`${h.ANALYTICS_ID_PREFIX}.displayFormulaToStudents`,checked:E.displayFormulaToStudent,onChange:this.toggleDisplayFormulaToStudent,label:o.translate("assessments.canvas.question.calculatedFormula.stepOne.displayFormulaLabel")}),a.default.createElement(f.default,{analyticsId:`${h.ANALYTICS_ID_PREFIX}.stepOne`,showBack:!1,showNext:!0,isNextDisabled:!y(this.state),onNextClick:this.handleNextStepClick}),a.default.createElement(g.OffScreenAnnouncement,{type:"polite",message:o.translate("assessments.canvas.question.calculatedFormula.stepOne.stepNumber"),changeTrigger:1}))}}t.BaseCalculatedFormulaQuestionEditStepOne=C,C.propTypes={activeEditorId:n.default.string,courseId:n.default.string.isRequired,currentLocale:n.default.string,disableFocus:n.default.bool,editorPlugins:n.default.array,hasSubmissions:n.default.bool.isRequired,localize:n.default.object,onAnswerSetsRelatedFieldDirty:n.default.func.isRequired,onGoToNextStep:n.default.func.isRequired,onQuestionChange:n.default.func.isRequired,onValidate:n.default.func.isRequired,pluginsConfig:n.default.object.isRequired,question:n.default.object.isRequired,questionTitle:n.default.string,refreshBbml:n.default.bool.isRequired,setActiveEditorId:n.default.func.isRequired},t.default=o.localizedComponentWrapper(C)},fTte:function(e,t,s){"use strict";s.r(t)},fWGr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("Agfx");t.useStyles=i.makeStyles(()=>i.createStyles({textClass:{textTransform:"uppercase"}}))},gKi8:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s("2cC3");const i=s("ggb3"),a=s("h9IM");class n{constructor(e){if(n.isWirisLoaded&&n.apiBasePathUsedForLoading!==e)throw Error(`WIRIS editor source already loaded from ${n.apiBasePathUsedForLoading}. Cannot load from ${e}`);this.apiBasePath=e}async newInstance(e){if(n.isWirisLoaded)return Promise.resolve(n.getNewInstance(e));const t=await this.getConfiguration(),s=(await n.getConfigurationjs(t.data.contextPath)).data.editorUrl;return this.loadWirisJS(s,e)}convertToAbsoluteUrl(e){return`${this.apiBasePath}${e}`}getConfiguration(){const e=this.convertToAbsoluteUrl("/v1/editor/v4/configurations");return i.default.get(e)}static getConfigurationjs(e){return i.default.get(`${e}app/configurationjs`)}static getNewInstance(e){const t=e?{...e}:{language:"en"};return t.fontFamily||(t.fontFamily="stix"),null!=t.mml&&t.mml.trim()||delete t.mml,t.language||(t.language="en"),com.wiris.jsEditor.JsEditor.newInstance(t)}loadWirisJS(e,t){return new Promise((s,i)=>a(e,()=>{try{n.apiBasePathUsedForLoading=this.apiBasePath,n.isWirisLoaded=!0,s(n.getNewInstance(t))}catch(e){n.isWirisLoaded=!1,i(e)}}))}}t.WirisService=n,n.apiBasePathUsedForLoading="",n.isWirisLoaded=!1},gTAB:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={INACTIVE:0,isInactive(e){return this.INACTIVE===e},ACTIVE:1,isActive(e){return this.ACTIVE===e}}},gYi3:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("Agfx");t.useStyles=i.makeStyles(e=>i.createStyles({mathEditor:{"& .wrs_editor":{[e.breakpoints.down("sm")]:{whiteSpace:"normal","& .wrs_multipleRowPanel":{minHeight:"66px",height:"auto"},"& .wrs_toolbar .wrs_header":{width:"calc(100% - 18px)","& button":{marginLeft:0,marginRight:"4px"}}}}}}))},gZ3u:function(e,t,s){"use strict";s.r(t)},"gk+Q":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("kBJj"),a=s("JfV0");function n(e,t){return{bbtype:"attachment",href:e,bbfile:JSON.stringify(t)}}t.convertSettingsToBbfile=function(e){return{alternativeText:e.alternativeText,isDecorative:e.isDecorative,linkName:e.displayName,mimeType:e.mimeType,displayInline:e.displayInline,render:e.render}},t.prepareFileMetadata=n,t.uploadFiles=function(e){const t=[{apiBasePath:a.config.apiBasePath,xsrfToken:a.config.xsrf,...e}];return e.openCloudStorageIntegrationModal&&t.push(e.openCloudStorageIntegrationModal,"cloudStorageIntegration"),i.uploadWorkflow(...t).then(e=>{return e.map(({href:e,bbfile:t})=>n(e,t))})}},gvex:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("+oLC"),l=s("M0dR"),u=s("t6Ia"),d=s("WBPx"),c=s("Begd"),p=s("XBaz"),m=s("zGdY"),f=s("JfV0"),h=s("E1pj"),g=s("t6ux"),b=s("9tRF"),y=i.__importDefault(s("W2w9")),E=i.__importDefault(s("Pfoe")),C=i.__importDefault(s("7fK4"));s("jiD7");const w=s("wMBS");t.CLASS_PREFIX="calculated-formula-question__step-3";const S="assessments.canvas.question.calculatedFormula.stepThree";function P({question:e}){return b.isVariableSetsValid(e)}class A extends a.Component{constructor(e){super(e),this.closeTablePanel=()=>{this.setState({isTablePanelOpen:!1})},this.renderRecalculateButton=()=>{const{hasSubmissions:e,localize:s,isRecalculatingVariableSets:i}=this.props,n={};return i?a.default.createElement(d.AnalyticsOutlineButton,{className:`${t.CLASS_PREFIX}__calculate-button`,disabled:!0,style:n,analyticsId:`${g.ANALYTICS_ID_PREFIX}.stepThree.calculateButton.outlineButton`},a.default.createElement(c.Spinner,{size:c.SpinnerSize.small}),a.default.createElement("span",{className:`${t.CLASS_PREFIX}__calculate-button-label ${t.CLASS_PREFIX}__calculate-button-label--loading`},s.translate(`${S}.calculateButtonLoadingState`))):a.default.createElement(d.AnalyticsOutlineButton,{className:`${t.CLASS_PREFIX}__calculate-button`,disabled:e,onClick:this.calculateMultipleRows,style:n,analyticsId:`${g.ANALYTICS_ID_PREFIX}.stepThree.calculateButton.outlineButton`},a.default.createElement(p.Refresh,null),a.default.createElement("span",{className:`${t.CLASS_PREFIX}__calculate-button-label`},s.translate(`${S}.calculateButton`)))},this.calculateMultipleRows=()=>{const{calculateMultipleRows:e,question:t}=this.props;e(t.variableSets),this.props.resetDirtyRowMap()},this.renderTable=()=>{const{hasSubmissions:e,localize:s,question:i,isRecalculatingVariableSets:n,repopulateTable:o}=this.props;return a.default.createElement("div",{className:`${t.CLASS_PREFIX}__table-wrapper`},a.default.createElement("div",{className:`${t.CLASS_PREFIX}__table-buttons`},a.default.createElement(u.DefaultButton,{analyticsId:`${g.ANALYTICS_ID_PREFIX}.stepThree.repopulateAnswers.defaultButton`,className:`${t.CLASS_PREFIX}__repopulate-button`,disabled:n||e,onClick:o},s.translate(`${S}.repopulateButton`)),this.renderRecalculateButton()),a.default.createElement(C.default,{correctAnswerTolerance:i.correctAnswerTolerance,calculateRow:this.calculateRow,dirtyRowMap:this.props.dirtyRowMap,disabled:e,isExponential:i.correctAnswerFormat===m.CalculatedFormulaAnswerFormatType.Exponential,isRecalculatingVariableSets:n,roundToSignificantFigures:i.correctAnswerPrecision===m.CalculatedFormulaAnswerPrecisionType.SignificantFigures,scale:i.answerScale,unitsText:i.units&&i.units.unitsRequired?i.units.unitValue:null,updateVariableValue:this.updateVariableValue,variableSets:i.variableSets}))},this.renderOpenTablePanelButton=()=>{const{localize:e}=this.props;return a.default.createElement("div",{className:`${t.CLASS_PREFIX}__preview-answer-sets-button-container`},a.default.createElement(u.DefaultButton,{analyticsId:`${g.ANALYTICS_ID_PREFIX}.stepThree.mobile.previewAnswerSets.defaultButton`,onClick:()=>{this.setState({isTablePanelOpen:!0})}},e.translate(`${S}.previewAnswerSets`)))},this.renderNoVariableAnswer=()=>{const{localize:e,question:s}=this.props,{correctAnswerTolerance:i,units:n,variableSets:o}=s,r=g.getCorrectAnswerToleranceType(i),u=g.getCorrectAnswerToleranceValue(i),d=`${S}.answer`;let c=g.getAnswerTranslationKey(d,r,u,n.unitValue);c=null==c?`${d}.plain`:c;const p=e.translate(c,{answer:o[0].answer,unitValue:n.unitValue,answerToleranceValue:u});return a.default.createElement(a.default.Fragment,null,a.default.createElement(l.AnalyticsTypography,{component:"h4",variant:"h4"},e.translate(`${S}.variableValueTable.answer`)),a.default.createElement("div",{className:`${t.CLASS_PREFIX}__answer`},p))},this.renderAnswerData=()=>{const{UltraWindowSize:e}=this.props,t=e.isSmallBreakpoint();return g.doesQuestionHaveVariables(this.props.question)?t?this.renderOpenTablePanelButton():this.renderTable():this.renderNoVariableAnswer()},this.renderTablePanel=()=>{const{localize:e,UltraWindowSize:s}=this.props,{isTablePanelOpen:i}=this.state;if(!g.doesQuestionHaveVariables(this.props.question))return null;const n=s.isSmallBreakpoint();return a.default.createElement(r.BbPanel,{analyticsId:`${g.ANALYTICS_ID_PREFIX}.mobile.previewAnswerSetsPanel.bbPanel`,className:`${t.CLASS_PREFIX}__answerSetsPanel`,excludeContentPadding:!0,isOpen:i&&n,onDismiss:this.closeTablePanel,type:r.BbPanelType.peek},a.default.createElement(r.BbPanelHeader,{analyticsId:`${g.ANALYTICS_ID_PREFIX}.mobile.previewAnswerSetPanel.header`,title:e.translate(`${S}.previewAnswerSetsPanel.title`)}),this.renderTable(),a.default.createElement(r.BbPanelFooter,{analyticsId:`${g.ANALYTICS_ID_PREFIX}.mobile.previewAnswerSetPanel.bbPanelFooter`,primaryButtonProps:{text:e.translate(`${S}.previewAnswerSetsPanel.saveAndClose`),onClick:this.closeTablePanel}}))},this.calculateRow=e=>{const{courseId:t,question:s}=this.props,i=_.find(s.variableSets,t=>t.ident===e);f.evaluateMathML(t,s.answerFormula,i.variableValues).then(t=>{this.updateCalculatedRow(e,t.result)},()=>{this.updateCalculatedRow(e,null)})},this.updateCalculatedRow=(e,t)=>{const{onQuestionChange:s,question:i}=this.props,a=i.variableSets.map(s=>s.ident===e?{...s,answer:g.roundWithPrecision(t,i.answerScale,i.correctAnswerFormat,i.correctAnswerPrecision)}:s);this.props.updateDirtyRowMapValue(e,!1),s({variableSets:a})},this.updateVariableValue=(e,t,s)=>{const{question:i,onQuestionChange:a}=this.props,n=i.variableSets.map(i=>i.ident===e?{...i,variableValues:{...i.variableValues,[t]:s}}:i);this.props.updateDirtyRowMapValue(e,!0),a({variableSets:n})},this.state={isTablePanelOpen:!1}}componentDidUpdate(e){P(e)!==P(this.props)&&this.props.onValidate(P(this.props))}render(){const{localize:e,question:s}=this.props;return a.default.createElement("div",{className:t.CLASS_PREFIX},this.renderTablePanel(),a.default.createElement("div",{className:`${t.CLASS_PREFIX}__preview-question`},a.default.createElement(l.AnalyticsTypography,{component:"h4",variant:"h4"},e.translate(`${S}.previewQuestion.questionTextTitle`)),a.default.createElement(E.default,{bbml:s.questionText.rawText,id:`${s.id}-preview`,isReadOnly:!0}),a.default.createElement(l.AnalyticsTypography,{component:"h4",variant:"h4"},e.translate(`${S}.previewQuestion.answerFormulaTitle`)),a.default.createElement("img",{className:`${t.CLASS_PREFIX}__formula-image`,src:s.mathMLImageURL,alt:s.mathMLImageAltText})),this.renderAnswerData(),a.default.createElement(y.default,{analyticsId:`${g.ANALYTICS_ID_PREFIX}.stepThree`,showBack:!0,onBackClick:this.props.onGoBackStep,showNext:!1}),a.default.createElement(w.OffScreenAnnouncement,{type:"polite",message:e.translate(`${S}.stepNumber`),changeTrigger:1}))}}t.BaseCalculatedFormulaQuestionEditStepThree=A,A.propTypes={calculateMultipleRows:n.default.func.isRequired,courseId:n.default.string.isRequired,dirtyRowMap:n.default.object.isRequired,hasSubmissions:n.default.bool.isRequired,isRecalculatingVariableSets:n.default.bool.isRequired,localize:n.default.object,onGoBackStep:n.default.func.isRequired,onQuestionChange:n.default.func.isRequired,onValidate:n.default.func.isRequired,question:n.default.object.isRequired,repopulateTable:n.default.func.isRequired,resetDirtyRowMap:n.default.func.isRequired,UltraWindowSize:n.default.object,updateDirtyRowMapValue:n.default.func.isRequired};const R=h.windowResizingResponsiveComponentWrapper(A);t.default=o.localizedComponentWrapper(R)},h2mW:function(e,t,s){"use strict";s.r(t)},hQsI:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Lk6F");t.default=i.default,t.QuestionPoolPanel=i.QuestionPoolPanel},hp7Q:function(e,t,s){"use strict";s.r(t)},in1o:function(e,t,s){"use strict";s.r(t)},j9WP:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("zGdY"),r=i.__importDefault(s("5Hnx")),l=i.__importDefault(s("5aOz")),u=i.__importDefault(s("FwPp")),d=i.__importDefault(s("E8Oa")),c=i.__importDefault(s("eoCN")),p=i.__importDefault(s("wNNv")),m=s("1Qsi"),f=i.__importDefault(s("7UBu"));class h extends a.Component{constructor(){super(...arguments),this.renderQuestion=()=>{switch(this.props.question.questionType){case o.QuestionType.Either:return a.default.createElement(f.default,Object.assign({},this.props));case o.QuestionType.Essay:return a.default.createElement(l.default,Object.assign({},this.props));case o.QuestionType.FIMB:return a.default.createElement(u.default,Object.assign({},this.props));case o.QuestionType.PresentationOnly:return a.default.createElement(p.default,Object.assign({},this.props));case o.QuestionType.Matching:return a.default.createElement(d.default,Object.assign({},this.props));case o.QuestionType.Multiple:return a.default.createElement(c.default,Object.assign({},this.props));case o.QuestionType.QuestionBlock:return a.default.createElement(m.QuestionBlockQuestion,Object.assign({},this.props));case o.QuestionType.CalculatedFormula:return a.default.createElement(r.default,Object.assign({},this.props));default:return null}}}render(){return this.renderQuestion()}}t.default=h,h.propTypes={courseId:n.default.string.isRequired,questionBeingEditedId:n.default.string,isAnyQuestionDirty:n.default.bool.isRequired,onQuestionEdit:n.default.func.isRequired,onQuestionMadeDirty:n.default.func.isRequired,deleteQuestion:n.default.func.isRequired,persistQuestion:n.default.func.isRequired,alignedGoals:n.default.array,question:n.default.object.isRequired,questionTitle:n.default.string,hasSubmissions:n.default.bool.isRequired,openGoals:n.default.func.isRequired,pluginsConfig:n.default.object.isRequired,onQuestionEditCancel:n.default.func,focusTitle:n.default.bool,addQuestionsToEmptyPool:n.default.func,localizationPrefix:n.default.string.isRequired,showFeatureAnnouncement:n.default.object}},jJem:function(e,t,s){"use strict";s.r(t)},jLgm:function(e,t,s){"use strict";s.r(t)},"jPx/":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("JfV0");t.reusableAnswers=function(e){return e.prompts.filter(e=>!e.reusesAnswer).filter(t=>e.answers[t.matchingAnswerIndex]&&""!==e.answers[t.matchingAnswerIndex].answerText.rawText).map(t=>e.answers[t.matchingAnswerIndex])},t.answerIdToPromptIndexMap=function(e){const t={};return e.prompts.forEach((s,i)=>{if(!s.reusesAnswer&&null!=s.matchingAnswerIndex){const a=e.answers[s.matchingAnswerIndex];a&&(t[a.ui.id]=i)}}),t},t.removeAnswerFromQuestion=function(e,t){const s=e.prompts.map(e=>e.matchingAnswerIndex>t?{...e,matchingAnswerIndex:e.matchingAnswerIndex-1}:e);return{...e,prompts:s,answers:[...e.answers.slice(0,t),...e.answers.slice(t+1)]}},t.removePairFromQuestion=function(e,t){const s=e.prompts,a=e.answers,n=s.findIndex(e=>e.id===t),o=s[n],r=o.matchingAnswerIndex;let l=[...a],u=s.filter(e=>e.id!==t);return o.reusesAnswer||(l=[...l.slice(0,r),...l.slice(r+1)],u=u.map(e=>e.reusesAnswer&&e.matchingAnswerIndex===r?(l.push(i.Questions.createMatchingAnswer(!1)),{...e,reusesAnswer:!1,matchingAnswerIndex:l.length-1}):e.matchingAnswerIndex>r?{...e,matchingAnswerIndex:e.matchingAnswerIndex-1}:e)),{...e,prompts:u,answers:l}},t.isPairReused=function(e,t){const s=e.prompts.find(e=>e.id===t);return!s.reusesAnswer&&e.prompts.findIndex(e=>!0===e.reusesAnswer&&e.matchingAnswerIndex===s.matchingAnswerIndex)>-1},t.getAnswerEditorId=function(e){return`answer-${e}`}},jZ9E:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("zGdY"),l=i.__importDefault(s("1XAg")),u=i.__importDefault(s("SIAs")),d=i.__importDefault(s("axjr")),c=i.__importDefault(s("UunF")),p=i.__importDefault(s("NPG5")),m=i.__importDefault(s("z01z")),f=i.__importDefault(s("f6u1")),h=i.__importDefault(s("mWAU"));s("RW+D");const g=e=>{return a.default.createElement("div",{className:"readonly-question-component-react"},a.default.createElement(h.default,Object.assign({},e.questionHeaderProps)),(()=>{const t={...e,questionTextClassName:"readonly-question-component-react__question-text"};switch(e.question.questionType){case r.QuestionType.CalculatedFormula:return a.default.createElement(l.default,Object.assign({},t));case r.QuestionType.Either:return a.default.createElement(m.default,Object.assign({},t));case r.QuestionType.Essay:return a.default.createElement(u.default,Object.assign({},t));case r.QuestionType.FIMB:return a.default.createElement(d.default,Object.assign({},t));case r.QuestionType.PresentationOnly:return a.default.createElement(f.default,Object.assign({},t));case r.QuestionType.Matching:return a.default.createElement(c.default,Object.assign({},t));case r.QuestionType.Multiple:return a.default.createElement(p.default,Object.assign({},t));default:return null}})())};g.propTypes={answersInfo:n.default.array,answersInfoLabel:n.default.string,hideDistractors:n.default.bool,question:n.default.object.isRequired,questionHeaderProps:n.default.object.isRequired},t.default=o.localizedComponentWrapper(g)},jiD7:function(e,t,s){"use strict";s.r(t)},juaI:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("+49V"),l=s("HAQq"),u=i.__importDefault(s("gTAB"));s("Udwz"),t.QuestionPoolQuestionHeader=e=>u.default.isActive(e.editMode)?a.default.createElement(r.QuestionPoolQuestionHeaderEditMode,Object.assign({},e)):a.default.createElement(l.QuestionPoolQuestionHeaderReadMode,Object.assign({},e)),t.QuestionPoolQuestionHeader.propTypes={editMode:n.default.number.isRequired,hasSubmissions:n.default.bool.isRequired,hasAssessmentModifyPermissions:n.default.bool.isRequired,deleteQuestion:n.default.func.isRequired,overflowMenuButtonLabelData:n.default.object.isRequired},t.default=o.localizedComponentWrapper(t.QuestionPoolQuestionHeader)},kPPX:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("MC1S"),r=s("8unJ"),l=s("caKH"),u=s("5rx+"),d=({hidden:e,localize:t,onCancel:s,onContinue:i,titleKey:n,textKey:r,cancelKey:u,continueKey:d,analyticsId:c})=>a.default.createElement(l.UltraModalDialog,{hidden:e,onDismiss:s,dialogContentProps:{type:o.DialogType.normal,title:t.translate(n),subText:t.translate(r),showCloseButton:!0},modalProps:{isBlocking:!1}},a.default.createElement(o.DialogFooter,null,a.default.createElement(o.DefaultButton,{onClick:s,text:t.translate(u),analyticsId:`${c}.simpleDialog.defaultButton.cancel.button`}),a.default.createElement(o.PrimaryButton,{onClick:i,text:t.translate(d),analyticsId:`${c}.simpleDialog.defaultButton.continue.button`})));d.propTypes={hidden:n.default.bool.isRequired,localize:n.default.object,onCancel:n.default.func.isRequired,onContinue:n.default.func.isRequired,titleKey:n.default.string.isRequired,textKey:n.default.string.isRequired,cancelKey:n.default.string.isRequired,continueKey:n.default.string.isRequired,...u.addAnalyticsProps},t.UnwrappedSimpleDialog=d,t.default=r.localizedComponentWrapper(d)},la2Y:function(e,t,s){"use strict";s.r(t)},lcFE:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=s("Begd"),n=s("Zwiy"),o=s("myse"),r=s("pNgc"),l=i.__importDefault(s("ERkP")),u=i.__importStar(s("nsO7")),d=i.__importDefault(s("aWzz")),c=s("JfV0"),p=s("zGdY"),m=s("Y+9S"),f=s("9OUN"),h=s("uDfI"),g=s("8unJ"),b=i.__importDefault(s("nUPs")),_=i.__importDefault(s("/oLw")),y=i.__importDefault(s("Oyt1")),E=i.__importDefault(s("IUzX")),C=i.__importDefault(s("VE9O")),w=s("5rx+");s("7Pdu");const S=s("X3OV"),P=s("Y+9S");class A extends l.default.Component{constructor(e){if(super(),this.buildCriteriaConfig=()=>{const e={blocks:[],onSetKeywords:this.onSetKeywords,selectedKeywords:this.state.selectedFilterCriteria.keywords,isKeywordExpanded:!0};e.blocks.push(this.buildSourcesBlock()),e.blocks.push(this.buildQuestionTypesBlock());const t=this.buildTagsBlock();return t&&e.blocks.push(t),e},this.buildSourcesBlock=()=>{const e={name:this.props.localize.translate("questionPicker.filterPanel.sources.header"),id:"sources",expanded:!0,groups:[]},t=this.getSourcesWithQuestions(),s=(()=>{const e=u.orderBy(t,"type","asc"),s=u.groupBy(e,"type");return u.transform(s,(e,t,s)=>{e[s.toLowerCase()]=u.orderBy(t,"id")})})();return u.keys(s).forEach(t=>{const i={id:t,name:this.props.localize.translate(`questionPicker.filterPanel.sources.type.${t}`),items:[],onSelect:this.onSelectSource};s[t].forEach(e=>{if(e.type.toLowerCase()===t){const t={id:e.id,name:e.title,selected:u.includes(this.state.selectedFilterCriteria.sourceIds,e.id)};i.items.push(t)}}),e.groups.push(i),e.groups.sort(e=>"test"===e.id?-1:1)}),e},this.buildTagsBlock=()=>{const{tags:e}=this.props;if(!u.isEmpty(e)){const t={name:this.props.localize.translate("questionPicker.filterPanel.tags.header"),id:"tags",expanded:!1,groups:[]},s=e=>{let s=u.find(t.groups,{id:e});return s||(s={id:e,name:this.props.localize.translate(`questionPicker.filterPanel.tags.type.${e}`),items:[],onSelect:this.onSelectTag},t.groups.push(s)),s};return e.forEach(e=>{const t={id:e.id,name:e.title,selected:u.includes(this.state.selectedFilterCriteria.tagIds,e.id)};s(e.type).items.push(t)}),t.groups.forEach(e=>{e.items=u.sortBy(e.items,["name"])}),t.groups=u.sortBy(t.groups,["name"]),t}return null},this.buildQuestionTypesBlock=()=>{const e={id:"types",name:"",items:[],onSelect:this.onSelectQuestionType},{questionTypes:t}=this.props;return t.forEach(t=>{const{key:s}=t,i="presentation"===s?"other":s,a={id:s,name:this.props.localize.translate(`questionPicker.typeLabels.${i}`),selected:u.includes(this.state.selectedFilterCriteria.questionTypes,s)};e.items.push(a)}),e.items=u.sortBy(e.items,["name"]),{name:this.props.localize.translate("questionPicker.filterPanel.questionTypes.header"),id:"types",expanded:!1,groups:[e]}},this.hasPresentationQuestionsSelected=()=>{return u.keys(this.state.selectedQuestions).some(e=>{const t=this.state.questions.find(t=>t.id===e);return t&&t.questionType===p.QuestionType.PresentationOnly})},this.hasNonPresentationQuestionsSelected=()=>{return u.keys(this.state.selectedQuestions).some(e=>{const t=this.state.questions.find(t=>t.id===e);return t&&t.questionType!==p.QuestionType.PresentationOnly})},this.reuseQuestions=()=>{const{assessmentId:e,questionPositionAfter:t,showRandomizeDialog:s}=this.props.destination,{selectedQuestions:i,deselectedQuestions:a,isSelectAllQuestions:n}=this.state;let o={courseId:this.props.courseId,assessmentId:e,positionAfter:t,selectAll:n};if(n){const e=u.keys(a),t=e.length;o={...o,searchCriteria:this.generateSearchCriteriaParam(),...t&&{excludeIds:e}}}else o={...o,questionIds:u.keys(i)};m.notifyMobileApp(m.MessageType.QuestionPickerPanelClosed);const r=()=>this.props.closePanel(o,this.getSelectedQuestionCount());s&&this.hasPresentationQuestionsSelected()?s(r):r()},this.cancel=()=>this.areQuestionsSelected()?(this.showCancelConfirmationDialog(),!1):(m.notifyMobileApp(m.MessageType.QuestionPickerPanelClosed),this.props.closePanel(),!0),this.proceedClosePanel=()=>{m.notifyMobileApp(m.MessageType.QuestionPickerPanelClosed),this.props.closePanel()},this.areQuestionsSelected=()=>u.size(this.state.selectedQuestions)>0,this.showCancelConfirmationDialog=()=>{this.setState(()=>({isShowingCancelConfirmationDialog:!0}))},this.hideCancelConfirmationDialog=()=>{this.setState(()=>({isShowingCancelConfirmationDialog:!1}))},this.onSelectSource=(e,t)=>{this.onSelectFilterOption("sourceIds",e,t)},this.onSelectTag=(e,t)=>{this.onSelectFilterOption("tagIds",e,t)},this.onSelectQuestionType=(e,t)=>{this.onSelectFilterOption("questionTypes",e,t)},this.onSelectFilterOption=(e,t,s)=>{this.state.isSelectAllQuestions&&this.onClearAllQuestionSelection(),this.setState(i=>{const{selectedFilterCriteria:a}=i;return s?{selectedFilterCriteria:{...a,[e]:[...a[e],t]}}:{selectedFilterCriteria:{...a,[e]:[...a[e].filter(e=>e!==t)]}}},this.initSearchRequest)},this.onSelectQuestion=(e,t)=>{this.setState(s=>{const i=s.deselectedQuestions,a=s.selectedQuestions;return s.isSelectAllQuestions?(t?i[e]=!0:delete i[e],{deselectedQuestions:i}):(t?delete a[e]:a[e]=!0,{selectedQuestions:a})})},this.onSelectAllQuestions=()=>{this.setState(()=>({isSelectAllQuestions:!0})),this.clearSelectedDeselectedQuestions()},this.onClearAllQuestionSelection=()=>{this.setState(()=>({isSelectAllQuestions:!1})),this.clearSelectedDeselectedQuestions()},this.clearSelectedDeselectedQuestions=()=>{this.setState(()=>({selectedQuestions:Object.create(null),deselectedQuestions:Object.create(null)}))},this.onSetKeywords=e=>{this.setState(t=>({selectedFilterCriteria:{...t.selectedFilterCriteria,keywords:e}}),this.initSearchRequest)},this.onClearCriteria=()=>{const e=u.mapValues(this.state.selectedFilterCriteria,()=>[]);this.setState(()=>({selectedFilterCriteria:e}),this.initSearchRequest)},this.loadFilterOptions=()=>{this.loadAssessments(),this.loadQuestionTags(),this.loadQuestionTypes()},this.loadAssessments=()=>{const e=`${p.AssessmentType.Pool},${p.AssessmentType.Test}`;this.continuouslyLoadFilterOptions(this.props.loadAssessments,{types:e},"assessments","isLoadingAssessments")},this.loadQuestionTags=()=>{this.continuouslyLoadFilterOptions(this.props.loadQuestionTags,void 0,"tags","isLoadingTags")},this.loadQuestionTypes=()=>{const{courseId:e,loadQuestionTypes:t}=this.props;t({courseId:e}).then(()=>{this.setState(e=>({isLoadingFilterOptions:{...e.isLoadingFilterOptions,isLoadingQuestionTypes:!1}}))})},this.continuouslyLoadFilterOptions=(e,t,s,i,a)=>{const{courseId:n}=this.props;return e({...t,courseId:n,offset:a,limit:A.FILTER_OPTION_LOAD_LIMIT}).then(a=>{const{paging:n}=a;this.setState(e=>{const t=e.filterLoadNum[s];return{filterLoadNum:{...e.filterLoadNum,[s]:t+1}}},()=>{const a=this.state.filterLoadNum[s];if(n.nextPage&&a<A.FILTER_OPTIONS_LOAD_MAX){const a=n.offset+n.limit;this.continuouslyLoadFilterOptions(e,t,s,i,a)}else this.setState(e=>({isLoadingFilterOptions:{...e.isLoadingFilterOptions,[i]:!1}}))})})},this.generateKeywordLuceneQuery=e=>`"${e.join('" OR "')}"`,this.generateLoadQuestionsParams=({setOffset:e=!1}={})=>{const{paging:t}=this.state,{courseId:s}=this.props,i={...this.generateSearchCriteriaParam(),courseId:s};return e&&(i.offset=t.offset+t.limit),i},this.generateSearchCriteriaParam=()=>{const{selectedFilterCriteria:{keywords:e,sourceIds:t,tagIds:s,questionTypes:i}}=this.state;return{...t.length&&{assessmentIds:t},...s.length&&{categoryIds:s},...i.length&&{questionTypes:i},...e.length&&{q:this.generateKeywordLuceneQuery(e)}}},this.initSearchRequest=()=>{this.setState(()=>({isLoadingQuestions:!0}),this.loadQuestionsDebounced)},this.loadQuestionsDebounced=u.debounce(()=>{const e=this.generateLoadQuestionsParams();this.setState(()=>({searchParams:e}),()=>{this.props.searchQuestions(e).then(t=>{e===this.state.searchParams&&this.setState(()=>({questions:t.questions,paging:t.paging,isLoadingQuestions:!1}))})})},A.WAIT_TIME_IN_MS,{leading:!0,trailing:!0}),this.loadMoreQuestions=(e=!1)=>{if(this.state.isLoadingMoreQuestions||!this.hasMoreQuestions())return;this.setState(()=>({isLoadingMoreQuestions:!0,questionToFocus:null}));const t=this.generateLoadQuestionsParams({setOffset:!0});this.props.searchQuestions(t).then(t=>{this.setState(s=>({questions:[...s.questions,...t.questions],questionToFocus:e?t.questions[0].id:null,paging:t.paging,isLoadingMoreQuestions:!1}))})},this.hasMoreQuestions=()=>this.state.paging&&!u.isEmpty(this.state.paging.nextPage),this.onViewMoreClick=()=>{this.loadMoreQuestions(!0)},this.onScroll=e=>{if(this.state.isLoadingQuestions||this.state.isLoadingMoreQuestions||!this.hasMoreQuestions())return;const t=e.target;t.scrollHeight-t.scrollTop===t.clientHeight&&this.loadMoreQuestions()},this.onKeyUp=e=>{const t=e.target;if(9===e.keyCode&&t&&"button"===t.type&&t.classList.contains("selectable-question__question-toggle")){const e=t.parentElement.id,s=e.substr(e.indexOf("_"),e.length);this.state.questions.length-1===u.findIndex(this.state.questions,e=>e.id===s)&&this.loadMoreQuestions()}},this.renderViewMoreButton=()=>{const{paging:e,questions:t}=this.state,{localize:s,analyticsEventAugmentor:i}=this.props,a=i(o.AnalyticsEventTypes.CLICK_EVENT,()=>{},"questionPicker.moreQuestions.ariaLabel");if(!this.hasMoreQuestions())return l.default.createElement("button",{className:"offscreen-button",disabled:!0,"aria-disabled":!0,"aria-label":s.translate("questionPicker.moreQuestions.disabled")});const n=e.count-t.length,r=n>e.limit?e.limit:n;return l.default.createElement("button",{className:"offscreen-button",onClick:a,"data-analytics-id":"questionPicker.moreQuestions.ariaLabel","aria-label":s.translate("questionPicker.moreQuestions.ariaLabel",{count:r}),disabled:this.state.isLoadingMoreQuestions,"aria-disabled":this.state.isLoadingMoreQuestions})},this.getSourcesWithQuestions=()=>u.filter(this.props.sources,e=>e.questionCount>0),this.areAllFilterOptionsLoaded=()=>{const{isLoadingFilterOptions:e}=this.state;return u.every(u.values(e),e=>!e)},this.getSelectedQuestionCount=()=>{const{deselectedQuestions:e,isSelectAllQuestions:t,paging:s,selectedQuestions:i}=this.state;return t?s.count-u.size(e):u.size(i)},this.state={questions:[],paging:null,filterLoadNum:{assessments:0,tags:0},isLoadingQuestions:!0,isLoadingMoreQuestions:!1,isLoadingFilterOptions:{isLoadingAssessments:!0,isLoadingTags:!0,isLoadingQuestionTypes:!0},isShowingCancelConfirmationDialog:!1,selectedFilterCriteria:{keywords:[],sourceIds:[],tagIds:[],questionTypes:[]},isSelectAllQuestions:!1,deselectedQuestions:Object.create(null),selectedQuestions:Object.create(null),questionToFocus:null,searchParams:null},m.isInMobileApp()){const t={type:m.MessageType.QuestionPickerPanelOpened,status:m.MessageStatus.Success,pageTitle:e.localize.translate(e.headerKeys.title)};m.sendMessageToMobile(t),P.dismissPanel(this.cancel)}}componentWillUnmount(){P.dismissPanel(void 0)}UNSAFE_componentWillMount(){const{courseId:e}=this.props;e&&(this.loadFilterOptions(),this.initSearchRequest())}render(){const{isLoadingQuestions:e,isLoadingMoreQuestions:t,isSelectAllQuestions:s,questions:i,questionToFocus:o,paging:u,deselectedQuestions:d,selectedQuestions:c}=this.state,{courseId:p,localize:m,closePanel:f,noResultsKeys:h,noSourcesKeys:g,headerKeys:w,footerKeys:S,pageHelpKey:P,localizationPrefix:A,cancelModalKeys:R,commonContext:v}=this.props,q=this.getSourcesWithQuestions(),T=q.length>0,I=this.buildCriteriaConfig(),D=m.translate("questionPicker.footer.cancel"),Q=this.areAllFilterOptionsLoaded(),F=Q&&!(e||t),x=this.getSelectedQuestionCount(),k={image:C.default,title:m.translate(h.title),message:m.translate(h.message)},N=m.translate(w.title),L=m.translate(S.primaryButton),M=m.translate(S.selectedCount,{count:x}),O=g.title,B=g.message,z={url:m.translate(P)};return l.default.createElement(n.BbPanel,{isOpen:"true",type:n.BbPanelType.full,onDismiss:this.cancel,excludeContentPadding:!0,closeButtonAriaLabel:D,className:"question-picker-panel",pageHelpProps:z,fixedLargeHeader:!0,stackIndex:3,heightOffset:v.panelHeightOffset},l.default.createElement(n.BbPanelHeader,{title:N,smallHeaderTitle:this.props.destination.assessmentTitle}),l.default.createElement("div",{className:"question-picker-panel__content",ready:F.toString()},l.default.createElement("div",{className:"question-picker-panel__body",onKeyUp:this.onKeyUp,onScroll:this.onScroll},T&&l.default.createElement(_.default,{id:"questionPickerPanel",isLoading:e,criteriaConfig:I,onClearCriteria:this.onClearCriteria,resultsCount:u&&u.count?u.count:0,zeroResultsEmptyStateProps:k,analyticsId:"questionPickerPanel.filterList"},l.default.createElement(y.default,{courseId:p,sources:q,deselectedQuestions:d,selectedQuestions:c,items:i,isLoadingMore:t,onItemSelect:this.onSelectQuestion,isSelectAllQuestions:s,onSelectAllQuestions:this.onSelectAllQuestions,onClearAllQuestionSelection:this.onClearAllQuestionSelection,questionToFocus:o,localizationPrefix:A})),!T&&!Q&&l.default.createElement(a.Spinner,{className:"question-picker-panel__spinner",size:a.SpinnerSize.large}),!T&&Q&&l.default.createElement(E.default,{headerKey:O,messageKey:B}),!e&&this.renderViewMoreButton()),l.default.createElement(b.default,{message:m.translate(R.message),onStay:this.hideCancelConfirmationDialog,onProceed:()=>this.proceedClosePanel(),show:this.state.isShowingCancelConfirmationDialog,title:m.translate(R.title)})),l.default.createElement(n.BbPanelFooter,{analyticsId:"questionPickerPanel.footer",primaryButtonProps:{className:"js-primary-button",onClick:this.reuseQuestions,disabled:0===x,text:L},secondaryButtonProps:{className:"js-cancel-button",onClick:this.cancel,text:D}},l.default.createElement("div",{className:"question-picker-panel__footer-content"},l.default.createElement(r.ContentCollection,{className:"question-picker-panel__footer-icon",color:"primary"}),l.default.createElement("span",{className:"question-picker-panel__footer-text"},M))))}}t.QuestionPickerPanel=A,A.FILTER_OPTION_LOAD_LIMIT=100,A.FILTER_OPTIONS_LOAD_MAX=10,A.propTypes={courseId:d.default.string.isRequired,destination:d.default.object.isRequired,closePanel:d.default.func.isRequired,sources:d.default.array,tags:d.default.array,questionTypes:d.default.array,loadAssessments:d.default.func.isRequired,loadQuestionTags:d.default.func.isRequired,loadQuestionTypes:d.default.func.isRequired,localize:d.default.object.isRequired,localizationPrefix:d.default.string.isRequired,searchQuestions:d.default.func,noResultsKeys:d.default.shape({title:d.default.string.isRequired,message:d.default.string.isRequired}).isRequired,noSourcesKeys:d.default.shape({title:d.default.string.isRequired,message:d.default.string.isRequired}).isRequired,headerKeys:d.default.shape({title:d.default.string.isRequired}).isRequired,footerKeys:d.default.shape({primaryButton:d.default.string.isRequired,selectedCount:d.default.string.isRequired}).isRequired,cancelModalKeys:d.default.shape({title:d.default.string.isRequired,message:d.default.string.isRequired}),pageHelpKey:d.default.string.isRequired,...w.withAnalyticsProps},A.defaultProps={searchQuestions:c.searchQuestions},A.WAIT_TIME_IN_MS=1e3;const R=h.connect((e,t)=>({questionTypes:c.select.questionType.getQuestionTypesByCourseId(e,t.courseId),sources:c.select.assessment.getAssessmentsByCourseId(e,t.courseId),tags:c.select.questionTag.getQuestionTagsByCourseId(e,t.courseId)}),e=>f.bindActionCreators({loadAssessments:c.actions.assessment.loadAssessments,loadQuestionTags:c.actions.questionTag.loadQuestionTags,loadQuestionTypes:c.actions.questionType.loadQuestionTypes},e),(e,t,s)=>({...s,...e,...t,questionTypes:s.questionTypes?s.questionTypes:e.questionTypes,sources:s.sources?s.sources:e.sources}))(A);t.default=o.withAnalytics(g.localizedComponentWrapper(S.withAssessmentCommonContext(R)))},leLK:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateRandomNumbers=e=>window.crypto.getRandomValues(new Uint8Array(e)),t.generateAccessCode=()=>t.generateRandomNumbers(6).map(e=>e%10).join("")},lqf4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attachContentChangeListener=function(e,t){const s={caretPositionChanged:e=>{},clipboardChanged:e=>{},contentChanged:e=>{t(e.getMathML())},styleChanged:e=>{},transformationReceived:e=>{}};return e.getEditorModel().addEditorListener(s),s},t.DEFAULT_RESERVED_WORDS=["sin","cos","tan","asin","acos","atan","csc","sec","cot","log","exp","ln","round","e","&#960;"];const i={reservedWordsColor:"#006fcb",forceReservedWords:"true",grammarResource:"grammar_eval_content.txt",reservedWords:t.DEFAULT_RESERVED_WORDS.join(",")};t.enableReservedWords=function(e){e.setParams(i)},t.setReservedWords=function(e,s){e.setParams({reservedWords:[...t.DEFAULT_RESERVED_WORDS,...s].join(",")})}},m20R:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("JfV0"),l=s("ALQB"),u=s("oFES"),d=s("t6ux"),c=s("Vng8"),p=s("3ZJq"),m=i.__importDefault(s("fSUK")),f=i.__importDefault(s("J495")),h=i.__importDefault(s("gvex"));s("8gHA");const g=s("E1pj");function b(e){return _.keys(e).some(t=>!0===e[t])}function y(e){return(e+1)/Object.keys(d.STEP_ENUM).length*100}t.CLASS_PREFIX="calculated-formula-question-edit",t.isAnyRowDirty=b;class E extends a.Component{constructor(e){super(e),this.onQuestionChange=e=>{const{onQuestionChange:t,question:s}=this.props,i={...s,...e};c.hasCalculatedFormulaQuestionChanged(s,i)&&t(i,this.shouldEnableSaveButton)},this.goToStep1=()=>{this.setState({activeStep:d.STEP_ENUM.ONE})},this.goToStep2=()=>{this.setState({activeStep:d.STEP_ENUM.TWO})},this.goToStep3=()=>{const{needAllNewVariableSets:e,needToRecalculateExistingVariableSets:t}=this.state,{question:s}=this.props,i=s.variableSetCount-s.variableSets.length;let a;e?a=this.generateVariableSets(s.variableSetCount):i>0?a=s.variableSets.concat(this.generateVariableSets(i,s.variableSets.length)):i<0&&(a=s.variableSets.slice(0,s.variableSetCount)),e||i>0?this.calculateMultipleRows(a):t&&this.calculateMultipleRows(s.variableSets),a&&this.onQuestionChange({variableSets:a}),this.setState({activeStep:d.STEP_ENUM.THREE,isStepOneAnswerSetsRelatedFieldDirty:!1,isStepTwoAnswerSetsRelatedFieldDirty:!1,needAllNewVariableSets:!1,needToRecalculateExistingVariableSets:!1})},this.isEveryStepValidAndClean=(e,t)=>{const{isStepOneAnswerSetsRelatedFieldDirty:s,isStepTwoAnswerSetsRelatedFieldDirty:i,isStepThreeAnswerSetsRelatedFieldDirty:a,isStepOneValid:n,isStepTwoValid:o,isStepThreeValid:r}=this.state,l=t.units&&t.units.unitsRequired&&t.units.unitValue.length<1;return n&&o&&r&&!s&&!i&&!a&&!l},this.shouldEnableSaveButton=(e,t)=>c.hasCalculatedFormulaQuestionChanged(this.originalQuestion,t)&&this.isEveryStepValidAndClean(e,t),this.handleValidateStepOne=e=>{this.setState({isStepOneValid:e})},this.handleValidateStepTwo=e=>{this.setState({isStepTwoValid:e})},this.handleValidateStepThree=e=>{this.setState({isStepThreeValid:e})},this.handleStepOneAnswerSetsRelatedFieldDirty=e=>{this.setState({isStepOneAnswerSetsRelatedFieldDirty:e})},this.handleStepTwoAnswerSetsRelatedFieldDirty=e=>{this.setState({isStepTwoAnswerSetsRelatedFieldDirty:e})},this.getFullLocalizationKey=e=>`assessments.canvas.question.calculatedFormula.${e}`,this.translateKey=(e,t)=>this.props.localize.translate(this.getFullLocalizationKey(e),t),this.buildMathMLEvaluation=(e,t,s)=>({mathML:e,variables:t,ident:s}),this.generateVariableSets=(e,t=0)=>{const{question:s}=this.props,i=[];for(let a=0;a<e;a+=1)i.push({ident:`ident-${a+t}`,variableValues:d.generateVariableValues(s.variableDefinitions),answer:null});return i},this.calculateMultipleRows=e=>{const{courseId:t,question:s}=this.props,i=this.generateMathMLEvaluationsFromVariableSets(e);return this.setState({isRecalculatingVariableSets:!0}),r.batchEvaluateMathML(t,i).then(e=>{const t=[...s.variableSets];e.forEach((e,a)=>{const n=i[a],o=_.findIndex(t,e=>e.ident===n.ident),r={answer:d.roundWithPrecision(e.result,s.answerScale,s.correctAnswerFormat,s.correctAnswerPrecision),variableValues:{...n.variables},ident:n.ident};o>-1?t[o]=r:t.push(r)}),this.setState({isRecalculatingVariableSets:!1}),this.resetAnswerSetDirtyRowMap(),this.onQuestionChange({variableSets:t})})},this.repopulateTable=()=>{this.calculateMultipleRows(this.generateVariableSets(this.props.question.variableSetCount)),this.setState({needToRecalculateExistingVariableSets:!1,needAllNewVariableSets:!1,isStepThreeAnswerSetsRelatedFieldDirty:!1})},this.generateMathMLEvaluationsFromVariableSets=e=>{const{question:t}=this.props,s=[];return e.forEach(e=>{s.push(this.buildMathMLEvaluation(t.answerFormula,e.variableValues,e.ident))}),s},this.updateAnswerSetDirtyRowMapValue=(e,t)=>{this.setState(s=>{const i={...s.answerSetTableDirtyRowMap};return i[e]=t,{answerSetTableDirtyRowMap:i}})},this.resetAnswerSetDirtyRowMap=()=>{this.setState(e=>{const t={...e.answerSetTableDirtyRowMap};return _.keys(t).forEach(e=>{t[e]=!1}),{answerSetTableDirtyRowMap:t}})},this.generateAnalyticsLinearProgressElement=e=>{const{UltraWindowSize:t}=this.props;return t.isSmallBreakpoint()&&window.Modernizr.touch?a.default.createElement(l.AnalyticsLinearProgress,{variant:"determinate",value:y(e)}):null},this.originalQuestion=e.question,this.state={activeStep:d.STEP_ENUM.ONE,answerSetTableDirtyRowMap:{},isRecalculatingVariableSets:!1,isStepOneAnswerSetsRelatedFieldDirty:!1,isStepTwoAnswerSetsRelatedFieldDirty:!1,isStepThreeAnswerSetsRelatedFieldDirty:!1,isStepOneValid:!0,isStepTwoValid:!0,isStepThreeValid:!0,needAllNewVariableSets:!e.question.variableSets||0===e.question.variableSets.length,needToRecalculateExistingVariableSets:!1}}componentDidUpdate(e,t){const{question:s}=e,{question:i}=this.props,{isStepOneAnswerSetsRelatedFieldDirty:a,isStepTwoAnswerSetsRelatedFieldDirty:n,isStepThreeAnswerSetsRelatedFieldDirty:o,isStepOneValid:r,isStepTwoValid:l,isStepThreeValid:u}=this.state,c=d.haveVariablesChanged(s.variableDefinitions,i.variableDefinitions),p=s.answerFormula!==i.answerFormula,m=b(this.state.answerSetTableDirtyRowMap),f=b(t.answerSetTableDirtyRowMap)!==m;(c||p||f)&&this.setState({needAllNewVariableSets:c||t.needAllNewVariableSets,needToRecalculateExistingVariableSets:p||t.needToRecalculateExistingVariableSets,isStepThreeAnswerSetsRelatedFieldDirty:f?m:t.isStepThreeAnswerSetsRelatedFieldDirty}),a===t.isStepOneAnswerSetsRelatedFieldDirty&&n===t.isStepTwoAnswerSetsRelatedFieldDirty&&o===t.isStepThreeAnswerSetsRelatedFieldDirty&&r===t.isStepOneValid&&l===t.isStepTwoValid&&u===t.isStepThreeValid&&(i.units&&i.units.unitValue)===(s.units&&s.units.unitValue)&&(i.units&&i.units.unitsRequired)===(s.units&&s.units.unitsRequired)||this.props.onQuestionChange(i,this.shouldEnableSaveButton)}render(){const{courseId:e,hasSubmissions:s,question:i,setActiveEditorId:n,pluginsConfig:o}=this.props,{activeStep:r,answerSetTableDirtyRowMap:l,isRecalculatingVariableSets:c,isStepOneValid:g,isStepTwoValid:b,isStepThreeValid:_}=this.state,y=this.translateKey("iconLabel.active"),E=this.translateKey("iconLabel.completed"),C=this.translateKey("iconLabel.error"),w=this.translateKey("iconLabel.incomplete");return a.default.createElement("div",{className:t.CLASS_PREFIX},this.generateAnalyticsLinearProgressElement(r),a.default.createElement(u.AnalyticsStepper,{activeStep:r,orientation:"vertical"},a.default.createElement(u.AnalyticsStep,{key:"step1"},a.default.createElement(u.AnalyticsStepLabel,{analyticsId:`${d.ANALYTICS_ID_PREFIX}.stepOne.stepLabel`,disabled:r<=d.STEP_ENUM.ONE,error:!g,onClick:this.goToStep1,iconId:"step1Icon",activeLabel:y,completedLabel:E,errorLabel:C,inCompleteLabel:w,stepNumber:this.translateKey("stepOne.stepNumber"),stepDescription:this.translateKey("stepOne.stepDescription")}),a.default.createElement(u.AnalyticsStepContent,null,a.default.createElement(m.default,Object.assign({},this.props,{courseId:e,onAnswerSetsRelatedFieldDirty:this.handleStepOneAnswerSetsRelatedFieldDirty,onGoToNextStep:this.goToStep2,onQuestionChange:this.onQuestionChange,onValidate:this.handleValidateStepOne,question:i})))),a.default.createElement(u.AnalyticsStep,{key:"step2"},a.default.createElement(u.AnalyticsStepLabel,{analyticsId:`${d.ANALYTICS_ID_PREFIX}.stepTwo.stepLabel`,disabled:r<=d.STEP_ENUM.TWO,error:!b,onClick:this.goToStep2,iconId:"step2Icon",activeLabel:y,completedLabel:E,errorLabel:C,inCompleteLabel:w,stepNumber:this.translateKey("stepTwo.stepNumber"),stepDescription:this.translateKey("stepTwo.stepDescription")}),a.default.createElement(u.AnalyticsStepContent,null,a.default.createElement(f.default,{hasSubmissions:s,onAnswerSetsRelatedFieldDirty:this.handleStepTwoAnswerSetsRelatedFieldDirty,onGoBackStep:this.goToStep1,onGoToNextStep:this.goToStep3,onQuestionChange:this.onQuestionChange,onValidate:this.handleValidateStepTwo,question:i,translateKey:this.translateKey}))),a.default.createElement(u.AnalyticsStep,{key:"step3"},a.default.createElement(u.AnalyticsStepLabel,{disabled:r<=d.STEP_ENUM.THREE,error:!_,onClick:this.goToStep3,iconId:"step3Icon",activeLabel:y,completedLabel:E,errorLabel:C,inCompleteLabel:w,stepNumber:this.translateKey("stepThree.stepNumber"),stepDescription:this.translateKey("stepThree.stepDescription"),analyticsId:`${d.ANALYTICS_ID_PREFIX}.stepThree.stepLabel`}),a.default.createElement(u.AnalyticsStepContent,null,a.default.createElement(h.default,{calculateMultipleRows:this.calculateMultipleRows,courseId:e,dirtyRowMap:l,hasSubmissions:s,isRecalculatingVariableSets:c,onGoBackStep:this.goToStep2,onQuestionChange:this.onQuestionChange,onValidate:this.handleValidateStepThree,question:i,repopulateTable:this.repopulateTable,resetDirtyRowMap:this.resetAnswerSetDirtyRowMap,updateDirtyRowMapValue:this.updateAnswerSetDirtyRowMapValue})))),a.default.createElement(p.AutomatedQuestionFeedbackEdit,{onQuestionChange:this.onQuestionChange,question:i,setActiveEditorId:n,pluginsConfig:o}))}}t.BaseCalculatedFormulaQuestionEdit=E,E.propTypes={courseId:n.default.string,hasSubmissions:n.default.bool.isRequired,localize:n.default.object.isRequired,onQuestionChange:n.default.func.isRequired,question:n.default.object.isRequired,pluginsConfig:n.default.shape({}).isRequired},t.UnwrappedCalculatedFormulaQuestionEdit=o.localizedComponentWrapper(E),t.default=g.windowResizingResponsiveComponentWrapper(t.UnwrappedCalculatedFormulaQuestionEdit)},mMWB:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importStar(s("ERkP")),a=s("8unJ"),n=s("fWGr");t.LocalizedAssessmentQuestionCounts=a.localizedComponentWrapper(({descriptionId:e,totalQuestionCount:t,unansweredQuestionCount:s,localize:a})=>{const{textClass:o}=n.useStyles(),[r,l]=i.useState("");return i.useEffect(()=>{const e=a.translate("assessmentProgress.questionCounts.unansweredText",{unanswered:s}),n=a.translate("assessmentProgress.questionCounts.fullText",{total:t,unanswered:i.createElement("strong",{key:"unanswered"},e)});l(n)},[t,s]),i.createElement("span",{id:e,className:o,role:"status","aria-live":"polite"},r)})},mWAU:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ");s("xWTz");const r=e=>{const{title:t,titleAlert:s,points:i,localize:n}=e,o=null==i?n.translate("assessments.canvas.question.header.noPoints"):n.translate("assessments.canvas.question.header.points",{points:n.formatNumber(i,{maximumFractionDigits:2})});return a.default.createElement("div",{className:"readonly-question-header"},a.default.createElement("span",{className:"readonly-question-header__content"},a.default.createElement("span",{className:"readonly-question-header__title-container"},a.default.createElement("h3",{className:"readonly-question-header__title"},t),s&&a.default.createElement("span",{className:"readonly-question-header__title-alert"},s)),a.default.createElement("span",{className:"readonly-question-header__pill"},o)))};r.propTypes={title:n.default.string,titleAlert:n.default.string,points:n.default.number,localize:n.default.object},t.default=o.localizedComponentWrapper(r)},mzw0:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("ERkP"),a=s("gKi8"),n={initError:null,isReady:!1,wirisEditorInstance:null},o=(e,t)=>{switch(t.type){case"get-new-instance":return{...n};case"ready":return{...e,isReady:!0,wirisEditorInstance:t.wirisEditorInstance};case"error":return{...e,isReady:!1,initError:t.error};default:throw Error(`Unrecognized action: ${t}`)}};t.useWirisEditor=(e,t,s,r)=>{const[{isReady:l,initError:u,wirisEditorInstance:d},c]=i.useReducer(o,n);return i.useEffect(()=>{let i;const n=new a.WirisService(t);return c({type:"get-new-instance"}),n.newInstance({mml:s,language:r,fontFamily:"stix"}).then(t=>{(i=t).insertInto(e.current),c({type:"ready",wirisEditorInstance:i})},e=>{c({type:"error",error:e})}),()=>{i&&i.close()}},[e]),i.useEffect(()=>{d&&d.getEditorModel().getParam("language")!==r&&d.setParam("language",r)},[r,d]),{initError:u,isReady:l,wirisEditorInstance:d}}},nUPs:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("MC1S"),l=s("caKH"),u=e=>{const{localize:t,message:s,onStay:i,onProceed:n,show:o,title:u}=e;return a.default.createElement(l.UltraModalDialog,{hidden:!o,onDismiss:i,dialogContentProps:{type:r.DialogType.normal,title:u,subText:s,showCloseButton:!0,isAlert:!0},analyticsId:"questionReuse.cancelDialog.dialog"},a.default.createElement(r.DialogFooter,null,a.default.createElement(r.DefaultButton,{onClick:i,text:t.translate("questionReuse.cancelDialog.cancel"),analyticsId:"questionReuse.cancelDialog.cancel"}),a.default.createElement(r.PrimaryButton,{onClick:n,text:t.translate("questionReuse.cancelDialog.ok"),analyticsId:"questionReuse.cancelDialog.ok"})))};u.propTypes={localize:n.default.object.isRequired,message:n.default.string.isRequired,onStay:n.default.func.isRequired,onProceed:n.default.func.isRequired,show:n.default.bool.isRequired,title:n.default.string.isRequired},t.default=o.localizedComponentWrapper(u)},nwoY:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("MC1S"),r=s("8unJ"),l=i.__importDefault(s("cFZT"));s("4+yV");const u=({localize:e,image:t,title:s,message:i,showFilterPanelButton:n,onFilterPanelToggle:r})=>a.default.createElement("div",{className:"items-empty-state"},a.default.createElement(l.default,{image:t,passedClass:"items-empty-state__image",presentationOnly:!0}),a.default.createElement("h3",{className:"items-empty-state__title"},s),a.default.createElement("div",{className:"items-empty-state__message"},i),n&&a.default.createElement(o.PrimaryButton,{className:"items-empty-state__button js-items-empty-state-filter-button",onClick:r,text:e.translate("questionReuse.emptyState.dueToFilter.filterButton"),analyticsId:"questionReuse.emptyState.dueToFilter.filter"}),a.default.createElement("span",{role:"alert",className:"sr-only"},s));u.propTypes={localize:n.default.object.isRequired,image:n.default.string.isRequired,title:n.default.string.isRequired,message:n.default.string.isRequired,showFilterPanelButton:n.default.bool.isRequired,onFilterPanelToggle:n.default.func.isRequired},t.default=r.localizedComponentWrapper(u)},o7ef:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLASS_BASE="question-block",t.LOCALE_KEY_BASE="assessments.canvas.question.questionBlock"},o8si:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("0x+l");s("VPjn");class r extends a.PureComponent{render(){return a.default.createElement("div",{className:`drag-button ${null!=this.props.className?this.props.className:""}`,ref:this.props.dragPointRef,draggable:!0,title:this.props.title,"aria-label":this.props.ariaLabel,"aria-describedby":this.props.ariaDescribedBy,role:"button","aria-hidden":this.props.removedFromTabOrder?"true":void 0,tabIndex:this.props.removedFromTabOrder?"-1":"0"},a.default.createElement(o.MoveItemUpDown,null))}}r.propTypes={ariaLabel:n.default.string,ariaDescribedBy:n.default.string,className:n.default.string,dragPointRef:n.default.func.isRequired,title:n.default.string.isRequired,removedFromTabOrder:n.default.bool},t.default=r},p0wN:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=i.__importDefault(s("j9WP")),l=i.__importDefault(s("/rnO")),u=i.__importDefault(s("RtIR"));s("UyCi"),t.QuestionPoolQuestion=e=>{const{courseId:t,question:s,localize:i,deleteQuestion:n,hasSubmissions:o,focusTitle:d,isAnyQuestionDirty:c,questionBeingEditedId:p,onQuestionEdit:m,onQuestionMadeDirty:f,persistQuestion:h,hasAssessmentModifyPermissions:g,localizationPrefix:b}=e,_=e=>u.default("overflow",s,e);return a.default.createElement("div",{className:"question-pool-question"},a.default.createElement(r.default,{courseId:t,focusTitle:d,question:s,deleteQuestion:n,hasSubmissions:o,questionBeingEditedId:p,questionTitle:i.translate(`questionPools.typeLabels.${s.questionType}`),onQuestionEdit:m,onQuestionMadeDirty:f,isAnyQuestionDirty:c,persistQuestion:h,openGoals:()=>{},pluginsConfig:{},showQuestionControls:!1,localizationPrefix:b,customQuestionHeader:e=>a.default.createElement(l.default,Object.assign({},e,{questionSourceName:s.sourceInfo.name,hasAssessmentModifyPermissions:g,hasSubmissions:o,deleteQuestion:n,overflowMenuButtonLabelData:_(e.questionTitle)}))}))},t.QuestionPoolQuestion.propTypes={courseId:n.default.string.isRequired,question:n.default.object.isRequired,localize:n.default.object.isRequired,hasSubmissions:n.default.bool.isRequired,deleteQuestion:n.default.func.isRequired,focusTitle:n.default.bool,isAnyQuestionDirty:n.default.bool.isRequired,questionBeingEditedId:n.default.string,onQuestionEdit:n.default.func.isRequired,onQuestionMadeDirty:n.default.func.isRequired,persistQuestion:n.default.func.isRequired,hasAssessmentModifyPermissions:n.default.bool.isRequired,localizationPrefix:n.default.string.isRequired},t.default=o.localizedComponentWrapper(t.QuestionPoolQuestion)},p1hm:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("MC1S"),l=i.__importDefault(s("D0DQ")),u=i.__importDefault(s("xzbH"));s("1S7Y"),t.ANSWER_DELIMITER=";",t.EvaluationTypeEnum={EXACT:{locKey:"assessments.canvas.question.fimb.responseType.exact"},CONTAINS:{locKey:"assessments.canvas.question.fimb.responseType.contains"},MATCHES:{locKey:"assessments.canvas.question.fimb.responseType.matches"}};const d=e=>{const{evaluationType:s,caseSensitive:i}=e.answer.answerValues[0];return{text:e.answer.answerValues.map(e=>e.value).join(t.ANSWER_DELIMITER),evaluationType:s,caseSensitive:i,testPatternDialogOpen:!1}};class c extends a.Component{constructor(e){super(e),this.openTestPatternDialog=()=>{this.setState({testPatternDialogOpen:!0})},this.hideTestPatternDialog=()=>{this.setState({testPatternDialogOpen:!1})},this.updateInputValue=e=>{const t={...this.props.answer,answerValues:this.parseAnswerText(e)};this.props.onAnswerChange(t)},this.parseAnswerText=e=>e.split(t.ANSWER_DELIMITER).map(e=>({value:e,evaluationType:this.state.evaluationType,caseSensitive:this.state.caseSensitive})),this.onAnswerChange=()=>{this.updateInputValue(this.state.text)},this.setText=e=>{this.setState(()=>({text:e}),this.onAnswerChange)},this.setEvaluationType=e=>{this.setState(()=>({evaluationType:e.key}),this.onAnswerChange)},this.setCaseSensitive=()=>{this.setState(e=>({caseSensitive:!e.caseSensitive}),this.onAnswerChange)},this.state=d(e)}UNSAFE_componentWillReceiveProps(e){this.setState(d(e))}render(){const e=this.props.localize.translate,s=Object.keys(t.EvaluationTypeEnum).map(s=>({key:s,text:e(`${t.EvaluationTypeEnum[s].locKey}.edit`)})),i=this.props.answer.answerValues[0],n=e(`${t.EvaluationTypeEnum[i.evaluationType].locKey}.${i.caseSensitive?"readOnlyCaseSensitive":"readOnly"}`);return a.default.createElement("div",{className:`fimb-question-answer fimb-question-answer--${this.props.readOnly?"read":"edit"}`},a.default.createElement(l.default,{disabled:this.props.disabled,editable:!this.props.readOnly,inputDescriptionText:n,inputLabelText:this.props.inputLabel,inputText:this.state.text,onInputChange:this.setText}),!this.props.readOnly&&a.default.createElement("div",{className:"fimb-question-answer__options"},a.default.createElement("div",{className:"fimb-question-answer__match-selector"},a.default.createElement(r.Dropdown,{label:e("assessments.canvas.question.fimb.responseType.label"),options:s,selectedKey:this.state.evaluationType,onChanged:this.setEvaluationType,disabled:this.props.disabled,inlineLabel:!0})),"MATCHES"!==this.state.evaluationType&&a.default.createElement(r.Checkbox,{className:"fimb-question-answer__checkbox",label:e("assessments.canvas.question.fimb.caseSensitive"),checked:this.state.caseSensitive,onChange:this.setCaseSensitive,disabled:this.props.disabled,analyticsId:"assessments.canvas.question.fimb.caseSensitive"}),"MATCHES"===this.state.evaluationType&&a.default.createElement(r.DefaultButton,{className:"fimb-question-answer__test-pattern-button",onClick:this.openTestPatternDialog,disabled:this.props.disabled,analyticsId:"assessments.canvas.question.fimb.testPattern"},e("assessments.canvas.question.fimb.testPatternButton")),this.state.testPatternDialogOpen&&a.default.createElement(u.default,{hidden:!this.state.testPatternDialogOpen,initialPatternValue:this.state.text,onClose:this.hideTestPatternDialog,onSave:this.updateInputValue,assessmentId:this.props.assessmentId,courseId:this.props.courseId})))}}c.propTypes={answer:n.default.object.isRequired,assessmentId:n.default.string,courseId:n.default.string,disabled:n.default.bool.isRequired,inputLabel:n.default.string.isRequired,localize:n.default.object.isRequired,onAnswerChange:n.default.func.isRequired,readOnly:n.default.bool.isRequired};const p=o.localizedComponentWrapper(c);t.default=p},p3LL:function(e,t,s){"use strict";s.r(t)},pfaR:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("MC1S"),r=s("0x+l"),l=s("8unJ"),u=s("caKH"),d="assessments.canvas.question.questionBlock.removeQuestionFromPoolConfirmation";class c extends a.default.Component{constructor(e){super(e),this.actionMenuButtonRef=a.default.createRef(),this.onDeleteClick=()=>{this.setState({isConfirmationDialogOpen:!0})},this.onConfirmationDismiss=()=>{this.setState({isConfirmationDialogOpen:!1})},this.onCancelDelete=()=>{this.onConfirmationDismiss(),this.actionMenuButtonRef.current.firstChild.focus()},this.onMenuOpen=()=>{this.state.isConfirmationDialogOpen&&this.onConfirmationDismiss()},this.state={isConfirmationDialogOpen:!1}}getActionMenuProps(){const{localize:e,hasSubmissions:t,hasAssessmentModifyPermissions:s,startEditMode:i}=this.props,n={directionalHint:6,enableBodyScrollingDisabledCheck:!1,onMenuOpened:this.onMenuOpen,items:[]};return s&&n.items.push({key:"edit",name:e.translate("questionPools.questionHeader.edit"),icon:a.default.createElement(r.EditTool,null),onClick:()=>i()}),!t&&s&&n.items.push({key:"delete",name:e.translate("questionPools.questionHeader.delete"),icon:a.default.createElement(r.Trash,null),onClick:this.onDeleteClick}),n}getDeleteConfirmationProps(){const{localize:e}=this.props;return{onDismiss:this.onConfirmationDismiss,showAsCallout:!0,target:this.actionMenuButtonRef.current,calloutProps:{setInitialFocus:!0},dialogContentProps:{type:o.DialogType.actionConfirmation,showCloseButton:!1,title:e.translate(`${d}.title`),subText:e.translate(`${d}.subText`)}}}render(){const{deleteQuestion:e,localize:t,overflowMenuButtonLabelData:s}=this.props,i=this.getActionMenuProps();return a.default.createElement("div",{ref:this.actionMenuButtonRef},!!i.items.length&&a.default.createElement(o.ActionMenu,{maintainExpandedProperties:this.state.isConfirmationDialogOpen,menuProps:i,"aria-hidden":"false",ariaLabel:t.translate(s.string,{relatedContent:s.relation}),analyticsId:"questionPools.questionHeader.actionMenu"}),this.state.isConfirmationDialogOpen?a.default.createElement(u.UltraModalDialog,Object.assign({},this.getDeleteConfirmationProps(),{analyticsId:"questionPools.questionHeader.confirmationDialog.dialog"}),a.default.createElement(o.DialogFooter,null,a.default.createElement(o.DefaultButton,{onClick:this.onCancelDelete,text:t.translate(`${d}.cancel`),analyticsId:"questionPools.questionHeader.confirmationDialog.cancel.button"}),a.default.createElement(o.PrimaryButton,{onClick:e,text:t.translate(`${d}.remove`),analyticsId:"questionPools.questionHeader.confirmationDialog.remove.button"}))):null)}}c.propTypes={localize:n.default.object.isRequired,startEditMode:n.default.func.isRequired,hasSubmissions:n.default.bool.isRequired,hasAssessmentModifyPermissions:n.default.bool.isRequired,deleteQuestion:n.default.func.isRequired,overflowMenuButtonLabelData:n.default.object.isRequired},t.default=l.localizedComponentWrapper(c)},pzAO:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("7nmT")),o=s("uDfI"),r=s("8unJ"),l=s("tN4z"),u=i.__importDefault(s("Mx6v")),d=i.__importDefault(s("VsDy")),c=i.__importDefault(s("jZ9E"));t.ReadonlyQuestion=c.default;const p=i.__importDefault(s("j9WP")),m=s("QJmz"),f=s("X3OV"),h=i.__importDefault(s("bNEL"));function g(e,t,s,i,o,l){let u=s;null==s&&"undefined"!=typeof window&&window.location.search.match("setLang=")&&(u=window.location.search.match(/setLang=([^$&]+)/)[1]),n.default.render(a.default.createElement(r.Locale,{locale:u,babelfishInstance:i,babelfishFormatInstance:o,bundlesToLoad:["assessments/locales/[locale]/assessment-canvas.json"],isRtl:l},a.default.createElement("div",{className:"assessments-app"},e)),t)}t.AccessCode=h.default,i.__exportStar(s("E8lv"),t),i.__exportStar(s("tQQy"),t),t.renderAssessmentPanel=(e,{store:t,locale:s,babelfishInstance:i,babelfishFormatInstance:n,isRtl:r},{courseId:d,contentId:c,features:p,routes:h,setIsAnyQuestionDirty:b=null,isOrganization:_,allyService:y,editorPluginsConfig:E={},applyAccessibilityHandling:C,revertAccessibilityHandling:w,usePanelHeightOffset:S})=>{Object.keys(p).forEach(e=>{m.setToggle(e,p[e])});const P=_?"assessments.organization":"assessments";g(a.default.createElement(o.Provider,{store:t},a.default.createElement(l.AnalyticsJssThemeProvider,{theme:"light",isRtl:r},a.default.createElement(f.AssessmentsCommonContextWrapper,{usePanelHeightOffset:S},a.default.createElement(u.default,{babelfishInstance:i,contentId:c,courseId:d,features:p,routes:h,pluginsConfig:E,setIsAnyQuestionDirty:b,applyAccessibilityHandling:C,revertAccessibilityHandling:w,localizationPrefix:P,allyService:y})))),e,s,i,n,r)},t.renderAssessmentSettings=(e,{store:t,locale:s,babelfishInstance:i,babelfishFormatInstance:n,isRtl:r},{courseId:u,contentId:c,routes:p,isOrganization:m})=>{const f=m?"assessments.organization":"assessments";g(a.default.createElement(o.Provider,{store:t},a.default.createElement(l.AnalyticsJssThemeProvider,{theme:"light",isRtl:r},a.default.createElement(d.default,{courseId:u,contentId:c,routes:p,localizationPrefix:f}))),e,s,i,n,r)},t.renderQuestion=(e,t,s,i,u,d,c,m,f)=>{const h=m?"assessments.organization":"assessments";n.default.render(a.default.createElement(o.Provider,{store:t},a.default.createElement(r.Locale,{locale:s,babelfishInstance:i,babelfishFormatInstance:u,isRtl:d},a.default.createElement(l.AnalyticsJssThemeProvider,{theme:"light",isRtl:d},a.default.createElement(p.default,Object.assign({},c,{localizationPrefix:h}))))),e,f||null)};const b={renderAssessmentPanel:t.renderAssessmentPanel,renderAssessmentSettings:t.renderAssessmentSettings,renderQuestion:t.renderQuestion,destroyReactControl:e=>{n.default.unmountComponentAtNode(e)}};t.default=b},qA6I:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=s("8unJ"),o=s("MC1S"),r=s("0x+l"),l=i.__importDefault(s("Pfoe"));s("NHtK"),t.getReuseAnswerMenuItems=e=>{const{answerIdToPromptIndexMap:t,localize:s,onReuse:i,reusableAnswers:n}=e;return n.map(n=>{const o=t[n.ui.id],r=`reuse-answer-${o}`;return{key:o,name:a.default.createElement("div",{className:"assessments-reuse-answer-menu-item"},a.default.createElement("div",{className:"assessments-reuse-answer-menu-item__pair-number","aria-hidden":"true"},o+1),a.default.createElement(l.default,Object.assign({},e,{id:r,isReadOnly:!0,bbml:n.answerText.rawText}))),onClick:i,ariaLabel:s.translate("assessments.canvas.question.matching.reuseAnswerItemAriaLabel",{pairNumber:o+1})}})},t.getReuseAnswerMenuItemNormal=e=>{const{localize:s,pairNumber:i}=e,n=t.getReuseAnswerMenuItems(e);return{key:"reuseAnswer",icon:a.default.createElement(r.Reuse,null),name:s.translate("assessments.canvas.question.matching.reuseAnswer"),ariaLabel:s.translate("assessments.canvas.question.matching.reuseAnswerAriaLabel",{pairNumber:i}),subMenuProps:{shouldFocusOnMount:!0,items:n,calloutProps:{preventDismissOnScroll:!0}},disabled:0===n.length,className:"js-reuse-answer"}},t.getReuseAnswerMenuItemAlreadyReused=e=>{const{localize:t,pairNumber:s}=e;return{key:"reuseAnswer",icon:a.default.createElement(r.Reuse,null),name:t.translate("assessments.canvas.question.matching.reuseAnswerAlreadyReused"),ariaLabel:t.translate("assessments.canvas.question.matching.reuseAnswerAlreadyReusedAriaLabel",{pairNumber:s}),disabled:!0}},t.getDeletePairMenuItem=e=>{const{canDeletePair:t,localize:s,onDelete:i,pairNumber:n,questionTitle:o}=e;return{key:"deletePair",icon:a.default.createElement(r.Trash,null),name:s.translate("assessments.canvas.question.matching.deletePair"),ariaLabel:s.translate("assessments.canvas.question.matching.deletePairAriaLabel",{questionTitle:o,pairNumber:n}),onClick:i,disabled:!t,className:"js-delete-pair"}},t.getDropDownMenuOptions=e=>{const{answerIsReused:s,showDeletePair:i,showReuseAnswer:a}=e,n=[];return a&&(s?n.push(t.getReuseAnswerMenuItemAlreadyReused(e)):n.push(t.getReuseAnswerMenuItemNormal(e))),i&&n.push(t.getDeletePairMenuItem(e)),n};const u=e=>{const{componentRef:s,localize:i,pairNumber:n,questionTitle:r}=e,l=t.getDropDownMenuOptions(e);return 0===l.length?null:a.default.createElement("div",{className:"matching-prompt-answer-pair__menu"},a.default.createElement(o.ActionMenu,{analyticsId:"assessments.canvas.question.matching.actionMenu",ariaLabel:i.translate("assessments.canvas.question.matching.moreOptionsAriaLabel",{questionTitle:r,pairNumber:n}),componentRef:s,menuProps:{items:l,calloutProps:{preventDismissOnScroll:!0}}}))};t.UnwrappedMenu=u,t.default=n.localizedComponentWrapper(u)},qTgb:function(e,t,s){"use strict";s.r(t)},qgI1:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K").__importStar(s("ERkP")),a=s("zTL+"),n=s("nmzr"),o=s("7NIW"),r=s("sEjo"),l=s("8unJ");t.LocalizedPeerNotEnoughSubmissionsBanner=l.localizedComponentWrapper(({localize:e})=>{const t=e.translate("banners.peerAssessments.notEnoughSubmissions.editSettingsButton"),s=e.translate("banners.peerAssessments.notEnoughSubmissions.notice"),l=[i.createElement(r.AnalyticsOutlineButton,{analyticsId:"course.grades.gradebook-item.peerReview.notEnoughSubmissionsBanner.editSettingsButton",key:"edit",onClick:()=>{n.router.goPeekState(n.assessmentSettingsRequest({focusEleId:"enable-peer-grading"}))}},t)],u=i.createElement(o.Attention,null);return i.createElement(a.AnalyticsBanner,{severity:"error",actions:l,icon:u},i.createElement("span",{className:"js-banner-contents"},s))})},"qs/y":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=i.__importDefault(s("3Md0")),r=e=>a.default.createElement(o.default,Object.assign({},e,{noResultsKeys:{title:"questionReuse.emptyState.dueToFilter.header",message:"questionReuse.emptyState.dueToFilter.message"},noSourcesKeys:{title:"questionReuse.emptyState.dueToSource.header",message:"questionReuse.emptyState.dueToSource.message"},headerKeys:{title:"questionReuse.questionPickerHeader"},footerKeys:{primaryButton:"questionReuse.footer.primaryButtonText",selectedCount:"questionReuse.footer.selectedCount"},cancelModalKeys:{title:"questionReuse.cancelDialog.title",message:"questionReuse.cancelDialog.subtext"},pageHelpKey:"questionReuse.pageHelpUrl"}));r.propTypes={closePanel:n.default.func.isRequired,courseId:n.default.string.isRequired,destination:n.default.object.isRequired,localizationPrefix:n.default.string.isRequired},t.default=r},rLAU:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=s("E1pj"),o=s("8unJ"),r=i.__importDefault(s("aNN5")),l=i.__importDefault(s("kPPX")),u=i.__importDefault(s("gTAB")),d=i.__importDefault(s("Pfoe")),c=s("2yjE"),p=i.__importDefault(s("qA6I"));s("ZnFM");class m extends a.Component{constructor(e){super(e),this.overflowMenuRef=null,this.getReusableAnswers=()=>this.props.reusableAnswers.filter(e=>this.props.answer!==e),this.focusOverflowMenu=()=>{null!=this.overflowMenuRef&&this.overflowMenuRef.focus()},this.onPromptChange=e=>{const{prompt:t}=this.props,s={...t,promptText:{rawText:e.toBbML()}};this.props.onPromptChange(s)},this.onAnswerChange=e=>{const{answer:t}=this.props,s={...t,answerText:{rawText:e.toBbML()}};this.props.onAnswerChange(s)},this.onDeleteReused=()=>{this.setState({deleteReusedDialogHidden:!1})},this.onDeleteCanceled=()=>{this.setState({deleteReusedDialogHidden:!0})},this.onDelete=()=>{this.focusOverflowMenu(),this.props.onPromptAnswerPairDeletion(this.props.prompt.id)},this.getOnDeleteCallback=()=>this.props.reusedElsewherePair?this.onDeleteReused:this.onDelete,this.onReuseAnswer=(e,t)=>{const{onPromptAnswerReuse:s,prompt:i}=this.props,a=t.key;s(i.id,a),this.focusOverflowMenu()},this.onRemoveReusedAnswer=()=>{const{onPromptRemoveReusedAnswer:e,prompt:t}=this.props;e(t.id)},this.storeOverflowMenuRef=e=>{this.overflowMenuRef=e},this.state={deleteReusedDialogHidden:!0}}render(){const{answer:e,answerIdToPromptIndexMap:t,answerIsReused:s,editMode:i,index:n,localize:o,prompt:m,question:f,questionTitle:h,reusedElsewherePair:g,UltraWindowSize:b}=this.props,_=u.default.isInactive(i),y=n+1,E=`prompt-header-${f.id}-${n}`,C=`${c.QUESTION_TITLE_ID_PREFIX}${f.id} ${E}`,w=b.isSmallBreakpoint()?o.translate("assessments.canvas.question.matching.indexMobile",{pairNumber:y}):o.translate("assessments.canvas.question.matching.index",{pairNumber:y}),S=a.default.createElement(p.default,{answerIsReused:s,answerIdToPromptIndexMap:t,canDeletePair:this.props.canDeletePromptAnswerPair(m.reusesAnswer),componentRef:this.storeOverflowMenuRef,onDelete:this.getOnDeleteCallback(),onReuse:this.onReuseAnswer,pairNumber:y,questionTitle:h,reusableAnswers:this.getReusableAnswers(),showDeletePair:this.props.hasRemovePromptAnswerPairPermissions,showReuseAnswer:this.props.hasReuseAnswerPermissions});return a.default.createElement("div",{className:`matching-prompt-answer-pair\n                ${_?"matching-prompt-answer-pair--read":"matching-prompt-answer-pair--edit"}`},!_&&b.isSmallBreakpoint()&&S,a.default.createElement("div",{className:`matching-prompt-answer-pair__element matching-prompt-answer-pair__element-index ${!_&&b.isSmallBreakpoint()?"field-required":""}`},w),a.default.createElement("div",{className:"matching-prompt-answer-pair__element matching-prompt-answer-pair__element-prompt"},a.default.createElement("div",{className:"matching-prompt-answer-pair__text"},a.default.createElement("div",{id:E,className:"sr-only"},o.translate("assessments.canvas.question.matching.headers.prompt",{pairNumber:y})),a.default.createElement(d.default,Object.assign({},this.props,{ariaLabelledBy:C,bbml:m.promptText.rawText,id:`prompt-${m.id}`,isReadOnly:_,onChange:this.onPromptChange,placeholder:o.translate("assessments.canvas.question.matching.placeholders.prompt",{pairNumber:y}),toolbarSet:"minimal",ariaRequired:!0})))),b.isSmallBreakpoint()&&a.default.createElement("div",{className:`matching-prompt-answer-pair__element matching-prompt-answer-pair__element-answer-label ${_?"":"field-required"}`},o.translate("assessments.canvas.question.matching.answerLabel")),a.default.createElement(r.default,Object.assign({},this.props,{isReadOnly:_,onEditorTextChange:this.onAnswerChange,onRemoveReusedAnswer:this.onRemoveReusedAnswer,pairNumber:t[e.ui.id]+1,prompt:m,reusedElsewherePair:g,text:e.answerText.rawText})),!_&&!b.isSmallBreakpoint()&&S,g&&a.default.createElement(l.default,{hidden:this.state.deleteReusedDialogHidden,onCancel:this.onDeleteCanceled,onContinue:this.onDelete,titleKey:"assessments.canvas.question.matching.dialogs.deleteReusedAnswer.title",textKey:"assessments.canvas.question.matching.dialogs.deleteReusedAnswer.text",cancelKey:"assessments.canvas.question.matching.dialogs.deleteReusedAnswer.button.cancel",continueKey:"assessments.canvas.question.matching.dialogs.deleteReusedAnswer.button.delete",analyticsId:"assessments.canvas.question.matching.dialogs.deleteReusedAnswer"}))}}t.UnwrappedMatchingPromptAnswerPair=m,t.default=n.windowResizingResponsiveComponentWrapper(o.localizedComponentWrapper(t.UnwrappedMatchingPromptAnswerPair))},rZf7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("Agfx");t.useStyles=i.makeStyles(e=>i.createStyles({base:{marginTop:"12px","& .bb-editor":{padding:"8px 0 0 !important"},"& .bb-editor-container":{margin:"0 !important"}},contentSection:{backgroundColor:e.palette.background.b3,borderRadius:"2px",padding:"12px"},contentToggle:{padding:"12px 0",display:"flex",alignItems:"center"},contentToggleIcon:{height:"8px",width:"8px",marginLeft:"8px"},sectionHeader:{display:"flex",alignItems:"center"},contentTitle:{},feedbackIcon:{marginRight:"8px"}}))},scU2:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=i.__importDefault(s("d6RO")),r=s("zGdY");s("O761");const l=e=>{const{content:t}=e,{deploymentSettings:s}=t;return a.default.createElement(u,{settings:s,localize:e.localize,localizationPrefix:e.localizationPrefix})};l.propTypes={content:n.default.object.isRequired,localize:n.default.object.isRequired,localizationPrefix:n.default.string.isRequired};const u=e=>{const{isRandomizationOfQuestionsRequired:t,isRandomizationOfAnswersRequired:s}=e.settings,i=`${e.localizationPrefix}.canvas.subheader.isAnswersRandomized`,n=`${e.localizationPrefix}.canvas.subheader.isQuestionsRandomized`,o=`${e.localizationPrefix}.canvas.subheader.isBothRandomized`;return t&&s===r.RandomizeAnswers.Always?a.default.createElement(d,{messageKey:o,localize:e.localize}):t?a.default.createElement(d,{messageKey:n,localize:e.localize}):s===r.RandomizeAnswers.Always?a.default.createElement(d,{messageKey:i,localize:e.localize}):null};u.propTypes={isRandomizationOfQuestionsRequired:n.default.bool,isRandomizationOfAnswersRequired:n.default.string,settings:n.default.object.isRequired,localize:n.default.object.isRequired,localizationPrefix:n.default.string.isRequired};const d=e=>{const{messageKey:t}=e;return a.default.createElement("div",null,a.default.createElement("div",{className:"assessment-subheader"},a.default.createElement(o.default,{text:e.localize.translate(t)})))};d.propTypes={messageKey:n.default.string,localize:n.default.object.isRequired},t.default=l},t6ux:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("nsO7"),a=s("a6r6"),n=s("zGdY");function o(e){const t=e.match(/[a-zA-Z]/gi);return!t||t.length<e.length}function r(e){return{name:e,maxValue:t.VARIABLE_DEFINITION_DEFAULT_MAX,minValue:t.VARIABLE_DEFINITION_DEFAULT_MIN,scale:t.VARIABLE_DEFINITION_DEFAULT_SCALE}}function l(e){return e?i.without(e.match(/[a-zA-Z0-9]+(?=<\/mi>)/g),...a.WirisEditorInstanceUtils.DEFAULT_RESERVED_WORDS):[]}function u(e){return e?e.map(e=>e.name):[]}t.ANALYTICS_ID_PREFIX="assessments.canvas.question.calculatedFormula",t.STEP_ENUM={ONE:0,TWO:1,THREE:2},t.VARIABLE_DEFINITION_DEFAULT_MIN=0,t.VARIABLE_DEFINITION_DEFAULT_MAX=100,t.VARIABLE_DEFINITION_DEFAULT_SCALE=0,t.extractVariableCandidatesFromQuestionText=function(e){const t=/\[([^\s[\]]+)\]/gi,s=[];let i=t.exec(e);for(;null!=i;)1!==i.index&&"\\"===e.charAt(i.index-1)||s.push(i[1]),i=t.exec(e);return Array.from(new Set(s))},t.variableNameContainsNonLetterCharacters=o,t.isVariableAWirisEditorReservedWord=function(e){return a.WirisEditorInstanceUtils.DEFAULT_RESERVED_WORDS.includes(e)},t.getVariableDefinitionFromCandidate=r,t.getVariableDefinitionsFromCandidates=function(e){const t=new Set(e),s=[];return t.forEach(e=>{o(e)||s.push(r(e))}),s},t.questionTextHasUnclosedBrackets=function(e){const t=e.split("");let s=!1;return t.some((e,i)=>{if(s&&"]"===e)s=!1;else{if(s){const t=e.match(/\s/i);return!!(t&&t.length>0)}"["===e&&(s=0===i||"\\"!==t[i-1])}return!1})||s},t.generateVariableValues=function(e){const t={};return e.forEach(e=>{const{minValue:s,maxValue:a,name:n,scale:o}=e;t[n]=i.round(Math.random()*(a-s)+s,o)}),t},t.getVariablesFromMathML=l,t.getVariablesFromVariableDefinitions=u,t.haveVariablesChanged=function(e,t){return i.xor(u(e),u(t)).length>0},t.getUnrecognizedVariablesInAnswerFormula=function(e,t){return i.without(l(e),...u(t))},t.roundWithPrecision=function(e,t,s,i){const{SignificantFigures:a,Decimal:o}=n.CalculatedFormulaAnswerPrecisionType,{Normal:r,Exponential:l}=n.CalculatedFormulaAnswerFormatType;if(s===r&&i===o){const s=Number((Math.abs(e)*10**t).toPrecision(15));return Math.round(s)/10**t*Math.sign(e)}return s===l&&i===o?parseFloat(e.toExponential(t)):i===a?parseFloat(e.toPrecision(t)):null},t.doesQuestionHaveVariables=function({variableDefinitions:e}){return null!=e&&e.length>0},t.getCorrectAnswerToleranceValue=function(e){return e&&e.value>0?e.value:null},t.getCorrectAnswerToleranceType=function(e){return e&&e.value>0?e.type:null},t.getAnswerTranslationKey=function(e,t,s,i){let a="";if(i&&s)a=t===n.CalculatedFormulaToleranceType.Numeric?"unitsAndAnswerTolerance":"unitsAndAnswerTolerancePercent";else if(i&&!s)a="units";else{if(i||!s)return null;a=t===n.CalculatedFormulaToleranceType.Numeric?"answerTolerance":"answerTolerancePercent"}return`${e}.${a}`}},t70R:function(e,t,s){"use strict";s.r(t)},tQQy:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("EH0T");t.LocalizedAssessmentProgressBar=i.LocalizedAssessmentProgressBar;var a=s("mMWB");t.LocalizedAssessmentQuestionCounts=a.LocalizedAssessmentQuestionCounts;var n=s("GOY5");t.BaseQuestionAttemptView=n.BaseQuestionAttemptView;var o=s("IDN4");t.AllAtOnceQuestionAttemptView=o.AllAtOnceQuestionAttemptView;var r=s("IHpG");t.OneAtATimeQuestionAttemptView=r.OneAtATimeQuestionAttemptView},"uh+7":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("M0dR"),l=s("j92x"),u=s("0x+l"),d=s("zGdY"),c=s("t6ux"),p=s("3ZJq"),m=i.__importDefault(s("Pfoe")),f=s("/R3Y");s("S0GT"),t.CLASS_PREFIX="calculated-formula-question-read";const h="assessments.canvas.question.calculatedFormula.readOnly";class g extends a.Component{constructor(e){super(e),this.getAnswerToleranceDisplayInfo=()=>{const{localize:e}=this.props,{correctAnswerTolerance:s}=this.props.question,i=s.type===d.CalculatedFormulaToleranceType.Numeric?"answerToleranceDisplayInfoNumeric":"answerToleranceDisplayInfoPercent";return a.default.createElement("div",{className:f.removeExtraWhitespace(`\n                    ${t.CLASS_PREFIX}__precision-scoring-display-info\n                    ${t.CLASS_PREFIX}__precision-scoring-display-info--full-credit\n                `)},e.translate(`${h}.${i}`,{answerToleranceValue:s.value}))},this.getPartialCreditDisplayInfo=()=>{const{localize:e}=this.props,{partialCreditTolerance:s,partialCreditPointsPercent:i}=this.props.question,n=s.type===d.CalculatedFormulaToleranceType.Numeric?"partialCreditDisplayInfoNumeric":"partialCreditDisplayInfoPercent";return a.default.createElement("div",{className:f.removeExtraWhitespace(`\n                    ${t.CLASS_PREFIX}__precision-scoring-display-info\n                    ${t.CLASS_PREFIX}__precision-scoring-display-info--partial-credit\n                `)},a.default.createElement("span",null,e.translate(`${h}.${n}`,{answerToleranceValue:s.value})),a.default.createElement("span",{className:`${t.CLASS_PREFIX}__precision-scoring-display-info--partial-credit-points-percent`},e.translate(`${h}.partialCreditDisplayInfoPointsPercent`,{partialCreditPointsPercent:i})))},this.getVariablesRange=()=>{const{question:e,localize:s}=this.props;return a.default.createElement("div",{className:`${t.CLASS_PREFIX}__variables-range`},e.variableDefinitions.map(e=>{const i=s.translate(`${h}.variableRangeRow`,{name:e.name,min:e.minValue,max:e.maxValue});return a.default.createElement("div",{key:e.name,className:`${t.CLASS_PREFIX}__variables-range--row`,dangerouslySetInnerHTML:{__html:i}})}))},this.getAnswerSettingsSection=(e,s)=>{const{localize:i}=this.props;return a.default.createElement("div",{className:`${t.CLASS_PREFIX}__answer-settings-section`},a.default.createElement(r.AnalyticsTypography,{component:"h5",variant:"h4"},i.translate(e)),s)},this.getAnswerSettingsContent=e=>{const{localize:s,question:i}=this.props;return a.default.createElement("div",{className:`${t.CLASS_PREFIX}__answer-settings-content`,id:e},this.getAnswerSettingsSection(`${h}.answerFormatLabel`,a.default.createElement("div",{className:`${t.CLASS_PREFIX}__answer-format`},i.correctAnswerFormat===d.CalculatedFormulaAnswerFormatType.Normal?s.translate("assessments.canvas.question.calculatedFormula.stepTwo.answerFormat.normalOption"):s.translate("assessments.canvas.question.calculatedFormula.stepTwo.answerFormat.exponentialOption"))),this.getAnswerSettingsSection(`${h}.roundingLabel`,a.default.createElement("div",{className:`${t.CLASS_PREFIX}__rounding`},i.correctAnswerPrecision===d.CalculatedFormulaAnswerPrecisionType.Decimal?s.translate(`${h}.roundingDecimalPlaces`,{roundingCount:i.answerScale}):s.translate(`${h}.roundingSignificantFigures`,{roundingCount:i.answerScale}))),this.getAnswerSettingsSection(`${h}.precisionScoringOptionsLabel`,a.default.createElement(a.default.Fragment,null,a.default.createElement(l.Checkbox,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.read.correctAnswerTolerance.checkbox`,checked:i.correctAnswerTolerance&&i.correctAnswerTolerance.value>0,className:`${t.CLASS_PREFIX}__precision-scoring__full-credit-checkbox`,disabled:!0,label:s.translate("assessments.canvas.question.calculatedFormula.stepTwo.precisionScoring.fullCreditLabel")}),i.correctAnswerTolerance&&i.correctAnswerTolerance.value>0&&this.getAnswerToleranceDisplayInfo(),a.default.createElement(l.Checkbox,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.read.partialAnswerTolerance.checkbox`,checked:i.allowPartialCredit,className:`${t.CLASS_PREFIX}__precision-scoring__partial-credit-checkbox`,disabled:!0,label:s.translate("assessments.canvas.question.calculatedFormula.stepTwo.precisionScoring.partialCreditLabel")}),i.allowPartialCredit&&this.getPartialCreditDisplayInfo())),i.variableDefinitions&&this.getAnswerSettingsSection("assessments.canvas.question.calculatedFormula.stepTwo.variableRanges.title",this.getVariablesRange()),this.getAnswerSettingsSection("assessments.canvas.question.calculatedFormula.stepTwo.variableSetCount.title",a.default.createElement("div",{className:`${t.CLASS_PREFIX}__answer-set-count`},i.variableSetCount)))},this.state={isAnswerSettingsExpanded:!1}}render(){const{question:e,localize:s,pluginsConfig:i}=this.props,{isAnswerSettingsExpanded:n}=this.state,o=`calculated-question-readonly-answer-settings-toggle_${e.id}`,l=n?"hideSettingsText":"showSettingsText";return a.default.createElement("div",{className:t.CLASS_PREFIX},a.default.createElement(m.default,{bbml:e.questionText.rawText,id:`${e.id}-read-preview`,isReadOnly:!0}),a.default.createElement("img",{className:`${t.CLASS_PREFIX}__formula-image`,src:e.mathMLImageURL,alt:e.mathMLImageAltText}),a.default.createElement(r.AnalyticsTypography,{component:"h4",variant:"h4"},a.default.createElement("button",{className:`${t.CLASS_PREFIX}__answer-settings-toggle-button`,onClick:()=>{this.setState(e=>({isAnswerSettingsExpanded:!e.isAnswerSettingsExpanded}))},type:"button","aria-label":s.translate(`${h}.answerSettingsToggleButton.ariaLabel`),"aria-expanded":n,"aria-controls":n?o:null},a.default.createElement("span",null,s.translate(`${h}.answerSettingsToggleButton.${l}`)),n?a.default.createElement(u.ArrowUp,null):a.default.createElement(u.ArrowDown,null))),this.state.isAnswerSettingsExpanded&&this.getAnswerSettingsContent(o),a.default.createElement(p.AutomatedQuestionFeedbackRead,{className:`${t.CLASS_PREFIX}__automated-feedback`,question:e,pluginsConfig:i}))}}t.BaseCalculatedFormulaQuestionRead=g,g.propTypes={question:n.default.object.isRequired,localize:n.default.object.isRequired,pluginsConfig:n.default.object.isRequired},t.default=o.localizedComponentWrapper(g)},umMl:function(e,t,s){"use strict";s.r(t)},"vN+o":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("2yjE")),o=i.__importDefault(s("RtIR"));t.getPluggableQuestionHeaderProps=(e,t)=>{const{alignedGoals:s,localize:i,question:a,questionTitle:n}=e,r=o.default("goal",a,n);return{alignedGoals:s,analyticsId:"assessments.canvas.question.header",canEnterEditMode:e.canEnterEditMode,deleteQuestion:e.deleteQuestion,disableFocus:e.disableFocus,disableInteraction:e.disableInteraction,editMode:e.editMode,focusTitle:e.focusTitle,goalAriaLabel:i.translate(r.string,{relatedContent:r.relation}),hasAlignedGoals:s&&s.length>0,hasQuestionEditPermissions:e.hasQuestionEditPermissions,hasSubmissions:e.hasSubmissions,hideEditPoints:a.externallyReferencedQuestion,header:e.customQuestionHeader,hideFullCreditCheckbox:!1,id:a.id,onPointsClick:e.startEditMode,onQuestionChange:t,openGoals:e.openGoals,points:a.points,question:a,questionTitle:n,startEditMode:e.startEditMode}},t.default=e=>a.default.createElement(a.default.Fragment,null,e.header?e.header(e):a.default.createElement(n.default,Object.assign({},e)))},vUO3:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=s("9OUN"),o=s("JfV0"),r=s("uDfI"),l=s("8unJ"),u=i.__importDefault(s("aWzz")),d=s("TUnR");class c extends a.default.Component{constructor(){super(),this.onFtueDismiss=()=>{const{ftueKey:e,ftuePreference:t,persistUserPreference:s}=this.props;s({key:e,value:(t||{key:e,value:0}).value+1})},this.state={isShowingFtue:!1}}UNSAFE_componentWillMount(){const{ftueKey:e,loadUserPreference:t}=this.props;t({key:e})}UNSAFE_componentWillReceiveProps(e){const t=!(e.isLoading||e.ftuePreference&&0!==e.ftuePreference.value);this.setState(()=>({isShowingFtue:t}))}render(){const{ftueElement:e,ftueMessageKey:t,localize:s}=this.props;if(this.state.isShowingFtue){const i=s.translate("assessments.common.button.close");return a.default.createElement(d.GuidanceTeachingBubble,{componentKey:t,targetElement:e,onDismiss:this.onFtueDismiss,closeButtonAriaLabel:i,analyticsId:"assessments.common.button.close"},s.translate(t))}return null}}t.Ftue=c,c.propTypes={ftueKey:u.default.string.isRequired,ftueElement:u.default.object,ftueMessageKey:u.default.string.isRequired,ftuePreference:u.default.object,isLoading:u.default.bool.isRequired,loadUserPreference:u.default.func.isRequired,persistUserPreference:u.default.func.isRequired,localize:u.default.object.isRequired};const p=r.connect((e,t)=>({ftuePreference:o.select.userPreference.getUserPreferenceByKey(e,t.ftueKey),isLoading:o.select.userPreference.isUserPreferenceLoading(e)}),e=>n.bindActionCreators({loadUserPreference:o.actions.userPreference.loadUserPreference,persistUserPreference:o.actions.userPreference.persistUserPreference},e))(c);t.default=l.localizedComponentWrapper(p)},vu2V:function(e,t,s){"use strict";s.r(t)},wNNv:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("76kz"),r=s("t3aq"),l=s("t9Ny"),u=s("0x+l"),d=s("AY8y"),c=s("JfV0"),p=i.__importDefault(s("PCGI")),m=i.__importDefault(s("gTAB")),f=i.__importDefault(s("ZfLe")),h=i.__importStar(s("AiU9")),g=i.__importStar(s("OPED")),b=s("b0Dq"),_=s("gk+Q"),y=s("aPd7"),E=s("5B29"),C=s("Vng8");s("in1o");class w extends a.Component{constructor(e){super(e),this.setupFileAttachmentMenuOptions=()=>{const{context:e,localize:t,question:s}=this.props;if(this.isFileAttachment&&this.fileViewer){const i=this.props.dropDownMenuOptionsOverrides||[],n=this.fileViewer._setupContextMenu().items.filter(e=>-1!==["viewFile","downloadFile"].indexOf(e.key));e.isAllyAvailable&&(n.push({key:"instructorfeedback",icon:a.default.createElement(u.AllyScore,null),name:t.translate("assessments.canvas.question.overflowOptions.viewAxFeedback"),additionalAttributes:{"data-ally-show":"instructorfeedback","data-ally-content-ref":s.id,"data-ally-invoke":"instructorfeedback"},style:{display:"none"}}),n.push({key:"alternativeformats",icon:a.default.createElement(u.AllyDownload,null),name:t.translate("assessments.canvas.question.overflowOptions.alternativeFormats"),additionalAttributes:{"data-ally-show":"alternativeformats","data-ally-content-ref":s.id,"data-ally-invoke":"alternativeformats"},style:{display:"none"}})),this.setState({overflowMenuOptionOverrides:i.concat(n)})}},this.onQuestionChange=(e,t,s)=>{this.props.onQuestionChange(e,C.hasPresentationQuestionChanged,t,s)},this.saveFileSettings=e=>{this.setState(()=>({isShowingFileSettingsDialog:!1}));const{resourceUrl:t}=e,s=_.convertSettingsToBbfile(e),i=_.prepareFileMetadata(t,s),a={...this.props.question,questionText:{rawText:y.createFileLink(i)}};this.props.onQuestionChange(a,C.hasPresentationQuestionChanged,this.props.onQuestionSave,!1)},this.hideFileSettingsDialog=()=>{this.setState(()=>({isShowingFileSettingsDialog:!1}))},this.startEditMode=()=>{const{startEditMode:e}=this.props;this.isFileAttachment?this.setState(()=>({isShowingFileSettingsDialog:!0})):e()},this.getFileViewerWidgets=()=>{const{localize:e,question:t}=this.props;return a.default.createElement("div",{className:"presentation-only__file-content__widget-wrapper"},a.default.createElement("span",{className:"presentation-only__file-content__widget-wrapper__score-indicator","data-ally-content-ref":t.id,"data-ally-show":"instructorfeedback"},a.default.createElement(r.AllyWidget,{contentRef:t.id,widgetType:r.WidgetType.ScoreIndicator})),a.default.createElement("span",{className:"presentation-only__file-content__widget-wrapper__alt-formats","data-ally-content-ref":t.id,"data-ally-show":"alternativeformats"},a.default.createElement(r.AllyWidget,{contentRef:t.id,widgetType:r.WidgetType.AlternativeFormats,ariaLabel:e.translate("assessments.canvas.question.overflowOptions.alternativeFormats")})))},this.renderFile=()=>{const{question:e,context:t}=this.props,s=b.getFileViewerPropsArray(e),{file:i}=s[0],n={"data-ally-content-id":e.id,"data-ally-file-eid":this.xythosId,"data-ally-file-preview-url":this.resourceUrl},u=o.isImageFile(o.getMediaType(i))&&o.canFileBeRenderedInline(i)&&(o.isFileDisplayedInline(i)||this.state.isMediaPreviewVisible);return a.default.createElement("div",{className:"presentation-only__file-content"},!u&&a.default.createElement(r.AllyContentId,{contentId:e.id,fileId:this.xythosId,filePreviewUrl:this.resourceUrl}),a.default.createElement(l.FileViewer,Object.assign({},s[0],{ref:e=>{this.fileViewer=null!=e?e.wrappedComponent:null},widgets:t.isAllyAvailable&&this.getFileViewerWidgets(),inlineMediaAdditionalAttributes:u?n:{},onToggleMediaPreview:e=>this.setState({isMediaPreviewVisible:e})})),a.default.createElement(d.FilePropertyDialog,{file:i,hidden:!this.state.isShowingFileSettingsDialog,onCancel:this.hideFileSettingsDialog,onSave:this.saveFileSettings}))},this.renderText=()=>a.default.createElement(g.default,Object.assign({},g.getQuestionTextProps(this.props,this.onQuestionChange))),this.state={isShowingFileSettingsDialog:!1,overflowMenuOptionOverrides:[],isMediaPreviewVisible:!1};const{question:t,context:s}=this.props;this.isFileAttachment=c.Questions.isFileAttachment(t);let i=[];this.isFileAttachment&&(i=b.getFileViewerPropsArray(t)),this.isFileAttachment&&1===i.length&&(this.resourceUrl=i[0].file.resourceUrl,this.xythosId=s.allyService.getXythosIdFromContentFileUrl(this.resourceUrl),s.isAllyAvailable&&s.allyService.update(s.contentId,this.xythosId))}componentDidUpdate(e){const{editMode:t,question:s,setActiveEditorId:i}=this.props,{editMode:a}=e;m.default.isInactive(a)&&m.default.isActive(t)&&i(s.id)}UNSAFE_componentWillMount(){this.setupFileAttachmentMenuOptions()}render(){const{editMode:e,question:t}=this.props;return a.default.createElement("div",{className:"presentation-only"},a.default.createElement(p.default,{editMode:e,question:t},a.default.createElement(h.default,Object.assign({},h.getQuestionControlProps(this.props),{dropDownMenuOptionsOverrides:this.state.overflowMenuOptionOverrides,updateDropdownMenuOptions:this.setupFileAttachmentMenuOptions,startEditMode:this.startEditMode})),this.isFileAttachment?this.renderFile():this.renderText()))}}t.PresentationOnly=w,w.propTypes={activeEditorId:n.default.string,canEnterEditMode:n.default.bool.isRequired,deleteQuestion:n.default.func.isRequired,disableFocus:n.default.bool,dropDownMenuOptionsOverrides:n.default.array,editMode:n.default.number.isRequired,editorPlugins:n.default.array,onQuestionChange:n.default.func.isRequired,question:n.default.object.isRequired,refreshBbml:n.default.bool.isRequired,setActiveEditorId:n.default.func.isRequired,showQuestionControls:n.default.bool.isRequired,startEditMode:n.default.func.isRequired,pluginsConfig:n.default.object.isRequired,localize:n.default.object.isRequired,context:n.default.object.isRequired,onQuestionSave:n.default.func.isRequired,localizationPrefix:n.default.string.isRequired};const S=f.default(E.withAssessmentPanelContext(w));t.default=S},wXu7:function(e,t,s){"use strict";s.r(t)},xWTz:function(e,t,s){"use strict";s.r(t)},xyjg:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("nsO7")),n=s("MC1S"),o=s("JfV0"),r=s("8unJ"),l=i.__importDefault(s("aWzz")),u=i.__importDefault(s("ERkP")),d=i.__importDefault(s("RtIR")),c=i.__importDefault(s("j9WP")),p=i.__importDefault(s("On2X")),m=s("2yjE"),f=s("0x+l");s("jLgm");class h extends u.default.Component{constructor(){super(),this.checkbox=null,this.onSelectQuestion=()=>{const{onSelectQuestion:e,question:t,selected:s}=this.props;e(t.id,s)},this.toggleExpanded=()=>this.setState(e=>({expanded:!e.expanded})),this.getToggleButtonAriaLabel=()=>{const e=d.default("toggleView",this.props.question,null,"questionPicker");return this.props.localize.translate(e.string,{relatedContent:e.relation})},this.getQuestionTitle=(e,t)=>{let s=`questionPicker.typeLabels.${e.questionType}`;return e.subType&&(s+=`.${e.subType}`),t.translate(s)},this.state={expanded:!1}}componentDidUpdate(){this.checkbox&&this.props.focused&&this.checkbox.focus()}render(){const{courseId:e,question:t,localize:s,selected:i,sourceHeaderId:r,localizationPrefix:l}=this.props,{expanded:d}=this.state,h=o.Questions.isPresentationOnly(t),g=this.getQuestionTitle(t,s),b=d?"--expanded":"--collapsed",_=`selectable-question${t.id}`,y=`selectable-question-wrapper${t.id}`,E=`bb-editor${t.id} ${r} `,C=`${m.QUESTION_TITLE_ID_PREFIX}${t.id}`;return u.default.createElement("div",{id:_,className:`selectable-question selectable-question${b}`},u.default.createElement(n.Checkbox,{className:"selectable-question__checkbox",checked:i,onChange:this.onSelectQuestion,ariaLabelledBy:E,ariaDescribedBy:C,componentRef:e=>{this.checkbox=e},analyticsId:"selectableQuestion.checkbox"}),u.default.createElement("div",{id:y,className:"selectable-question__question-wrapper"},h&&u.default.createElement("div",{className:"question-header"},u.default.createElement("h3",{id:`${m.QUESTION_TITLE_ID_PREFIX}${t.id}`,className:"question-header__title"},g)),d?u.default.createElement(c.default,{courseId:e,question:t,questionTitle:g,alignedGoals:t.alignedGoals,questionBeingEditedId:null,isAnyQuestionDirty:!1,onQuestionEdit:a.noop,onQuestionMadeDirty:a.noop,persistQuestion:a.noop,deleteQuestion:a.noop,openGoals:a.noop,pluginsConfig:{},hasSubmissions:!0,hasAssessmentModifyPermissions:!1,dragButtonAriaLabel:"",dragPointRef:a.noop,disableFocus:!0,localizationPrefix:l}):u.default.createElement(p.default,{id:t.id,question:this.props.question,questionTitle:h?null:g})),u.default.createElement(n.IconButton,{onClick:this.toggleExpanded,className:`selectable-question__question-toggle selectable-question__question-toggle${b}`,icon:u.default.createElement(f.ArrowDown,null),"aria-labelledby":E,"aria-expanded":d,"aria-controls":y,analyticsId:"selectableQuestion.toggle.button"}))}}h.propTypes={courseId:l.default.string.isRequired,localize:l.default.object.isRequired,onSelectQuestion:l.default.func.isRequired,question:l.default.object.isRequired,sourceHeaderId:l.default.string,focused:l.default.bool,selected:l.default.bool.isRequired,localizationPrefix:l.default.string.isRequired},t.UnwrappedSelectableQuestion=h,t.default=r.localizedComponentWrapper(h)},xzbH:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importStar(s("ERkP")),n=i.__importDefault(s("aWzz")),o=s("8unJ"),r=s("JfV0"),l=s("MC1S"),u=s("caKH");s("BXTk");class d extends a.Component{constructor(e){super(e),this.onPatternChange=e=>{this.state.patternHasBeenTested&&this.setState({answerValue:"",answerHasBeenTested:!1,patternHasBeenTested:!1,answerMatchesPattern:!1,patternIsValid:!1}),this.setState({patternValue:e})},this.onAnswerChange=e=>{this.setState({answerMatchesPattern:!1,answerHasBeenTested:!1,answerValue:e})},this.getPatternErrorMessage=()=>this.state.patternHasBeenTested&&!this.state.patternIsValid?this.props.localize.translate("assessments.canvas.question.fimb.patternMatchHelper.patternError"):"",this.getAnswerErrorMessage=()=>this.state.answerHasBeenTested&&!this.state.answerMatchesPattern?this.props.localize.translate("assessments.canvas.question.fimb.patternMatchHelper.answerError"):"",this.cancel=()=>{this.props.onClose()},this.save=()=>{this.props.onSave(this.state.patternValue),this.props.onClose()},this.testPattern=()=>{r.checkPattern(this.props.courseId,this.props.assessmentId,this.state.patternValue).then(e=>{this.setState({patternIsValid:e.result,patternHasBeenTested:!0})})},this.testAnswer=()=>{r.checkPatternAnswer(this.props.courseId,this.props.assessmentId,this.state.patternValue,this.state.answerValue).then(e=>{this.setState({answerMatchesPattern:e.result,answerHasBeenTested:!0})})},this.getHelpLinkElement=()=>{const e=`https://help.blackboard.com/001_569${this.props.currentLocale&&"en"!==this.props.currentLocale?this.props.currentLocale.replace("-","_"):"en_US"}`;return a.default.createElement(l.Link,{href:e,ariaLabel:this.props.localize.translate("assessments.canvas.question.fimb.patternMatchHelper.helpLinkAriaLabel"),target:"_blank"},this.props.localize.translate("assessments.canvas.question.fimb.patternMatchHelper.helpLink"))},this.state={patternValue:this.props.initialPatternValue||"",answerValue:"",patternIsValid:!1,answerMatchesPattern:!1,patternHasBeenTested:!1,answerHasBeenTested:!1}}render(){const e=this.props.localize.translate;return a.default.createElement(u.UltraModalDialog,{hidden:!1,className:"test-pattern",dialogContentProps:{type:l.DialogType.fullHeaderFooter,title:e("assessments.canvas.question.fimb.patternMatchHelper.title"),showCloseButton:!1}},a.default.createElement("div",{className:"test-pattern__section-wrapper test-pattern__section-wrapper--first"},a.default.createElement("div",{className:"test-pattern__text-field"},a.default.createElement(l.TextField,{label:e("assessments.canvas.question.fimb.patternMatchHelper.patternLabel"),value:this.state.patternValue||"",required:!0,valid:this.state.patternHasBeenTested&&this.state.patternIsValid,onChanged:this.onPatternChange,errorMessage:this.getPatternErrorMessage(),analyticsId:"assessments.canvas.question.fimb.patternMatchHelper.patternLabel"})),a.default.createElement("div",{className:"test-pattern__button"},a.default.createElement(l.Button,{disabled:0===this.state.patternValue.length||this.state.patternHasBeenTested,onClick:this.testPattern,analyticsId:"assessments.canvas.question.fimb.patternMatchHelper.testButton"},e("assessments.canvas.question.fimb.patternMatchHelper.testButton")))),this.state.patternHasBeenTested&&this.state.patternIsValid&&a.default.createElement("div",{className:"test-pattern__section-wrapper"},a.default.createElement("div",{className:"test-pattern__text-field"},a.default.createElement(l.TextField,{label:e("assessments.canvas.question.fimb.patternMatchHelper.answerLabel"),valid:this.state.answerMatchesPattern,required:!0,onChanged:this.onAnswerChange,errorMessage:this.getAnswerErrorMessage(),analyticsId:"assessments.canvas.question.fimb.patternMatchHelper.answerLabel"})),a.default.createElement("div",{className:"test-pattern__button"},a.default.createElement(l.Button,{disabled:0===this.state.answerValue.length||this.state.answerHasBeenTested,onClick:this.testAnswer,analyticsId:"assessments.canvas.question.fimb.patternMatchHelper.patternHasBeenTested.testButton"},e("assessments.canvas.question.fimb.patternMatchHelper.testButton")))),a.default.createElement(l.DialogFooter,{helpLink:this.getHelpLinkElement()},a.default.createElement(l.DefaultButton,{onClick:this.cancel,text:e("assessments.canvas.question.fimb.patternMatchHelper.cancelButton"),analyticsId:"assessments.canvas.question.fimb.patternMatchHelper.cancelButton"}),a.default.createElement(l.PrimaryButton,{disabled:!this.state.patternHasBeenTested||!this.state.patternIsValid,onClick:this.save,text:e("assessments.canvas.question.fimb.patternMatchHelper.saveButton"),analyticsId:"assessments.canvas.question.fimb.patternMatchHelper.saveButton"})))}}d.propTypes={localize:n.default.object,currentLocale:n.default.string,initialPatternValue:n.default.string,onClose:n.default.func,onSave:n.default.func,assessmentId:n.default.string,courseId:n.default.string};const c=o.localizedComponentWrapper(d);t.default=c},y3re:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowFeatureAnnouncement=(e,t)=>{var s;return null!==(s=e&&e[t])&&void 0!==s&&s};t.FeatureAnnouncementsHelper=class{constructor(e){this.questions=e}getQuestionFeatureAnnouncements(){return{}}}},yETo:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("Agfx");t.useStyles=i.makeStyles(e=>{var t;return i.createStyles({base:{marginTop:"24px"},contentSection:{paddingTop:"6px"},contentToggle:{borderBottom:`1px solid ${null===(t=e.palette.border)||void 0===t?void 0:t.main}`,marginBottom:"10px",padding:"12px 0",width:"100%",display:"flex",justifyContent:"space-between"},sectionHeader:{},sectionTitle:{}})})},ytrv:function(e,t,s){"use strict";s.r(t)},yxoV:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("gTAB")),o=i.__importDefault(s("O55a")),r=i.__importDefault(s("C9HY"));t.default=({editMode:e,onQuestionChange:t,question:s,setActiveEditorId:i,activeEditorId:l,pluginsConfig:u})=>a.default.createElement(a.default.Fragment,null,n.default.isInactive(e)?a.default.createElement(o.default,{question:s,pluginsConfig:u}):a.default.createElement(r.default,{onQuestionChange:t,question:s,activeEditorId:l,setActiveEditorId:i,pluginsConfig:u}))},z01z:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s("D57K"),a=i.__importDefault(s("ERkP")),n=i.__importDefault(s("aWzz")),o=i.__importDefault(s("Pfoe")),r=s("3ZJq");s("OfVW");const l=e=>{const{answersInfo:t,answersInfoLabel:s,localize:i,question:n,questionTextClassName:l}=e,u="assessments.canvas.question.trueFalse";return a.default.createElement("div",{className:"readonly-true-false-question"},a.default.createElement("div",{className:l},a.default.createElement(o.default,{id:n.id,bbml:n.questionText.rawText,isReadOnly:!0,refreshBbml:!0})),a.default.createElement("div",{className:"readonly-answer__container"},t&&a.default.createElement("span",{className:"readonly-answer__info-label readonly-answer__info"},s)),a.default.createElement("ol",{className:"readonly-true-false-question__list"},a.default.createElement("li",{className:"readonly-true-false-question__li readonly-answer__container"},a.default.createElement("div",{className:"readonly-true-false-question__answers readonly-answer__main"},a.default.createElement("span",{className:"readonly-true-false-question__text"},i.translate(`${u}.${n.answerType}.true`)),n.answer&&a.default.createElement("span",{className:"readonly-true-false-question__correct"},i.translate(`${u}.correctAnswer`))),t&&a.default.createElement("div",{className:"readonly-true-false-question__answers-info readonly-answer__info"},t[0])),a.default.createElement("li",{className:"readonly-true-false-question__li readonly-answer__container"},a.default.createElement("div",{className:"readonly-true-false-question__answers readonly-answer__main"},a.default.createElement("span",{className:"readonly-true-false-question__text"},i.translate(`${u}.${n.answerType}.false`)),!n.answer&&a.default.createElement("span",{className:"readonly-true-false-question__correct"},i.translate(`${u}.correctAnswer`))),t&&a.default.createElement("div",{className:"readonly-true-false-question__answers-info readonly-answer__info"},t[1]))),a.default.createElement(r.AutomatedQuestionFeedbackRead,{question:n}))};l.propTypes={answersInfo:n.default.array,answersInfoLabel:n.default.string,localize:n.default.object.isRequired,question:n.default.object.isRequired,questionTextClassName:n.default.string.isRequired},t.default=l},zKpB:function(e,t,s){"use strict";s.r(t)},ztHM:function(e,t,s){"use strict";s.r(t)}}]);