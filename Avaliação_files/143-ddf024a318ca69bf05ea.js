(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{X8JP:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return o}));var a=i("Vsv2"),n=i("pjml");const s="ultraUi.components.services.cloudDrive.rteCloudStorageIntegrationModal",o="RteCloudStorageIntegrationService",r=e=>e.account+"|"+e.id;class c{constructor(e,t,i){this.$q=e,this.cloudDriveService=t,this.CloudDriveModel=i}initialize(){return this.cloudDriveService.isCloudServiceAvailable().then(e=>this.isCloudServiceAvailable=e)}openFilePicker(e){return this.cloudDriveService.cloudDriveStorage.openFilePicker(e,!0).then(e=>{if(e){const t=[];return e.forEach(i=>{const a=r(i),n=this.CloudDriveModel.$new("CloudStorageIntegration").contents.$new(a).$fetch({accessToken:e[0].bearer_token.key}).$asPromise();t.push(n)}),this.$q.all(t).then(t=>t.map(t=>({id:t.id,cloudStorageIntegrationAccessToken:e[0].bearer_token.key,name:t.name,size:t.size,type:t.type,updatedTime:t.updatedTime,webLocation:t.webLocation})))}return this.$q.reject()})}getModalCallback(e){return()=>this.cloudDriveService.cloudDriveStorage?this.openFilePicker(e):this.cloudDriveService.initializeCloudDrive().then(()=>this.openFilePicker(e))}}c.$inject=["$q",a.b,n.h.serviceName],angular.module(s,[a.a]).service(o,c)},"dRT/":function(e,t,i){"use strict";i.r(t);var a=i("D57K"),n=i("Rhk/"),s=i.n(n),o=i("9zo4"),r=i("Fvsw"),c=i("jhBu"),l=i("0JpG"),d=i("vhkR"),u=i("TnpK"),h=i("X8JP"),b=i("yC9S"),p=i("Q/M7"),m=i("5MwF"),g=i("Qbdf"),v=i("Sa5G"),S=i("aHpC");i.d(t,"moduleName",(function(){return P})),i.d(t,"controllerName",(function(){return k})),i.d(t,"componentName",(function(){return j})),i.d(t,"IpHome",(function(){return _})),i.d(t,"BaseIpController",(function(){return I})),i.d(t,"template",(function(){return f}));const P="ultra.base.institution-page",k="ultra.base.institution-page.controller",j="institutionPageHome",O=angular.module(P,[r.a,u.b,h.a]);let _=class{constructor(e,t,i,a,n,s,o,r,c,l,d){this.$element=e,this.$scope=t,this.$stateParams=i,this.$q=a,this.accessibility=n,this.bbContext=s,this.entitlement=o,this.localize=r,this.ltiService=c,this.ultraState=l,this.contextCourse=d,this.featureFlags={},this.selectPage=e=>{this.ultraState.go("base.institution-page-admin",{variantId:e})},this.openSmallPeek=e=>{this.ultraState.goPeekState("allLinks",{moduleId:e})},this.openEditPeek=(e,t=!1)=>{t?this.ultraState.goPeekState("editModule",{moduleId:e,expandRoles:t}):this.ultraState.goPeekState("editModule",{moduleId:e})},this.openCreatePeek=(e,t)=>{this.ultraState.goPeekState("createModule",{type:e,sequence:t})},this.openModifyPageImage=e=>{this.ultraState.goPeekState("editPageImage",{type:e})},this.openSettingsPeek=(e="default")=>this.ultraState.goPeekState("brand-detail",{brandId:e})}$postLink(){const e={insertYoutubeVideo:{apiBasePath:Object(p.c)(m.a.apiBasePath),babelfishInstance:this.localize.intl,babelfishFormatInstance:this.localize.frmt,courseId:this.contextCourse.courseId,getEmbedSrc:this.ltiService.configureAndInitInlineLaunch.bind(this.ltiService),locale:this.localize.getLocale(this.$scope),xsrfToken:this.bbContext.xsrfToken},contentMarket:{}},t={openEditPageImage:this.openModifyPageImage,openAll:this.openSmallPeek,openEdit:this.openEditPeek,openCreate:this.openCreatePeek,setFocusOverride:this.accessibility.setFocusOverrideOnPanel.bind(this.accessibility),openSettings:null,selectPage:this.selectPage,featureFlags:this.featureFlags,editorPluginsConfig:e};let i;if(this.ultraState.is("base.institution-page-admin")){const e=this.localize.translateSync({locale:this.localize.getLocale(this.$scope),key:"base.institutionPage.defaultVariantName"});i=this.$q.all([this.entitlement.hasSystemEntitlement(v.v.ViewBrand),this.$q.resolve(s.a.pageService.getCustomPages("IP",!0).then(t=>t.map(t=>({...t,variantName:t.variantName||e}))))]).then(([e,i])=>({...t,openSettings:e?this.openSettingsPeek:null,variantId:this.$stateParams.variantId,variantOptions:i,mode:"admin"}))}else i=this.$q.resolve().then(()=>({...t,variantId:this.variantId}));i.then(e=>{s.a.renderIp(this.$element[0],this.localize.isRTL(),this.localize.getAppLocale(),this.localize.intl,this.localize.frmt,e)})}$onDestroy(){s.a.destroyReactControl(this.$element[0])}};_=Object(a.__decorate)([Object(b.a)({module:O,componentName:j,bindings:{variantId:"<"}}),Object(a.__param)(0,Object(S.b)("$element")),Object(a.__param)(1,Object(S.b)("$scope")),Object(a.__param)(2,Object(S.b)("$stateParams")),Object(a.__param)(3,Object(S.b)("$q")),Object(a.__param)(4,Object(S.b)(o.c)),Object(a.__param)(5,Object(S.b)(r.b)),Object(a.__param)(6,Object(S.b)(c.b)),Object(a.__param)(7,Object(S.b)(l.serviceName)),Object(a.__param)(8,Object(S.b)(d.b)),Object(a.__param)(9,Object(S.b)(u.d)),Object(a.__param)(10,Object(S.b)(g.e))],_);let I=class{constructor(e,t){e.variantId=t}};I=Object(a.__decorate)([Object(a.__param)(0,Object(S.b)("$scope")),Object(a.__param)(1,Object(S.b)("ipVariantId"))],I);const f='<div class="institution-page-container">\n  <bb-base-header page-title-key="base.nav.institutionPage" header-not-skip-target="true"></bb-base-header>\n  <institution-page-home variant-id="variantId"></institution-page-home>\n  <div ui-view></div>\n</div>';O.controller(k,I)}}]);